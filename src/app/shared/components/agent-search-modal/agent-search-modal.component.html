<div #agentSearchModalElement class="modal fade" id="agentSearchModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"
  (shown.bs.modal)="onModalOpen()">
  <div class="modal-dialog modal-dialog-centered modal-lg modal-fade">
    <div class="modal-content">

      <div class="modal-body">
        <button type="button" #closebutton class="float-end btn-close" data-bs-dismiss="modal"
          aria-label="Close"></button>
        <p class="text-start title" id="selectAgent">
          {{'gis.quotation.select_an_agent' | translate}}
        </p>

        <p-table #agentTable [value]="agents" [paginator]="true" [rows]="rows" [scrollable]="true"
          scrollDirection="horizontal" [showCurrentPageReport]="true" [tableStyle]="{'max-width': '180rem'}"
          currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [responsiveLayout]="'scroll'"
          [reorderableColumns]="true" [rowsPerPageOptions]="[5, 10, 20]"
          [globalFilterFields]="['id','name', 'shortDesc']" selectionMode="single" [(selection)]="selectedAgent">

          <ng-template pTemplate="header">
            <tr>
              <th pSortableColumn="name" class="flexible-header">{{'gis.quotation.name' | translate}}</th>
              <th pSortableColumn="id" class="flexible-header">{{'gis.quotation.agent_id' | translate}}</th>
              <th pSortableColumn="shortDesc" class="flexible-header">{{'gis.quotation.short_description' | translate}}
              </th>
            </tr>
            <tr>
              <th><input type="text" class="form-control" #nameTypeFilter (input)="inputAgentName($event)"
                  (keyup.enter)="onAgentNameEnter($event)">
              </th>
              <th><input type="text" class="form-control" #idTypeFilter (input)="inputAgentId($event)"
                  (keyup.enter)="onAgentIdEnter($event)">
              </th>
              <th><input type="text" class="form-control"
                  (input)="agentTable.filterGlobal(shortDescTypeFilter.value, 'contains')" #shortDescTypeFilter>
              </th>
            </tr>
          </ng-template>

          <ng-template pTemplate="body" let-agent>
            <tr [pSelectableRow]="agent">
              <td>{{agent.name}}</td>
              <td>{{agent.id}}</td>
              <td>{{agent.shortDesc}}</td>
            </tr>
          </ng-template>

          <ng-template pTemplate="emptymessage">
            <tr>
              <td colspan="4" class="text-center p-4 text-muted"> {{'gis.quotation.no_agent_found' | translate}}</td>
            </tr>
          </ng-template>

        </p-table>

        <div class="d-flex justify-content-end mt-4 mb-3">
          <button type="button" data-bs-dismiss="modal" class="btn btn-outline-primary px-5 me-2" id="cancel"
            (click)="cancel()">
            {{ 'gis.policy.cancel'| translate}}
          </button>
          <button type="button" class="btn btn-primary px-5" (click)="saveSelectedAgent()">Save
          </button>
        </div>

      </div>
    </div>
  </div>
</div>