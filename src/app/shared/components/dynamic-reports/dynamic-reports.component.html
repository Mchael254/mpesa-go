<div class="container bg-white p-2">
  <div class="row align-self-start">
    <div class="col">
      <h6 class="float-start my-3 fw-semibold w-100 text-dark">{{title}}</h6>
      <div *ngFor="let report of reportsToDisplay">
        <label class="text-decoration-underline reportList"
               [class.selectedReport]="report === selectedReport"
               (click)="onReportSelect(report)">
          {{report?.description}}
        </label>
      </div>
    </div>
  </div>
</div>

<div
  class="modal fade"
  #reportDownloadModal
  id="reportDownloadModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  *ngIf="displayModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header border-bottom-0">
        <h1 class="modal-title fs-5 text-dark" id="exampleModalLabel">{{'crm.reportParams' | translate}}</h1>
        <button
          type="button"
          class="btn-close"
          aria-label="Close"
          (click)="closeReportDownloadModal()">
        </button>
      </div>
      <div class="modal-body">
        <form [formGroup]="reportForm">
          <div *ngFor="let param of reportData?.params; let i = index">
            <div class="mb-3">
              <label for="exampleFormControlInput1" class="form-label">{{param?.prompt}}</label>
              <ng-container *ngIf="param?.type === 'LOV'; else showInput">
                <select class="form-select" formControlName="{{param?.name}}">
                  <option *ngFor="let option of filterParameters(param?.name, reportParamCollection)[0]"
                          value="{{option.value}}">
                    {{option.name}}
                  </option>
                </select>
              </ng-container>
              <ng-template #showInput>
                <div *ngIf="param?.type === 'PLOV'; else defaultInput">
                  <p-dropdown
                    [options]="filterParameters(param?.name, reportParamCollection)[0]"
                    optionLabel="name"
                    optionValue="value"
                    [showClear]="true"
                    [filter]="true"
                    filterBy="name"
                    [style]="{ width: '100%', height: '50%' }"
                    placeholder="Select option"
                    formControlName="{{param?.name}}">

                    <ng-template let-option pTemplate="item">
                      <div class="d-flex align-items-center gap-2">
                        <!--                        <div>{{ option?.value }}</div>-->
                        <div>{{ option?.name | titlecase }}</div>
                      </div>
                    </ng-template>
                  </p-dropdown>
                  <div class="input-group mb-3">
                  </div>
                </div>
                <ng-template #defaultInput>
                  <input type="{{param?.type}}" class="form-control" id="exampleFormControlInput1"
                         formControlName="{{param?.name}}">
                </ng-template>
              </ng-template>
            </div>
          </div>

          <label class="text-dark w-100">{{'crm.reportFormat' | translate}}</label>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" formControlName="downloadOption" id="inlineRadio1" value="HTML">
            <label class="form-check-label text-dark" for="inlineRadio1">{{'crm.HTML' | translate}}</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" formControlName="downloadOption" id="inlineRadio2" value="PDF">
            <label class="form-check-label text-dark" for="inlineRadio2">{{'crm.PDF' | translate}}</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" formControlName="downloadOption" id="inlineRadio3" value="XLS">
            <label class="form-check-label text-dark" for="inlineRadio3">{{'crm.Excel' | translate}}</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" formControlName="downloadOption" id="inlineRadio4" value="RTF">
            <label class="form-check-label text-dark" for="inlineRadio3">{{'crm.Word' | translate}}</label>
          </div>
        </form>
      </div>
      <div class="modal-footer border-top-0">
        <button type="button" class="btn btn-primary" (click)="generateReport(this.selectedReport)">{{'crm.print' | translate}}</button>
      </div>
    </div>
  </div>
</div>
