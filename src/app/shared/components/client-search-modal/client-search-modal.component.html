
<div class="modal fade" id="clientSearchModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered  modal-fade modal-lg"  >
    <div class="modal-content">

      <div class="modal-body">
        <button type="button" #closebutton class="float-end btn-close" data-bs-dismiss="modal"
          aria-label="Close"></button>
        <p class="text-start" id="selectClient"> {{
          'gis.quotation.select_a_client' |
          translate
          }}</p>
        <p-table #dt1 (onLazyLoad)="lazyLoadClients($event)" [autoLayout]="true" [lazy]="true" [paginator]="true"
          [rowHover]="true" [resizableColumns]="true" [showCurrentPageReport]="true" [rows]="pageSize || 5"
          [totalRecords]="clientsData?.totalElements" [value]="clientsData?.content"
          [rowsPerPageOptions]="[5, 10, 20, 30, 50, 100]" responsiveLayout="stack" [scrollable]="true"
          scrollHeight="400px" currentPageReportTemplate="{first} - {last} of {totalRecords}"
          [globalFilterFields]=globalFilterFields  [selection]="selectedClient"
          (onRowSelect)="selectedClient = $event.data" [selectionMode]="'single'">


          <ng-template pTemplate="header">
            <tr>
              <th pSortableColumn="name" class="flexible-header">
                {{ 'gis.quotation.name' | translate }}
                <p-sortIcon field="name"></p-sortIcon>
              </th>
              <th pSortableColumn="emailAddress" class="flexible-header">
                {{ 'gis.quotation.email' | translate }}
                <p-sortIcon field="emailAddress"></p-sortIcon>
              </th>
              <th pSortableColumn="phoneNumber" class="flexible-header">
                {{ 'gis.quotation.phone_number' | translate }}
                <p-sortIcon field="phoneNumber"></p-sortIcon>
              </th>


            </tr>
            <tr>
              <th><input type="text" class="form-control" (keyup.enter)="filter($event);" (input)="inputName($event)">
              </th>
              <th><input type="text" class="form-control" (keyup.enter)="filter($event);" (input)="inputEmail($event)">
              </th>
              <th><input type="text" class="form-control " (keyup.enter)="filter($event);" (input)="inputPhone($event)">
              </th>

            </tr>
          </ng-template>

          <ng-template pTemplate="body" let-clientData>
            <tr [pSelectableRow]="clientData">
              <td>{{ utilService.getFullName(clientData) }}</td>
              <td>{{ clientData.emailAddress }}</td>
              <td>{{ clientData.phoneNumber }}</td>

            </tr>
          </ng-template>

          <ng-template pTemplate="emptymessage">
            <tr>
              <td colspan="4">{{ 'gis.quotation.no_client_found' | translate }}</td>
            </tr>
          </ng-template>
        </p-table>
        <div class="d-flex justify-content-end mt-4 mb-3" *ngIf="showActionButtons">
          <button type="button" class="btn btn-primary px-5 me-2" id="cancel" data-bs-dismiss="modal">{{
            'gis.policy.cancel'
            | translate
            }}
          </button>
          <button type="button" class="btn btn-outline-primary px-5" (click)="saveSelectedClient()">Save
          </button>
        </div>

        <br>
      </div>


    </div>
  </div>
</div>
