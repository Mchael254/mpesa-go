<div class="mx-4 my-4">

  <div class="row">
    <div class="col-12">

      <button type="button" class="btn float-end" id="btn-help">
        <i class="fa fa-question-circle" style="color:#00529B;"></i>
      </button>
      <label class="btn float-end" style="color: var(--primary-color);">{{ 'entities.help' | translate }}</label>

    </div>
  </div>

  <form [formGroup]="sortingForm" style="background: none; display: contents">
    <div class="col-lg-12 pb-2">
      <div class="row col-lg-12 col-sm-6">
        <label class="transactionLabel w-auto">{{ 'entities.employee_name' | translate }}: </label>
        <p class="col-lg-6 col-6 px-lg-0" style="color: #000">{{name}}</p>
      </div>

    </div>
    <div class="row pb-2">
      <div class="col-lg-2 col-sm-4 col-6">
        <label class="transactionLabel">{{ 'entities.from' | translate }}:</label><br>
        <input type="date" class="form-control" formControlName="fromDate" (change)="sortEmployeeTransactions()">
      </div>
      <div class="col-lg-2 col-sm-4 col-6">
        <label class="transactionLabel">{{ 'entities.to' | translate }}:</label><br>
        <input type="date" class="form-control" formControlName="toDate" (change)="sortEmployeeTransactions()">
      </div>

      <div class="col-lg-2 col-sm-4 col-6">
        <label class="transactionLabel">{{ 'entities.module' | translate }}:</label><br>
        <select class="form-control form-select" formControlName="module" id="module" (change)="sortEmployeeTransactions()">
          <option value="" selected>{{ 'entities.all' | translate }}</option>
          <option *ngFor="let ticketModule of ticketModules" [ngValue]="ticketModule.shortDescription">{{ ticketModule.description }}</option>
        </select>
      </div>


      <div class="col-lg-2 col-sm-6 col-6">
          <label class="transactionLabel">{{ 'entities.system' | translate }}: </label>
          <select formControlName="system" id="system" class="employeeSelect form-select">
            <!--<option value="" disabled selected>Select option</option>
            <option *ngFor="let systemData of systemsData" value="{{ systemData.id }}"> {{ systemData.shortDesc}}</option>-->
            <option value="gis">GIS</option>
          </select>
      </div>
      <div class="col-lg-2 col-sm-6 col-6">
          <label class="transactionLabel">{{ 'entities.transaction_type' | translate }}: </label>
          <select formControlName="transactionType" id="transactionType" class="employeeSelect form-select" (change)="sortEmployeeTransactions()">
            <option value="">{{ 'entities.all' | translate }}</option>
            <option *ngFor="let businessTransaction of businessTransactions" value="{{businessTransaction.code}}">{{businessTransaction.transactionType | titlecase}}</option>
          </select>
      </div>
      <div class="col-lg-2 col-sm-6 col-6">
          <label class="transactionLabel">{{ 'entities.amount' | translate }}: </label>
          <select class="employeeSelect form-select" formControlName="amount" (change)="sortEmployeeTransactions()">
            <option value="all">{{ 'entities.all' | translate }}</option>
            <option value="zero">{{ 'entities.zero' | translate }}</option>
            <option value="credit">{{ 'entities.credit' | translate }}</option>
            <option value="Debit">{{ 'entities.debit' | translate }}</option>
          </select>
      </div>
    </div>
  </form>
</div>

<div class="mx-4 my-4">

  <div class="col-md-12 col-lg-12 col-xxxl-12">
    <div class="card">
      <div class="card-body">
        <p-table
          [autoLayout]="true"
          [paginator]="true"
          [rowHover]="true"
          [showCurrentPageReport]="true"
          [rows]="pageSize"
          [totalRecords]="transactions?.length"
          [value]="transactions"
          [resizableColumns]="true"
          [rowsPerPageOptions]="[5, 10, 20, 30, 50, 100]"
          [scrollable]="true"
          scrollHeight="400px"
          styleClass="p-datatable-sm"
          responsiveLayout="scroll" class='ui-datatable'
          currentPageReportTemplate="{first} - {last} of {totalRecords}">
          <ng-template pTemplate="header">
            <tr>
              <th pSortableColumn="TRANSACTIONDATE" class="head">{{ 'entities.trans_date' | translate }}<p-sortIcon field="TRANSACTIONDATE"></p-sortIcon></th>
              <th pSortableColumn="POLICYNO"  class="head">{{ 'entities.policy_number' | translate }}<p-sortIcon field="POLICYNO"></p-sortIcon></th>
              <th pSortableColumn="RENEWALENDORSEMENTNO"  class="head">{{ 'entities.ref_number' | translate }}<p-sortIcon field="RENEWALENDORSEMENTNO"></p-sortIcon></th>
              <th pSortableColumn="CLIENTNAME"  class="head">{{ 'entities.client' | translate }}<p-sortIcon field="CLIENTNAME"></p-sortIcon></th>
              <th pSortableColumn="AGENTNAME"  class="head">{{ 'entities.intermediary' | translate }}<p-sortIcon field="AGENTNAME"></p-sortIcon></th>
              <th pSortableColumn="STATUS"  class="head">{{ 'entities.status' | translate }}<p-sortIcon field="STATUS"></p-sortIcon></th>
              <th pSortableColumn="BRANCHNAME"  class="head">{{ 'entities.branch' | translate }}<p-sortIcon field="BRANCHNAME"></p-sortIcon></th>
              <th pSortableColumn="PREMIUM"  class="head">{{ 'entities.amount' | translate }}<p-sortIcon field="PREMIUM"></p-sortIcon></th>
              <th pSortableColumn="AUTHORIZATIONDATE"  class="head">{{ 'entities.date_authorized' | translate }}<p-sortIcon field="AUTHORIZATIONDATE"></p-sortIcon></th>

            </tr>
            <tr>
              <th></th>
              <th>
                <p-columnFilter type="text" field="POLICYNO" matchMode="contains" [showMenu]="false"></p-columnFilter>
              </th>
              <th>
                <p-columnFilter type="text" field="RENEWALENDORSEMENTNO" matchMode="contains" [showMenu]="false"></p-columnFilter>
              </th>
              <th>
                <p-columnFilter type="text" field="CLIENTNAME" matchMode="contains" [showMenu]="false"></p-columnFilter>
              </th>
              <th>
                <p-columnFilter type="text" field="AGENTNAME" matchMode="contains" [showMenu]="false"></p-columnFilter>
              </th>
              <th>
                <p-columnFilter type="text" field="STATUS" matchMode="contains" [showMenu]="false"></p-columnFilter>
              </th>
              <th>
                <p-columnFilter type="text" field="BRANCHNAME" matchMode="contains" [showMenu]="false"></p-columnFilter>
              </th>
              <th>
              </th>
              <th>
              </th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-viewTransactions>
            <tr>
              <!--              <td class="body">{{ (viewTransactions?.transactionDate !== null) ? (viewTransactions?.transactionDate | date: 'd-MMM-y') : null}}</td>-->
              <td class="body">{{ viewTransactions?.TRANSACTIONDATE }}</td>
              <td class="body">{{viewTransactions?.POLICYNO}}</td>
              <td class="body">{{viewTransactions?.RENEWALENDORSEMENTNO}}</td>
              <td class="body">{{viewTransactions?.CLIENTNAME | uppercase}}</td>
              <td class="body">{{viewTransactions?.AGENTNAME | uppercase}}</td>
              <td class="body">{{viewTransactions?.STATUS | titlecase}}</td>
              <td class="body">{{viewTransactions?.BRANCHNAME | titlecase}}</td>
              <td class="body" style="text-align: right">{{viewTransactions?.PREMIUM | number:'1.2-2' }}</td>
              <td class="body">{{ (viewTransactions?.AUTHORIZATIONDATE !== null) ? (viewTransactions?.AUTHORIZATIONDATE | date: 'd-MMM-y') : null}}</td>

            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage">
            <tr>
              <td colspan="9">{{ 'entities.no_transactions_found' | translate }}</td>
            </tr>
          </ng-template>
        </p-table>
      </div>
      <div>
        <button class="btn btn-link align-baseline back-link text-primary" (click)="goBack()">
        <span>
          <i class="fa fa-angle-double-left" aria-hidden="true"></i>
        </span>
        {{ 'entities.go_back' | translate }}
        </button>
      </div>

    </div>
  </div>
</div>

<div class="mobile-bottom"></div>
