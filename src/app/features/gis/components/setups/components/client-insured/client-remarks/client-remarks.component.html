<div class="row mx-3 my-2">
    <div class="row">
        <div class="col-6">
          <!-- <p class="title1"><nb-icon icon="arrow-circle-left" id="iconStyle" class="mb-3" style="font-size:1.5rem;"></nb-icon>
            Clients Comments</p> -->
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                  <li class="breadcrumb-item"><a href="#">Client  & Insured setups</a></li>
                  <li class="breadcrumb-item active" aria-current="page">Client Remarks</li>
                </ol>
              </nav>
        </div>
        <div class="col-6 d-flex justify-content-end">
          <p class="text-right" style="color:#00529B;"><a>Help <i class="pi pi-question-circle"></i></a></p>
      
        </div>
      </div>
      <div class="card">
        <div class="card-body">
            <p class="title2">Form Fields</p>
            <hr>
            <ul class="nav">
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" data-bs-toggle="modal" data-bs-target=".bd-example-modal-lg">+Add</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" data-bs-toggle="modal" data-bs-target=".bd-example2-modal-lg" >Edit</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" >Delete</a>
                </li>
              </ul>
    
              <div class="modal fade bd-example-modal-lg"  tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered  modal-lg" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLongTitle">Form Fields</h5>
                    </div>
                    <div class="modal-body mx-3 my-2">
                      <div class="mb-2"><p id="addClientsTitle"> <i class="pi pi-arrow-left me-3"></i>Add Clients Comments</p></div>
                      <br>
                      <form [formGroup]="remarkForm">
                        <div class="row">
                          <div class="col-xl-7">
                            <div class="row">
                              <div class="col-xl-5">
                                <label class="form-label ms-4" for="input"><span>*</span> Comment Type:</label>
                              </div>
                              <div class="col-xl-6">
                                <select class="form-select form-control-sm mb-1 ms-n4" formControlName="commentType" (change)="onCommentTypeChange()">
                                  <option value=""></option>
                                  <option value="1">Client</option>
                                  <option value="2">Agent</option>
                                  <option value="3">Policy</option>
                                  <option value="4">Claim</option>
                                </select>
                              </div>
                            </div>
                            <br>
                            <div class="row">
                              <div class="col-xl-5">
                                <label class="form-label ms-4" for="input">Wef:</label>
                              </div>
                              <div class="col-xl-6">
                                <input type="date" class="form-control form-control-sm mb-1 ms-n4" formControlName="date_with_effect_from">
                              </div>
                            </div>
                            <br>
                            <div class="row">
                              <div class="col-xl-5">
                                <label class="form-label ms-4" for="input">Comment:</label>
                              </div>
                              <div class="col-xl-6">
                                <textarea class="form-control form-control-sm rounded-0 ms-n4" id="exampleFormControlTextarea2" rows="4" formControlName="comment"></textarea>
                              </div>
                            </div>
                            <br>
                          </div>
                      
                          <div class="col-xl-5 ms-n3">
                            <div class="row">
                              <div class="col-xl-4">
                                <label class="form-label" for="input"><span class="inputtext">{{ selectedLabel }}</span></label>
                              </div>
                              <div class="col-xl-8">
                                <select class="form-select form-control-sm mb-1 ms-n4" formControlName="selectedValue">
                                  <option value=""></option>
                                  <option *ngFor="let data of dropdownOptions" [ngValue]="data.id">{{ data.name }}</option>
                                </select>
                              </div>
                            </div>
                            <br>
                            <div class="row">
                              <div class="col-xl-4">
                                <label class="form-label" for="input"><span class="inputtext">Wet:</span></label>
                              </div>
                              <div class="col-xl-8">
                                <input type="date" class="form-control form-control-sm mb-1 ms-n4" formControlName="date_with_effect_to">
                              </div>
                            </div>
                            <br>
                          </div>
                        </div>
                      </form>
                      
                       
                    </div>
                    <div class="row mx-4 mb-4">
                     <div class="col-xl-6 ">
                      <button type="button" class="btn btn-outline-primary " data-bs-dismiss="modal">Cancel</button>
                     </div>
                     <div class="col-xl-6 d-flex justify-content-end">
                        <button type="button" class="btn btn-primary"data-bs-dismiss="modal" (click)="save()">Save</button>
                     </div>
                    </div>
                    <br>
                  </div>
                </div>
              </div>
              <div class="modal fade bd-example2-modal-lg"  tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered  modal-lg" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLongTitle">Form Fields</h5>
                    </div>
                    <div class="modal-body me-4">
                      <div class="mb-2"><p id="addClientsTitle"> <i class="pi pi-arrow-left me-3"></i>Edit Clients Comments</p></div>

                      <br>
                      <form [formGroup]="remarkForm">
                        <div class="row">
                          <div class="col-xl-7">
                            <div class="row">
                              <div class="col-xl-5">
                                <label class="form-label ms-4" for="input"><span>*</span> Comment Type:</label>
                              </div>
                              <div class="col-xl-6">
                                <select class="form-select form-control-sm mb-1 ms-n4" formControlName="commentType" (change)="onCommentTypeChange()">
                                  <option value=""></option>
                                  <option value="1">Client</option>
                                  <option value="2">Agent</option>
                                  <option value="3">Policy</option>
                                  <option value="4">Claim</option>
                                </select>
                              </div>
                            </div>
                            <br>
                            <div class="row">
                              <div class="col-xl-5">
                                <label class="form-label ms-4" for="input">Wef:</label>
                              </div>
                              <div class="col-xl-6">
                                <input type="date" class="form-control form-control-sm mb-1 ms-n4" formControlName="date_with_effect_from">
                              </div>
                            </div>
                            <br>
                            <div class="row">
                              <div class="col-xl-5">
                                <label class="form-label ms-4" for="input">Comment:</label>
                              </div>
                              <div class="col-xl-6">
                                <textarea class="form-control form-control-sm rounded-0 ms-n4" id="exampleFormControlTextarea2" rows="4" formControlName="comment"></textarea>
                              </div>
                            </div>
                            <br>
                          </div>
                      
                          <div class="col-xl-5 ms-n3">
                            <div class="row">
                              <div class="col-xl-4">
                                <label class="form-label" for="input"><span class="inputtext">{{ selectedLabel }}</span></label>
                              </div>
                              <div class="col-xl-8">
                                <select class="form-select form-control-sm mb-1 ms-n4" formControlName="selectedValue">
                                  <option value=""></option>
                                  <option *ngFor="let data of dropdownOptions" [ngValue]="data.id">{{ data.name }}</option>
                                </select>
                              </div>
                            </div>
                            <br>
                            <div class="row">
                              <div class="col-xl-4">
                                <label class="form-label" for="input"><span class="inputtext">Wet:</span></label>
                              </div>
                              <div class="col-xl-8">
                                <input type="date" class="form-control form-control-sm mb-1 ms-n4" formControlName="date_with_effect_to">
                              </div>
                            </div>
                            <br>
                          </div>
                        </div>
                      </form>
                       
                    </div>
                    <div class="row mx-4 mb-4">
                        <div class="col-xl-6 ">
                         <button type="button" class="btn btn-outline-primary " data-bs-dismiss="modal">Cancel</button>
                        </div>
                        <div class="col-xl-6 d-flex justify-content-end">
                            <button type="button" class="btn btn-primary ms-4" (click)="updateRemark()">Update</button>
                        </div>
                       </div>
                   
                    <br>
                  </div>
                </div>
              </div>
    
            <p-table
              #dt1        
              [value]="clientRemarksData"  
              selectionMode="single" 
              [resizableColumns]="true" 
              styleClass="p-datatable-sm"
              responsiveLayout="scroll" 
              class='ui-datatable'
              [autoLayout]="true"
              [paginator]="true"
              [rows]="10"
              [scrollable]="true" 
              scrollDirection="horizontal"                  
              [showCurrentPageReport]="true"
              currentPageReportTemplate=" {first} - {last} of {totalRecords}"
              [globalFilterFields]="['description']">   
              
                <ng-template pTemplate="header">
                    <tr>
                      <!--   -->
                      <th pSortableColumn="policy_code " style="width:20%;">Policy No <p-sortIcon field="policy_code"></p-sortIcon></th>
                      <th pSortableColumn="claim_code" style="width:20%">Claim No <p-sortIcon field="claim_code"></p-sortIcon></th>
                      <th pSortableColumn="status" style="width:20%">Status <p-sortIcon field="status"></p-sortIcon></th>
                      <th pSortableColumn="commented_by" style="width:20%">Comment By <p-sortIcon field="commented_by"></p-sortIcon></th>
                      <th pSortableColumn="agent_code" style="width:20%">Agent <p-sortIcon field="agent_code"></p-sortIcon></th>
                      <th pSortableColumn="proposer_code" style="width:20%">Client <p-sortIcon field="proposer_code"></p-sortIcon></th>
                      <th pSortableColumn="date_with_effect_from" style="width:20%">Wef <p-sortIcon field="date_with_effect_from"></p-sortIcon></th>
                      <th pSortableColumn="date_with_effect_to" style="width:20%">Wet <p-sortIcon field="date_with_effect_to"></p-sortIcon></th>
                      <th pSortableColumn="comment" style="max-width:20%">Comment <p-sortIcon field="comment"></p-sortIcon></th>
                      <th pSortableColumn="comment_date" style="width:20%">Comment Date <p-sortIcon field="comment_date"></p-sortIcon></th>
    
                    </tr>
                </ng-template>
              
                <ng-template let-clientRemarksData pTemplate="body">
                    <tr style="border-bottom:none;" [pSelectableRow]="selected" (click)="loadClientRemarks(clientRemarksData.code)" >
                      <td>{{clientRemarksData.policy_code}}</td>
                      <td>{{clientRemarksData.claim_code}}</td>
                      <td>{{clientRemarksData.status}}</td>
                      <td>{{clientRemarksData.commented_by}}</td>
                      <td>{{clientRemarksData.agent_code}}</td>
                      <td>{{clientRemarksData.proposer_code}}</td>
                      <td>{{clientRemarksData.date_with_effect_from}}</td>
                      <td>{{clientRemarksData.date_with_effect_to}}</td>
                      <td style="padding: 0.5rem;
                      max-width: 30px;
                      white-space: nowrap;
                      overflow: hidden;
                      text-overflow: ellipsis;
                      max-width: 80px;">{{clientRemarksData.comment}}</td>
                      <td>{{clientRemarksData.comment_date}}</td>
                    </tr>
                </ng-template>
                <ng-template  pTemplate="emptymessage">
                  <tr>
                    <td  colspan="1"></td>
              
                    <td colspan="10"  style="padding:200px;padding-left: 350px;" id="empty">No records Found</td>
                  </tr>
                  
              </ng-template>
              <!-- <ng-template pTemplate="paginatorleft">
                <p-button type="button" icon="pi pi-plus" styleClass="p-button-text"></p-button>
            </ng-template>
            <ng-template pTemplate="paginatorright">
                <p-button type="button" icon="pi pi-cloud" styleClass="p-button-text"></p-button>
            </ng-template> -->
            </p-table> 
        </div>
        
      </div>
</div>
