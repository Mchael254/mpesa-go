<div class="container">
  <div class="page-wrapper">
      <p-card  class="summary-card">
        <!-- Breadcrumb -->
        <p-breadcrumb [model]="[
          { label: 'Dashboard' },
          { label: 'Quotation' },
          { label: 'New quote' }
        ]"></p-breadcrumb>
    
    <div class="custom-stepper">
      <label class="step">
        <input type="radio" name="step" [checked]="activeIndex === 0" (click)="setStep(0)">
        <span class="circle">1</span>
        <span class="label">Quote Information</span>
      </label>
    
      <!-- Perfectly aligned connecting line -->
      <div class="step-line"></div>
    
      <label class="step">
        <input type="radio" name="step" [checked]="activeIndex === 1" (click)="setStep(1)">
        <span class="circle">2</span>
        <span class="label">Quotation Summary</span>
      </label>
    </div>
    
  
  
         <!-- Subcard: Quotation Details & Table -->
      <p-card  class="subcard" >
        <ng-template pTemplate="header">
          <h3 style="font-weight:600; font-size:1.5rem; color:#3f82f7; margin-bottom:1.8rem;">
            Quotation Summary
          </h3>
        </ng-template>
        <!-- Quotation Details -->
  <div class="details-grid">
    <div class="column">
      <p><strong>Quotation number:</strong> {{ quotation.number }}</p>
      <p><strong>IPAY reference:</strong> {{ quotation.reference }}</p>
    </div>
  
    <div class="column">
      <p><strong>Quotation status:</strong> {{ quotation.status }}</p>
      <p><strong>Ticket number:</strong> {{ quotation.ticket }}</p>
     
    </div>
  
    <div class="column notes-column">
      <p>
        <strong>Notes:</strong> {{ quotation.notes }}
        <i
          class="fas fa-pencil-alt edit-icon"
          (click)="overlayPanel.toggle($event)"
          style="cursor: pointer; color: blue;"
        ></i>
      </p>
    
      <!-- âœ… PrimeNG OverlayPanel -->
      <p-overlayPanel #overlayPanel [showCloseIcon]="true" [dismissable]="true" [style]="{ width: '300px' }">
        <div class="overlay-content">
          <h4>Edit Notes</h4>
          <textarea
            [(ngModel)]="quotation.notes"
            rows="4"
            class="notes-textarea"
          ></textarea>
          <div class="button-container">
            <button
              pButton
              label="Save"
              (click)="overlayPanel.hide()"
              class="p-button-sm p-button-primary save-button"
            ></button>
          </div>
        </div>
      </p-overlayPanel>
      <p><strong>Currency:</strong> {{ quotation.currency}}</p>
    </div>
    
    
  </div>
  
  
    
          <!-- Product Table -->
          <p-table [value]="quotation.products" class="mt-4">
            <ng-template pTemplate="header">
              <tr>
                <th>Product</th>
                <th>Risk</th>
                <th>Cover Type</th>
                <th>Effective Date</th>
                <th>Sum Insured</th>
                <th>Premium</th>
                
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-quote>
              <tr>
                <td>{{ quote.product }}</td>
                <td>{{ quote.risk }}</td>
                <td>{{ quote.coverType }}</td>
                <td>{{ quote.effectiveDate }}</td>
                <td>{{ quote.sumInsured }}</td>
                <td>{{ quote.premium }}</td>
                 
                
              </tr>
            </ng-template>
           
  
          </p-table>
                  <!-- Total Premium Row (outside table but aligned) -->
  <div class="total-row">
    <div class="label">Sub Total</div>
    <div class="value">{{ getTotalPremium() }}</div>
  </div>
  
        </p-card>
  
        <div class="button-group mt-4">
          <div class="left-buttons">
            <button pButton label="Back" class="p-button-text me-2"></button>
            <button pButton label="Re assign" class="p-button-secondary me-2"></button>
            <button pButton label="Reject" class="p-button-danger"></button>
          </div>
          <div class="right-buttons">
            <button pButton label="Share quotation" class="p-button-outlined me-2"></button>
            <button pButton label="Accept quote" class="p-button-success"></button>
          </div>
        </div>
        
    
  
    
    
      
      </p-card>
    </div>
  </div>