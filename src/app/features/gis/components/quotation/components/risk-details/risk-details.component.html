<!-- RISK DETAILS CARD -->
<div class="card  mb-3 border-0 ">
    <div class="card-body border-0 mx-4" style="padding-top: 0px;">

        <p-table [value]="riskDetails" [tableStyle]="{'min-width': '300px'}" selectionMode="single" dataKey="code"
            [paginator]="true" [rows]="5" [rowsPerPageOptions]="[5, 10, 20, 50]">
            <ng-template pTemplate="header">
                <tr>
                    <th class="flexible-header">{{'gis.quotation.risk_id' | translate}}</th>
                    <th class="flexible-header"> {{'gis.quotation.risk_description' | translate}}</th>
                    <th class="flexible-header"> {{'gis.quotation.subclass' | translate}}</th>
                    <th class="flexible-header">{{'gis.quotation.cover_type' | translate}}</th>
                    <th class="flexible-header">{{'gis.quotation.premium_band' | translate}}</th>
                    <th class="flexible-header"> {{'gis.quotation.cover_from' | translate}}</th>
                    <th class="flexible-header">{{'gis.quotation.cover_to' | translate}}</th>
                    <th class="flexible-header"></th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-ri="rowIndex" let-risk>
                <tr [class.p-highlight]="risk === selectedRisk" [pSelectableRow]="riskDetails" class="point"
                    (click)="handleRowClick(risk)">
                    <td class="flexible-header">{{risk.propertyId}}</td>
                    <td class="flexible-header">{{risk.itemDesc}}</td>
                    <td class="flexible-header">{{risk.subclass.description
                        |sentenceCase}}</td>
                    <td class="flexible-header">{{risk.coverTypeDescription |sentenceCase}}</td>
                    <td class="flexible-header">{{risk.binderCode}}</td>
                    <td class="flexible-header">{{risk.wef}}</td>
                    <td class="flexible-header">{{risk.wet}}</td>
                    <td class="flexible-header">
                        <!-- Edit Button -->
                        <button pButton pRipple type="button"
                            class="p-button-text p-button-sm p-button-info custom-button" tooltipPosition="top"
                            (click)="openEditRiskModal(risk)">
                            Edit
                        </button>

                        <!-- Delete Button -->
                        <button *ngIf="riskDetails.length > 1" pButton pRipple type="button"
                            class="p-button-text p-button-sm custom-button" tooltipPosition="top" data-bs-toggle="modal"
                            data-bs-target="#deleteRisk">
                            Delete
                        </button>
                    </td>

                </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage">
                <tr>
                    <td colspan="8" style="padding: 20px; text-align:center" id="empty">
                        No risk Click on + icon to add risk</td>
                </tr>
            </ng-template>
        </p-table>
        <!-- Add/edit Risk  Modal -->
        <div class="modal fade" id="addRisk" #addRiskModal tabindex="-1" role="dialog" aria-labelledby="addRiskLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document" style="max-width: 700px;">
                <div class="modal-content" style="max-height: 704px; overflow: hidden;min-height: 250px;">

                    <div class="modal-body" style="height: 100%; max-height: 500px; overflow-y: auto;">
                        <h5 *ngIf="!isEditMode" class="modal-title mt-2 mb-2 addRiskTitle ">Add risk
                            <button type="button" class="btn-close red-close float-end" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </h5>

                        <h5 *ngIf="isEditMode" class="modal-title mt-2 mb-2 addRiskTitle ">Edit risk
                            <button type="button" class="btn-close red-close float-end" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </h5>
                        <form [formGroup]="riskDetailsForm">
                            <div class="row ">
                                <ng-container *ngFor="let field of formData; let i = index">
                                    <div class="col-sm-6 col-6 mb-4">
                                        <div class="form-group form-group-sm">
                                            <label *ngIf="field.name" [attr.for]="i + field.name" id="quote-label"
                                                [ngClass]="{ 'required': field.isMandatory === 'Y' }">
                                                {{ field.label | translate }}
                                            </label>

                                            <!-- text input -->
                                            <input *ngIf="field.type === 'text'" type="text" class="form-control"
                                                [formControlName]="field.name"
                                                [attr.placeholder]="field.label | translate" />

                                            <!-- select -->

                                            <ng-container
                                                *ngIf="field.name !== 'insureds' && riskDetailsForm && riskDetailsForm.contains(field.name)">
                                                <p-dropdown *ngIf="field.type === 'select'"
                                                    [formControlName]="field.name" [options]="field.selectOptions"
                                                    optionLabel="label" optionValue="value" [filter]="true"
                                                    [showClear]="true" [attr.placeholder]="field.label | translate"
                                                    (onChange)="field.name === 'subclass' && onSubclassSelected($event)">
                                                </p-dropdown>
                                            </ng-container>
                                            <!-- INSURED -->
                                            <ng-container *ngIf="field.name === 'insureds' && clientsData?.length">
                                                <p-dropdown formControlName="insureds" [options]="clientsData"
                                                    optionLabel="clientFullName" optionValue="id"
                                                    placeholder="Select Insured" [filter]="true"
                                                    filterBy="clientFullName">
                                                </p-dropdown>
                                            </ng-container>

                                            <!-- date -->
                                            <p-calendar *ngIf="field.type === 'date'" [formControlName]="field.name"
                                                dateFormat="yy-mm-dd" [showIcon]="true"
                                                [attr.placeholder]="field.label | translate">
                                            </p-calendar>

                                            <!-- number -->
                                            <input *ngIf="field.type === 'number'" type="text" class="form-control"
                                                [formControlName]="field.name"
                                                [attr.placeholder]="field.label | translate" />

                                            <!-- currency -->
                                            <input *ngIf="field.type === 'currency'" type="text" class="form-control"
                                                currencyMask [options]="currencyObj" [formControlName]="field.name"
                                                [attr.placeholder]="field.label | translate" />

                                            <!-- validation -->
                                            <div *ngIf="
                                                riskDetailsForm.get(field.name)?.invalid &&
                                                riskDetailsForm.get(field.name)?.touched"
                                                class="text-danger small mt-1">
                                                {{ field.label | translate }} is required.
                                            </div>
                                        </div>
                                    </div>
                                </ng-container>


                                <!-- dynamic subclass fields -->
                                <ng-container *ngFor="let field of subclassFormData; let j = index">
                                    <div class="col-sm-6 col-6 mb-4">
                                        <div class="form-group form-group-sm">
                                            <label *ngIf="field.name" [attr.for]="j + field.name" id="quote-label"
                                                [ngClass]="{ required: field.isMandatory === 'Y' }">
                                                {{ field.label | translate }}
                                            </label>

                                            <!-- text input fields -->
                                            <ng-container
                                                *ngIf="field.name !== 'registrationNumber' && field.name !== 'riskDescription' && riskDetailsForm && riskDetailsForm.contains(field.name)">
                                                <input *ngIf="field.type === 'text'" type="text" class="form-control"
                                                    [formControlName]="field.name"
                                                    [attr.placeholder]="field.label | translate" />
                                            </ng-container>

                                            <ng-container *ngIf="field.name === 'registrationNumber'">
                                                <input type="text" id="quote-input"
                                                    class="form-control form-control-sm mb-1"
                                                    formControlName="registrationNumber"
                                                    (input)="riskIdPassed($event); transformToUpperCase($event)"
                                                    placeholder="KAA 123X">
                                            </ng-container>
                                            <ng-container *ngIf="field.name === 'riskDescription'">
                                                <input type="text" id="quote-input"
                                                    class="form-control form-control-sm mb-1"
                                                    formControlName="riskDescription" [value]="vehiclemakeModel"
                                                    readonly>
                                            </ng-container>

                                            <!-- select fields -->
                                            <ng-container
                                                *ngIf="field.name !== 'yearOfManufacture' && riskDetailsForm && riskDetailsForm.contains(field.name)">
                                                <p-dropdown *ngIf="field.type === 'select'"
                                                    [formControlName]="field.name" [options]="field.selectOptions"
                                                    optionLabel="label" optionValue="value" [filter]="true"
                                                    [showClear]="true" [attr.placeholder]="field.label | translate"
                                                    (onChange)="handleSelectChange(field.name, $event)">
                                                </p-dropdown>
                                            </ng-container>
                                            <!-- YEAR OF MANUFACTURE -->
                                            <ng-container *ngIf="field.name === 'yearOfManufacture'">
                                                <p-dropdown formControlName="yearOfManufacture" [options]="yearList"
                                                    placeholder="" [filter]="true">
                                                </p-dropdown>

                                            </ng-container>

                                            <!-- DATE -->
                                            <p-calendar *ngIf="field.type === 'date'" [formControlName]="field.name"
                                                dateFormat="yy-mm-dd" [showIcon]="true"
                                                [attr.placeholder]="field.label | translate">
                                            </p-calendar>

                                            <!-- number -->
                                            <input *ngIf="field.type === 'number'" type="text" class="form-control"
                                                [formControlName]="field.name"
                                                [attr.placeholder]="field.label | translate" />

                                            <!-- currency -->
                                            <input *ngIf="field.type === 'currency'" type="text" class="form-control"
                                                currencyMask [options]="currencyObj" [formControlName]="field.name"
                                                [attr.placeholder]="field.label | translate" />
                                            <div *ngIf="riskDetailsForm.get(field.name)?.touched && riskDetailsForm.get(field.name)?.errors as errors"
                                                class="text-danger small mt-1">

                                                <div *ngIf="errors['required']">
                                                    {{ field.label | translate }} is required.
                                                </div>

                                                <div *ngIf="errors['pattern']">
                                                    {{ field.label | translate }} format is invalid.
                                                </div>

                                            </div>

                                        </div>
                                    </div>
                                </ng-container>
                            </div>
                        </form>






                        <div class="mt-4 d-flex justify-content-end">
                            <button type="button" class="btn btn-outline-primary mx-2" id="saveDetails"
                                data-bs-dismiss="modal" (click)="clearRiskForm()">{{'gis.policy.cancel' |
                                translate}}</button>
                            <button *ngIf="!isEditMode" type="button" class="btn btn-primary " id="saveDetails"
                                (click)="createRiskDetail()">Save</button>
                            <button *ngIf="isEditMode" type="button" class="btn btn-primary " id="saveDetails"
                                (click)="UpdateRiskDetail()">Save changes</button>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        <!-- Delete Risk Modal -->
        <div class="modal fade" id="deleteRisk" tabindex="-1" role="dialog" aria-labelledby="deleteProduct"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content" id="deleteProduct">
                    <div class="modal-body ">
                        <p class="deleteMessage mt-4 mb-4">{{'gis.policy.are_you_sure_you_want_to_delete' |
                            translate}}</p>
                        <div class="d-flex justify-content-center mb-3">
                            <button type="button" class="btn btn-primary px-5" id="delete" data-bs-dismiss="modal"
                                (click)="deleteRisk()">{{'gis.policy.yes_delete'
                                | translate}}</button>
                        </div>
                        <div class="d-flex justify-content-center mb-2">
                            <button type="button" class="btn btn-outline-primary px-5"
                                data-bs-dismiss="modal">{{'gis.policy.no_im_not' | translate}}</button>
                        </div>


                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- SCHEDULE DETAILS CARD -->
<div class="card  mb-3">
    <div class="card-body my-4 mx-4">

        <!-- Tabs Header -->
        <div class="d-flex justify-content-between align-items-center flex-wrap">
            <div class="nav-tabs-wrapper overflow-auto flex-grow-1 me-3">
                <ul class="nav nav-tabs flex-nowrap mb-0" style="min-width: max-content;">
                    <li class="nav-item" *ngFor="let tab of scheduleTabs">
                        <a class="nav-link" [ngClass]="{ 'active-tab': activeTab === tab }" (click)="activeTab = tab">
                            {{ tab |sentenceCase }}
                        </a>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Tab Content -->
        <div [ngSwitch]="activeTab">
            <!-- Tab 1 Content -->
            <div>
                <p-table [value]="scheduleList" selectionMode="single" [(selection)]="selectedSchedule" dataKey="code">
                    <ng-template pTemplate="header">
                        <tr>
                            <th class="flexible-header">{{'gis.quotation.reg_no' | translate}}</th>
                            <th class="flexible-header">{{'gis.quotation.vehicle_make' | translate}}</th>
                            <th class="flexible-header">{{'gis.quotation.cubic_capacity' | translate}}</th>
                            <th class="flexible-header">{{'gis.quotation.year_of_manufacture' | translate}}</th>
                            <th class="flexible-header">{{'gis.quotation.seating_capacity' | translate}}</th>
                            <th class="flexible-header">{{'gis.quotation.value' | translate}}</th>
                            <th class="flexible-header">{{'gis.quotation.body_type' | translate}}</th>
                            <th class="flexible-header">{{'gis.quotation.cover_type' | translate}}</th>
                        </tr>
                    </ng-template>

                    <ng-template pTemplate="body" let-schedule>
                        <tr (click)="onSelectSchedule(schedule)" [pEditableRow]="schedule"
                            [class.p-highlight]="schedule === selectedSchedule">
                            <td class="flexible-header">{{ schedule.details.level1.registrationNumber}}</td>
                            <td class="flexible-header">{{ schedule.details.level1.Make |sentenceCase }}</td>
                            <td class="flexible-header">{{ schedule.details.level1.cubicCapacity }}</td>
                            <td class="flexible-header">{{ schedule.details.level1.yearOfManufacture }}</td>
                            <td class="flexible-header">{{ schedule.details.level1.carryCapacity }}</td>
                            <td class="flexible-header">{{ schedule.details.level1.value |number }}</td>
                            <td class="flexible-header">{{ schedule.details.level1.bodyType |sentenceCase }}</td>
                            <td class="flexible-header">{{ schedule.details.level1.coverType |sentenceCase }}</td>
                        </tr>
                    </ng-template>

                    <ng-template pTemplate="emptymessage">
                        <tr>
                            <td colspan="8" style="padding: 20px; text-align: center">
                                No schedule Click on + icon to add risk
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>

            <!-- Tab 2 Content -->
            <div *ngSwitchCase="'Level 2'">

            </div>

            <!-- Tab 3 Content -->
            <div *ngSwitchCase="'Level 3'">

            </div>
        </div>



    </div>
</div>
<!-- SECTION DETAILS CARD -->
<div class="card mb-3">
    <div class="card-body mx-4">
        <div class="row">
            <div class="col-4 ">
                <p class="section-title "> {{'gis.quotation.section_details' | translate}}</p>
            </div>
            <div class="col-8 d-flex justify-content-end">
                <div class="row">

                    <div class="col-4 ">
                        <button type="button" id="icon" class="btn btn-primary" data-bs-toggle="collapse"
                            data-bs-target="#sectionDetails" aria-expanded="false"
                            [attr.aria-expanded]="isSectionDetailsOpen" (click)="toggleSectionDetails()">
                            <i class="fa-solid"
                                [ngClass]="isSectionDetailsOpen ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
                        </button>
                    </div>
                </div>

            </div>
            <!-- ADD SECTION BUTTON ROW -->
            <div class="row mt-3" *ngIf="isSectionDetailsOpen">
                <div class="col-12 d-flex justify-content-end">
                    <button id="openModalButtonAdd" class="btn btn-primary btn-sm" data-bs-toggle="modal"
                        (click)="openAddSectionModal()"> Add Section
                    </button>

                    <i class="pi border border-black p-1 rounded-1 text-black" [ngClass]="{
                   'pi-caret-up': showSections,
                   'pi-caret-down': !showSections
                 }" style="font-size: 15px; cursor: pointer; margin-left: 8px; padding: 4px 6px;"></i>
                    <!-- <i #iconTrigger class="pi border border-black p-1 rounded-1 text-black"
                        [ngClass]="{ 'pi-caret-up': showSections, 'pi-caret-down': !showSections }"
                        style="font-size: 15px; cursor: pointer; margin-left: 8px; padding: 4px 6px;"
                        (click)="toggleSections(iconTrigger)">
                    </i> -->

                </div>
            </div>
        </div>


        <div [@slideInOut]="isSectionDetailsOpen ? 'open' : 'closed'" class="mt-2">

            <!-- Add Risk Section Modal -->

            <div class="modal fade" #addRiskSection Modal id="addSection" tabindex="-1" role="dialog"
                aria-labelledby="addSectionLabel">
                <div class="modal-dialog modal-dialog-centered" style="min-width: 708px;" role="document">
                    <div class="modal-content" id="addSectionModal">
                        <div class="modal-body">
                            <h5 class="modal-title mt-2" id="editOtherDetailsLabel">Add risk section
                                <button type="button" class="btn-close red-close float-end" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </h5>

                            <p-table #sectionTable [value]="sectionPremium" id="clientTable" dataKey="code"
                                [tableStyle]="{ 'max-width': '50rem', 'border-spacing': '10 10px' }"
                                [(selection)]="selectedSections" [resizableColumns]="true" responsiveLayout="scroll"
                                class='ui-datatable' [autoLayout]="true" [paginator]="true" [rows]="5"
                                [rowsPerPageOptions]="[5, 10, 20]" [scrollable]="true" scrollDirection="horizontal"
                                [showCurrentPageReport]="true"
                                currentPageReportTemplate="{first} - {last} of {totalRecords}"
                                [globalFilterFields]="['sectionDescription']">
                                <ng-template pTemplate="header">
                                    <tr>

                                        <th style="width: 2%;">
                                            <input type="checkbox" [(ngModel)]="selectAll"
                                                (change)="toggleSelectAll($event)" />
                                        </th>

                                        <th class="flexible-header" pSortableColumn="sectionDescription"> {{
                                            'gis.quotation.benefit' |
                                            translate }}<p-sortIcon field="benefit" /></th>
                                        <th class="flexible-header" pSortableColumn="free_limit"> {{
                                            'gis.quotation.free_limit' | translate }}<p-sortIcon field="free_limit" />
                                        </th>
                                        <th class="flexible-header" pSortableColumn="limit of amount"> {{
                                            'gis.quotation.limit_amount' | translate }}<p-sortIcon
                                                field="limit of amount" /></th>
                                        <th class="flexible-header" pSortableColumn="rate"> {{ 'gis.quotation.rate' |
                                            translate }} <p-sortIcon field="rate" /></th>

                                    </tr>
                                    <tr>
                                        <td colspan="5" style="padding-left: 50px;">
                                            <input #globalFilterInput class="form-control form-control-sm my-2"
                                                id="search-input-Rsection" pInputText type="text"
                                                (input)="sectionTable.filterGlobal(globalFilterInput.value, 'contains')"
                                                placeholder=""
                                                style="width: 100px; margin-top: 6px; margin-bottom: 6px;" />
                                        </td>
                                    </tr>

                                </ng-template>
                                <ng-template pTemplate="emptymessage">
                                    <tr>
                                        <td colspan="5" class="text-center text-muted py-3">
                                            No sections found matching your search.
                                        </td>
                                    </tr>
                                </ng-template>

                                <ng-template pTemplate="body" let-section let-editing="editing" let-i="rowIndex">
                                    <tr style="height: 40px; padding: 10px; margin-bottom: 10px;">
                                        <td>
                                            <input type="checkbox" id="check_section_{{ section.sectionCode }}"
                                                [(ngModel)]="section.isChecked">
                                        </td>
                                        <td class="flexible-header">{{ section.sectionDescription |sentenceCase }}</td>
                                        <td class="flexible-header">
                                            <ng-container
                                                *ngIf="section.isFreeLimitEditable === 'Y'; else readOnlyFreeLimit">
                                                <input type="text" class="form-control form-control-sm"
                                                    [(ngModel)]="section.freeLimit" [options]="currencyObj"
                                                    currencyMask />
                                            </ng-container>
                                            <ng-template #readOnlyFreeLimit>
                                                {{ section.freeLimit | number }}
                                            </ng-template>
                                        </td>
                                        <td class="flexible-header" [pEditableColumn]="section.limitAmount"
                                            pEditableColumnField="limitAmount">
                                            <input class=" form-control form-control-sm  error-border"
                                                id="section_{{ section.sectionCode }}" [(ngModel)]="section.limitAmount"
                                                [options]="currencyObj" currencyMask type="text"
                                                (keydown)="onKeyUp($event, section)"
                                                [ngClass]="{'error-border': section.isChecked && !section.limitAmount}">
                                        </td>
                                        <td class="flexible-header" [pEditableColumn]="section.rate"
                                            pEditableColumnField="rate">
                                            <input class="form-control form-control-sm  error-border"
                                                id="section_{{ section.sectionCode }}" [(ngModel)]="section.rate"
                                                type="number" (keydown)="onKeyUp($event, section)"
                                                [ngClass]="{'error-border': section.isChecked && !section.rate}">
                                        </td>
                                    </tr>
                                </ng-template>
                            </p-table>
                            <div class="mt-4 d-flex justify-content-end ">
                                <button type="button" class="btn btn-outline-primary me-2"
                                    data-bs-dismiss="modal">Cancel</button>
                                <button type="button" class="btn btn-primary " id="saveDetails" data-bs-dismiss="modal"
                                    (click)="createRiskSection()">{{'gis.quotation.save_details' |
                                    translate}}</button>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- Edit Risk Section Modal -->
            <div class="modal fade  " id="editSectionModal" #editSectionModal tabindex="-1" role="dialog"
                aria-labelledby="editSectionLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                    <div class="modal-content" style=" min-width:700px;">
                        <div class="modal-body" style="padding-left: 40px; max-height:550px; overflow-y: auto;">
                            <h5 class="modal-title mt-2" id="editScheduleLabel">
                                Edit section details
                                <button type="button" class="btn-close red-close float-end"
                                    (click)="closeEditSectionModal()" aria-label="Close"></button>
                            </h5>
                            <form [formGroup]="sectionDetailsForm">
                                <!-- **ROW 1** -->
                                <div class="row mb-1" id="scheduleRows">
                                    <div class="col-xl-6">
                                        <div class="mb-1 ">
                                            <label for="minmax-buttons" class="col-5 col-form-label"
                                                id="scheduleLabel">{{'gis.quotation.id'
                                                | translate}} :</label>
                                            <div class="col-7">
                                                <input type="text" id="scheduleInput"
                                                    class="form-control form-control-sm mb-1"
                                                    formControlName="sectionShortDescription" style="width:300px"
                                                    readonly>

                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xl-6">
                                        <div class="mb-1 ">
                                            <label for="minmax-buttons" class="col-5 col-form-label"
                                                id="scheduleLabel">{{'gis.quotation.description' | translate}}:</label>
                                            <div class="col-7">
                                                <input type="text" id="scheduleInput"
                                                    class="form-control form-control-sm mb-1" style="width:300px"
                                                    formControlName="sectionShortDescription">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- **ROW 2** -->
                                <div class="row mb-0" id="scheduleRows">
                                    <div class="col-xl-6">
                                        <div class="mb-1 ">
                                            <label for="minmax-buttons" class="col-5 col-form-label" id="scheduleLabel">
                                                {{'gis.quotation.rate_type' | translate}} :</label>
                                            <div class="col-7">
                                                <input type="text" id="scheduleInput"
                                                    class="form-control form-control-sm mb-1" style="width:300px"
                                                    formControlName="rateType">
                                                <!-- <select class="form-select form-control-sm mb-1" id="scheduleInput"
                                                    formControlName="rateType">
                                                    <option value="FXD">{{'gis.quotation.fixed' | translate}}</option>
                                                    <option value="RCU">{{'gis.quotation.recursive' | translate}}
                                                    </option>
                                                    <option value="RT">{{'gis.quotation.rate_table' | translate}}
                                                    </option>
                                                    <option value="ARG"> {{'gis.quotation.absolute_range' | translate}}
                                                    </option>
                                                    <option value="SRG">{{'gis.quotation.step_ranges' | translate}}
                                                    </option>
                                                </select> -->

                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xl-6">
                                        <div class="mb-1">
                                            <label for="minmax-buttons" class="col-5 col-form-label" id="scheduleLabel">
                                                {{ 'gis.quotation.premium_type' | translate }}:
                                            </label>

                                            <div class="col-7">
                                                <div class="col-7">
                                                    <input type="text" id="scheduleInput" style="width:300px"
                                                        class="form-control form-control-sm mb-1"
                                                        formControlName="sectionType">
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                </div>
                                <!-- **ROW 3** -->
                                <div class="row mb-0" id="scheduleRows">
                                    <div class="col-xl-6">
                                        <div class="mb-1">
                                            <label class="col-5 col-form-label" id="scheduleLabel">
                                                {{ 'gis.quotation.free_limit' | translate }} :
                                            </label>
                                            <div class="col-7">
                                                <ng-container *ngIf="isEditable; else readOnlyInput">
                                                    <!-- Editable number input -->
                                                    <input type="text" class="form-control form-control-sm mb-1"
                                                        formControlName="freeLimit" style="width:300px"
                                                        [value]="freeLimitValue|translate" currencyMask
                                                        [options]="currencyObj" />
                                                </ng-container>

                                                <!-- Read-only number input -->
                                                <ng-template #readOnlyInput>
                                                    <input type="text" class="form-control form-control-sm mb-1"
                                                        [value]="freeLimitValue|translate" currencyMask
                                                        [options]="currencyObj" style="width:300px" readonly />
                                                </ng-template>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-xl-6">
                                        <div class="mb-1 ">
                                            <label for="minmax-buttons" class="col-5 col-form-label"
                                                id="scheduleLabel">{{'gis.quotation.limit_amount' | translate}}:</label>

                                            <div class="col-7">
                                                <input type="text" id="scheduleInput" style="width:300px"
                                                    class="form-control form-control-sm mb-1" currencyMask
                                                    [options]="currencyObj" formControlName="limitAmount">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- **ROW 4** -->
                                <div class="row mb-0" id="scheduleRows">
                                    <div class="col-xl-6">
                                        <div class="mb-1 ">
                                            <label for="minmax-buttons" class="col-5 col-form-label"
                                                id="scheduleLabel">{{'gis.quotation.group' | translate}}:</label>
                                            <div class="col-7">
                                                <input type="number" id="scheduleInput" style="width:300px"
                                                    class="form-control form-control-sm mb-1"
                                                    formControlName="calcGroup">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xl-6">
                                        <div class="mb-1 ">
                                            <label for="minmax-buttons" class="col-5 col-form-label"
                                                id="scheduleLabel">{{'gis.quotation.premium_rate' | translate}}:</label>

                                            <div class="col-7">
                                                <input type="number" id="scheduleInput" style="width:300px"
                                                    class="form-control form-control-sm mb-1"
                                                    formControlName="premiumRate">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- **ROW 5** -->
                                <div class="row mb-0" id="scheduleRows">
                                    <div class="col-xl-6">
                                        <div class="mb-1 ">
                                            <label for="minmax-buttons" class="col-5 col-form-label"
                                                id="scheduleLabel">{{'gis.quotation.div_by' | translate}}:</label>
                                            <div class="col-7">
                                                <input type="number" id="scheduleInput" style="width:300px"
                                                    class="form-control form-control-sm mb-1"
                                                    formControlName="multiplierDivisionFactor">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xl-6">
                                        <div class="mb-1 ">
                                            <label for="minmax-buttons" class="col-5 col-form-label"
                                                id="scheduleLabel">{{'gis.quotation.multi_rate' | translate}} :</label>
                                            <div class="col-7">
                                                <input type="number" id="scheduleInput" style="width:300px"
                                                    class="form-control form-control-sm mb-1"
                                                    formControlName="multiplierRate">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- **ROW 6** -->
                                <div class="row mb-0" id="scheduleRows">
                                    <div class="col-xl-6">
                                        <div class="mb-1 ">
                                            <label for="minmax-buttons" class="col-5 col-form-label"
                                                id="scheduleLabel">{{'gis.quotation.div_multi_by' | translate}}:</label>
                                            <div class="col-7">
                                                <input type="number" id="scheduleInput" style="width:300px"
                                                    class="form-control form-control-sm mb-1"
                                                    formControlName="multiplierDivisionFactor">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xl-6">
                                        <div class="mb-1 ">
                                            <label for="minmax-buttons" class="col-5 col-form-label"
                                                id="scheduleLabel">{{'gis.quotation.premium' | translate}}:</label>
                                            <div class="col-7">
                                                <input type="text" id="scheduleInput" style="width:300px"
                                                    class="form-control form-control-sm mb-1" currencyMask
                                                    [options]="currencyObj" formControlName="premiumAmount">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- **ROW 7** -->
                                <div class="row mb-0" id="scheduleRows">
                                    <div class="col-xl-6">
                                        <div class="mb-1 ">
                                            <label for="minmax-buttons" class="col-5 col-form-label" style="width:300px"
                                                id="scheduleLabel">{{'gis.quotation.minimum_premium' |
                                                translate}}:</label>
                                            <div class="col-7">
                                                <input type="text" id="scheduleInput" style="width:300px"
                                                    class="form-control form-control-sm mb-1" currencyMask
                                                    [options]="currencyObj" formControlName="minimumPremium">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xl-6">
                                        <div class="mb-1 ">
                                            <label for="minmax-buttons" class="col-5 col-form-label"
                                                id="scheduleLabel">{{'gis.quotation.accumulation' | translate}}:</label>
                                            <div class="col-7">
                                                <input type="text" id="scheduleInput" style="width:300px"
                                                    class="form-control form-control-sm mb-1" formControlName="">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- **ROW 8** -->
                                <div class="row mb-0" id="scheduleRows">
                                    <div class="col-xl-6">
                                        <div class="mb-1 ">
                                            <label for="minmax-buttons" class="col-5 col-form-label"
                                                id="scheduleLabel">{{'gis.quotation.remarks' | translate}}:</label>
                                            <div class="col-7">

                                                <textarea type="text" id="scheduleInput"
                                                    class="form-control form-control-sm mb-1" style="width:300px"
                                                    formControlName="description"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xl-6">
                                        <div class="mb-1 ">
                                            <label for="minmax-buttons" class="col-5 col-form-label"
                                                id="scheduleLabel">{{'gis.quotation.declaration' | translate}}:</label>
                                            <div class="col-7">
                                                <div class="d-flex gap-4">
                                                    <!-- YES option -->
                                                    <div class="d-flex align-items-center" style="cursor: pointer;"
                                                        (click)="setDeclaration1(true)">
                                                        <div class="rounded-circle me-2" [ngStyle]="{
                                                            width: '18px',
                                                            height: '18px',
                                                            backgroundColor: declaration1 === true ? '#198754' : 'transparent',
                                                            border: '2px solid',
                                                            borderColor: declaration1 === true ? '#198754' : '#6c757d'
                                                          }" style="user-select: none; outline: none;" tabindex="-1">
                                                        </div>
                                                        {{ 'gis.policy.yes' | translate }}
                                                    </div>

                                                    <!-- NO option -->
                                                    <div class="d-flex align-items-center" style="cursor: pointer;"
                                                        (click)="setDeclaration1(false)">
                                                        <div class="rounded-circle me-2" [ngStyle]="{
                                                            width: '18px',
                                                            height: '18px',
                                                            backgroundColor: declaration1 === false ? '#dc3545' : 'transparent',
                                                            border: '2px solid',
                                                            borderColor: declaration1 === false ? '#dc3545' : '#6c757d'
                                                          }" style="user-select: none; outline: none;" tabindex="-1">
                                                        </div>
                                                        {{ 'gis.policy.no' | translate }}
                                                    </div>
                                                </div>
                                            </div>


                                        </div>
                                    </div>
                                </div>
                                <!-- **ROW 9** -->
                                <div class="row mb-0" id="scheduleRows">
                                    <div class="col-xl-6">
                                        <div class="mb-1 ">
                                            <label for="minmax-buttons" class="col-5 col-form-label"
                                                id="scheduleLabel">{{'gis.quotation.compute' | translate}}:</label>
                                            <div class="col-7">
                                                <div class="d-flex gap-4">
                                                    <!-- YES option -->
                                                    <div class="d-flex align-items-center" style="cursor: pointer;"
                                                        (click)="setDeclaration2(true)">
                                                        <div class="rounded-circle me-2" [ngStyle]="{
                                                            width: '18px',
                                                            height: '18px',
                                                            backgroundColor: declaration2 === true ? '#198754' : 'transparent',
                                                            border: '2px solid',
                                                            borderColor: declaration2 === true ? '#198754' : '#6c757d'
                                                          }" style="user-select: none; outline: none;" tabindex="-1">
                                                        </div>
                                                        {{ 'gis.policy.yes' | translate }}
                                                    </div>

                                                    <!-- NO option -->
                                                    <div class="d-flex align-items-center" style="cursor: pointer;"
                                                        (click)="setDeclaration2(false)">
                                                        <div class="rounded-circle me-2" [ngStyle]="{
                                                            width: '18px',
                                                            height: '18px',
                                                            backgroundColor: declaration2 === false ? '#dc3545' : 'transparent',
                                                            border: '2px solid',
                                                            borderColor: declaration2 === false ? '#dc3545' : '#6c757d'
                                                          }" style="user-select: none; outline: none;" tabindex="-1">
                                                        </div>
                                                        {{ 'gis.policy.no' | translate }}
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="col-xl-6">

                                    </div>
                                </div>


                            </form>
                            <div class="row mt-3 mb-2">
                                <div class="col-6 ">
                                </div>
                                <div class="col-6 d-flex justify-content-end">
                                    <button type="button" class="btn btn-primary" (click)="closeEditSectionModal()"
                                        style="background-color:#ffffff; color: #00529b;">Cancel</button>
                                    <!-- <button type="button" class="btn btn-primary"  data-bs-dismiss="modal" (click)="updateRiskSection()" >Save Details</button> -->
                                    <button type="button" class="btn btn-primary" (click)="editSection()">
                                        {{'gis.quotation.save_details' | translate}}</button>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Delete Section Modal -->
            <div class="modal fade" id="deleteSection" tabindex="-1" aria-labelledby="deleteSectionLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered ">
                    <div class="modal-content">
                        <div class="modal-header" style="border-bottom: none;">
                            <h5 class="delete-title" id="exampleModalLabel">Delete section</h5>
                            <button type="button" class="btn-close red-close" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <p class="d-flex justify-content-center" id="deleteLabel">
                                {{'gis.quotation.are_you_sure_you_want_to_delete_section' | translate}}?</p>
                            <div class=" d-flex justify-content-center">
                                <button type="button" class="btn btn-primary " id="delete" (click)="confirmDelete()"
                                    data-bs-dismiss="modal">{{'gis.quotation.yes_delete' | translate}}</button>
                            </div><br>
                            <div class="d-flex justify-content-center">
                                <button type="button" class="btn btn-outline-primary" id="delete"
                                    data-bs-dismiss="modal">
                                    {{'gis.quotation.no_im_not' | translate}}</button>
                            </div><br>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Column Selector Modal -->
            <!-- Floating Column Selector -->
            <div *ngIf="showColumnModal" class="card shadow rounded p-2 position-absolute bg-white border"
                [ngStyle]="{ top: columnModalPosition.top, left: columnModalPosition.left, zIndex: 1000 }">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <strong class="text-primary">Select Columns</strong>
                    <button class="btn-close btn-sm" (click)="showColumnModal = false"></button>
                </div>
                <div style="max-height: 250px; overflow-y: auto;">
                    <div *ngFor="let col of columns">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" style="color: #00529B;"
                                [(ngModel)]="col.visible" [id]="col.field">
                            <label class="form-check-label" [for]="col.field">
                                {{ col.header }}
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- <p-table [value]="sectionDetails" [tableStyle]="{ 'min-width': '300px' }" selectionMode="single"
                [(selection)]="selectedSection" dataKey="code" editMode="row" [paginator]="true" [rows]="2"
                [rowsPerPageOptions]="[2, 4, 6]">

               
                <ng-template pTemplate="header">
                    <tr>
                        <th *ngFor="let col of columns" [hidden]="!col.visible" class="flexible-header"
                            [pSortableColumn]="col.field">
                            {{ col.header }}
                            <p-sortIcon [field]="col.field"></p-sortIcon>
                        </th>
                    </tr>
                </ng-template>

               
                <ng-template pTemplate="body" let-section let-rowIndex="rowIndex">
                    <tr (click)="onSelectSection(section)" [pEditableRow]="section">
                        <td *ngFor="let col of columns" [hidden]="!col.visible" class="flexible-header">
                            <ng-container [ngSwitch]="col.field">
                                <ng-container *ngSwitchCase="'actions'">
                                    
                                    <button pButton type="button" class="p-button-text p-button-sm"
                                        (click)="onOpenEditSectionModal(section)">
                                        Edit
                                    </button>
                                   
                                    <button pButton type="button" class="p-button-text p-button-sm text-danger"
                                        (click)="setSectionToDelete(section)" data-bs-toggle="modal"
                                        data-bs-target="#deleteSection">
                                        Delete
                                    </button>
                                </ng-container>
                                <ng-container *ngSwitchDefault>
                                    {{ section[col.field] }}
                                </ng-container>
                            </ng-container>
                        </td>
                    </tr>
                </ng-template>


                <ng-template pTemplate="emptymessage">
                    <tr>
                        <td [attr.colspan]="columns.length" style="padding: 20px; text-align:center">
                            No section. Click on + icon to add section.
                        </td>
                    </tr>
                </ng-template>

            </p-table> -->

            <p-table [value]="sectionDetails" [tableStyle]="{'min-width': '300px'}" selectionMode="single"
                [(selection)]="selectedSection" dataKey="code" editMode="row" [paginator]="true" [rows]="2"
                [rowsPerPageOptions]="[2, 4, 6]">
                <ng-template pTemplate="header">
                    <tr>


                        <th class="flexible-header" pSortableColumn="rowNum">
                            {{ 'gis.quotation.row_num' | translate }}
                            <p-sortIcon field="rowNum" />
                        </th>
                        <th class="flexible-header" pSortableColumn="group">
                            {{ 'gis.quotation.group' | translate }}
                            <p-sortIcon field="group" />
                        </th>

                        <th class="flexible-header" pSortableColumn="shortDescription">
                            {{ 'gis.quotation.code' | translate }}
                            <p-sortIcon field="code" />
                        </th>

                        <th class="flexible-header" pSortableColumn="description">
                            {{ 'gis.quotation.benefit' | translate }}
                            <p-sortIcon field="benefit" />
                        </th>

                        <th class="flexible-header" pSortableColumn="limitAmount">
                            {{ 'gis.quotation.limit_amount' | translate }}
                            <p-sortIcon field="limitAmount" />
                        </th>

                        <th class="flexible-header" pSortableColumn="premiumRate">
                            {{ 'gis.quotation.premium_rate' | translate }}
                            <p-sortIcon field="premiumRate" />
                        </th>

                        <th class="flexible-header" pSortableColumn="rateType">
                            {{ 'gis.quotation.rate_type' | translate }}
                            <p-sortIcon field="rateType" />
                        </th>
                        <th class="flexible-header" pSortableColumn="actions">
                            {{ 'gis.quotation.actions' | translate }}
                            <p-sortIcon field="actions" />
                        </th>


                    </tr>
                </ng-template>

                <ng-template pTemplate="body" let-sectionArray let-editing="editing" let-ri="rowIndex">
                    <tr (click)="onSelectSection(sectionArray)" [pEditableRow]="sectionArray">
                        <td class="flexible-header">{{sectionArray.rowNumber}}</td>
                        <td class="flexible-header">{{sectionArray.calcGroup}}</td>
                        <td class="flexible-header">{{sectionArray.sectionCode}}</td>
                        <td class="flexible-header">{{sectionArray.sectionShortDescription |sentenceCase}}</td>
                        <td class="flexible-header">{{sectionArray.limitAmount}}</td>
                        <td class="flexible-header">{{sectionArray.premiumRate}}</td>
                        <td class="flexible-header">{{sectionArray.rateType}}</td>

                        <td class="flexible-header">

                            <button pButton pRipple type="button" pInitEditableRow
                                class="p-button-rounded p-button-text custom-button " pTooltip="" tooltipPosition="top"
                                (click)="onOpenEditSectionModal(sectionArray)">
                                Edit
                            </button>


                            <button pButton pRipple type="button" class="p-button-rounded p-button-text custom-button  "
                                data-bs-toggle="modal" data-bs-target="#deleteSection"
                                (click)="setSectionToDelete(sectionArray)">
                                Delete
                            </button>
                        </td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                    <tr>
                        <td colspan="8" style="padding: 20px; text-align:center" id="empty">
                            No section Click on + icon to add section</td>
                    </tr>
                </ng-template>

            </p-table>

        </div>
    </div>
</div>
<!-- RISK CLAUSES DETAILS CARD -->
<div class="card mb-1">
    <div class="card-body mx-4">

        <div class="row mb-2">
            <div class="col-4 clause-title">
                <p class="section-title">{{'gis.quotation.risk_clauses' | translate}}</p>
            </div>

            <div class="col-8 d-flex justify-content-end">
                <button type="button" id="icon" class="btn btn-primary" data-bs-toggle="collapse"
                    data-bs-target="#riskClauses" aria-expanded="false" aria-controls="riskClauses"
                    (click)="toggleClausesopen()">
                    <i class="fa-solid fa-chevron-down"></i>
                </button>
            </div>
        </div>

        <!-- ADD Risk clause BUTTON ROW -->
        <div class="row mb-2" *ngIf="isClausesOpen">
            <div class="col-12 d-flex justify-content-end">
                <button id="openModalButtonAdd" class="btn btn-primary btn-sm" (click)="openClauseModal()"> Add risk
                    Clause
                </button>

                <i class="pi border border-black p-1 rounded-1 text-black" [ngClass]="{
              'pi-caret-up': showSections,
              'pi-caret-down': !showSections
               }" style="font-size: 15px; cursor: pointer; margin-left: 8px; padding: 4px 6px;"></i>
            </div>
        </div>

        <!-- risk clause table -->
        <div [@slideInOut]="isClausesOpen ? 'open' : 'closed'" class="mt-2 w-100">

            <p-table #riskClauseTable [value]="sessionClauses" dataKey="clauseCode" editMode="row"
                [(selection)]="selectedClause" selectionMode="single" [autoLayout]="true" [paginator]="true" [rows]="5"
                [rowsPerPageOptions]="[5, 10, 20]" [scrollable]="true" responsiveLayout="scroll"
                [tableStyle]="{ 'min-width': '100%', width: '100%' }">
                <ng-template pTemplate="header">
                    <tr>
                        <th class="flexible-header1" style="width: 13%" pSortableColumn="id">
                            ID <p-sortIcon field="id" />
                        </th>
                        <th class="flexible-header1" style="width: 20%" pSortableColumn="heading">
                            Heading <p-sortIcon field="heading" />
                        </th>
                        <th class="flexible-header1" style="width: 35%" pSortableColumn="wording">
                            Wording <p-sortIcon field="wording" />
                        </th>
                        <th class="flexible-header1" style="width: 15%">Actions</th>
                    </tr>


                </ng-template>

                <ng-template pTemplate="body" let-clause let-columns="columns" let-rowIndex="rowIndex">
                    <ng-container *ngIf="rowIndex === 0">
                        <tr>
                            <td>
                                <input pInputText type="text" placeholder="" class="form-control form-control-sm"
                                    (input)="filterShortDesc($event)" />
                            </td>
                            <td>
                                <input pInputText type="text" placeholder="" class="form-control form-control-sm"
                                    (input)="filterHeading($event)" />
                            </td>
                            <td>
                                <input pInputText type="text" placeholder="" class="form-control form-control-sm"
                                    (input)="filterWording($event)" />
                            </td>
                            <td></td>
                        </tr>
                    </ng-container>
                    <tr [pSelectableRow]="clause">
                        <td class="flexible-header1">{{ clause.shortDescription }}</td>
                        <td class="flexible-header1">{{ clause.heading | truncate:5 | sentenceCase }}</td>
                        <td class="position-relative ">
                            <div class="clause-wrapper">
                                {{ clause.wording | truncate:10 | sentenceCase}}

                                <div class="hover-card">
                                    {{ clause.wording |sentenceCase }}
                                </div>
                            </div>
                        </td>
                        <td class="flexible-header1" style="text-align: left">
                            <div class="flex justify-start  gap-2">
                                <!-- Edit -->
                                <span class="p-button-label p-text-bold " [ngStyle]="{
                    color: clause.isEditable === 'Y' ? '#00529B' : '#6B7280', 
                   
                    cursor: clause.isEditable === 'Y' ? 'pointer' : 'default',
                    display: 'inline-block',
                    width: '60px'  
                    }" [attr.data-bs-toggle]="clause.isEditable === 'Y' ? 'modal' : null"
                                    [attr.data-bs-target]="clause.isEditable === 'Y' ? '#editClause' : null"
                                    (click)="clause.isEditable === 'Y' && populateEditClauseModal(clause)">
                                    {{ clause.isEditable === 'Y' ? ('gis.quotation.edit' | translate) : '--' }}
                                </span>

                                <!-- Delete -->

                                <span *ngIf="clause.isMandatory === 'N'" class="p-button-label p-text-bold " [ngStyle]="{
                                                        color: '#00529B',
                                                        cursor: 'pointer'
                                                      }" data-bs-toggle="modal" data-bs-target="#deleteClause"
                                    (click)="prepareDeleteClause(clause)">
                                    {{ 'gis.quotation.delete' | translate }}
                                </span>
                            </div>

                        </td>
                    </tr>
                </ng-template>

                <ng-template pTemplate="emptymessage">
                    <tr>
                        <td colspan="8" style="padding: 20px; text-align:center" id="empty">
                            No risk clause Click on + icon to add risk clause</td>
                    </tr>
                </ng-template>
            </p-table>
        </div>

        <!-- Add risk clause modal -->
        <div class="modal fade" id="addClause" tabindex="-1" role="dialog" aria-labelledby="addSectionLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" style="min-width: 708px;" role="document">
                <div class="modal-content" id="addSectionModal">
                    <div class="modal-body">
                        <h5 class="modal-title mt-2" id="editOtherDetailsLabel">
                            Add risk clause
                            <button type="button" class="btn-close red-close float-end" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </h5>

                        <ng-container *ngIf="nonMandatoryClauses && nonMandatoryClauses.length > 0; else noMoreClauses">
                            <p-table #clauseTable [value]="nonMandatoryClauses" dataKey="clauseCode" [paginator]="true"
                                [rows]="3" [rowsPerPageOptions]="[3, 5, 10]"
                                [globalFilterFields]="['shortDescription', 'heading']" [scrollable]="true"
                                scrollDirection="horizontal" responsiveLayout="scroll" class="mt-3"
                                [(selection)]="selectedRiskClauses" selectionMode="multiple">
                                <!-- Table Header -->
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th style="width: 3%"><p-tableHeaderCheckbox /></th>
                                        <th pSortableColumn="id" class="flexible-header">
                                            ID <p-sortIcon field="id" />
                                        </th>
                                        <th pSortableColumn="description" class="flexible-header">
                                            Description <p-sortIcon field="description" />
                                        </th>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td>
                                            <input class="form-control form-control-sm" pInputText #idFilter type="text"
                                                (input)="clauseTable.filterGlobal(idFilter.value, 'contains')"
                                                style="width: 50%;" />
                                        </td>
                                        <td>
                                            <input class="form-control form-control-sm" pInputText #descFilter
                                                type="text"
                                                (input)="clauseTable.filterGlobal(descFilter.value, 'contains')"
                                                style="width: 50%;" />
                                        </td>
                                    </tr>
                                </ng-template>

                                <!-- Table Body -->
                                <ng-template pTemplate="body" let-clause>
                                    <tr>
                                        <td><p-tableCheckbox [value]="clause" /></td>
                                        <td>{{ clause.shortDescription }}</td>
                                        <td>{{ clause.heading }}</td>
                                    </tr>
                                </ng-template>

                                <!-- No Search Match -->
                                <ng-template pTemplate="emptymessage">
                                    <tr>
                                        <td colspan="3" class="text-center p-4 text-muted">
                                            <i class="pi pi-search" style="font-size: 2rem; margin-bottom: 10px;"></i>
                                            <p>No matching clauses found.</p>
                                        </td>
                                    </tr>
                                </ng-template>
                            </p-table>
                        </ng-container>

                        <!-- No Clauses Left -->
                        <ng-template #noMoreClauses>
                            <div class="text-center p-4">
                                <div style="color: #6c757d; font-size: 16px;">
                                    <i class="pi pi-info-circle" style="font-size: 2rem; margin-bottom: 10px;"></i>
                                    <p>No additional clauses are available to add.</p>
                                </div>
                            </div>
                        </ng-template>

                        <!-- Buttons -->
                        <div class="mt-4 d-flex justify-content-end">
                            <button type="button" class="btn btn-outline-primary me-2"
                                data-bs-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-primary" id="saveDetails" data-bs-dismiss="modal"
                                (click)="addRiskClauses()">
                                Save
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- edit risk clause modal -->
        <div class="modal fade" id="editClause">
            <div class="modal-dialog modal-dialog-centered" style="min-width:600px">
                <div class="modal-content ps-4 pt-2 pe-4">
                    <div class="d-flex justify-content-between align-items-center rounded-3 mb-2 p-1">
                        <p class="modal-title" style="color: #00529B; font-weight:600; font-size:20px;">
                            {{ 'gis.quotation.edit_clause' | translate }}</p>
                        <button type="button" data-bs-dismiss="modal" class="btn p-0 text-danger fw-bold"
                            style="border: none;">X
                        </button>
                    </div>

                    <div class="d-flex justify-content-between text-black">
                        <div class="d-flex flex-column bg-gray-300 w-25">
                            <label for="id">ID</label>
                            <input type="text" [value]=" selectedRiskClause.shortDescription" pInputText
                                style="background-color:rgb(215, 212, 212); width:18vw" readonly>

                        </div>
                        <div class="d-flex flex-column w-50 ">
                            <label for="heading">Heading</label>
                            <input class="bg-gray-300" pInputText [value]=" selectedRiskClause.heading | truncate:10"
                                pTooltip="{{  selectedRiskClause.heading }}"
                                style="background-color:rgb(215, 212, 212); width:20vw; z-index:auto" readonly>
                        </div>
                    </div>

                    <div class="d-flex flex-column mt-5">
                        <label class="text-dark mt-0" for="comment">Wording</label>
                        <textarea rows="5" pTextarea [(ngModel)]=" selectedRiskClause.wording"
                            class="p-inputtextarea w-full" style="border: 1px solid #ced4da;min-height: 130px">
              </textarea>
                    </div>

                    <div class="d-flex flex-row-reverse gap-3 align-items-center rounded-3 mb-3 mt-5 p-0">
                        <button #closeReassignButton type="button" data-bs-dismiss="modal"
                            style="display: none;"></button>
                        <button type="button" class="btn" data-bs-dismiss="modal"
                            style="background-color: #00529B;color:white;text-decoration: none;"
                            (click)="editRiskClause()" [disabled]="!wasModified()">{{ 'gis.quotation.save_changes' |
                            translate }}
                        </button>
                        <button type="button" data-bs-dismiss="modal" class="btn btn-outline-primary"
                            style="text-decoration: none;">{{
                            'gis.quotation.cancel' | translate
                            }}
                        </button>
                    </div>

                </div>
            </div>

        </div>

        <!-- delete clause modal -->
        <div class="modal fade" id="deleteClause">
            <div class="modal-dialog modal-dialog-centered" style="min-width:600px">
                <div class="modal-content ps-4 pt-2 pe-4">
                    <div class="d-flex justify-content-between align-items-center rounded-3 mb-2 p-1">
                        <p class="modal-title" style="color: #00529B; font-weight:600; font-size:20px;">
                            {{ 'gis.quotation.delete_clause' | translate }}</p>
                        <button type="button" data-bs-dismiss="modal" class="btn p-0 text-danger fw-bold"
                            style="border: none;">X
                        </button>
                    </div>

                    <div class="d-flex justify-content-between text-black">
                        <p>Are you sure you want to delete this clause?</p>
                    </div>

                    <div class="d-flex flex-row-reverse gap-3 align-items-center rounded-3 mb-3 mt-5 p-0">
                        <button type="button" class="btn" data-bs-dismiss="modal"
                            style="background-color: #00529B;color:white;text-decoration: none;"
                            (click)="deleteRiskClause()">
                            {{ 'gis.quotation.delete' | translate }}
                        </button>
                        <button type="button" data-bs-dismiss="modal" class="btn btn-outline-primary"
                            style="text-decoration: none;">{{
                            'gis.quotation.cancel' | translate
                            }}
                        </button>
                    </div>

                </div>
            </div>

        </div>



    </div>
</div>