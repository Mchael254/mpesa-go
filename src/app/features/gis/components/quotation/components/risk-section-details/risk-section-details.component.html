
<div class="mx-4 mt-3">
  <p class="screenTitle">{{'gis.quotation.quotation_risk_detail' | translate}} </p>
  <app-stepper [currentStep]="3" [stepperData]="steps"></app-stepper>
   <!-- Risk detail card -->
   <div class="card mb-3">
    <div class="card-body">
      <div>
        <div class="row">
          <div class="col-4 ms-3">
            <strong class="ps-3"> {{'gis.quotation.risk_details' | translate}}</strong>
          </div>
          <!-- <div class="col-8 d-flex justify-content-end">
            <button type="button" id="icon" class="btn btn-primary" data-bs-toggle="collapse" data-bs-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
              <i class="fa-solid fa-chevron-down"></i>
            </button>
          </div> -->
        </div>

      </div>
      <div  id="collapseExample">
        <!-- <div class="card card-body">
          Some placeholder content for the collapse component. This panel is hidden by default but revealed when the user activates the relevant trigger.
        </div> -->
        <!-- <p class="title2 ps-2">Quotation no: <strong>3454684</strong></p> -->
        <form [formGroup]="riskDetailsForm" >
          <div class="row mt-2 mx-4 mb-4">
            <div class="col-4">
                <label for="minmax-buttons" id="quote-label">{{'gis.quotation.product' | translate}}</label>
                <select class="form-select form-control-sm " id="quote-dropdown" formControlName="productCode">
                  <option value="">{{description |sentenceCase}}</option>

              </select>
            </div>
            <div class="col-4">
                <label for="minmax-buttons" id="quote-label">{{'gis.quotation.insured' | translate}}</label>
                <input type="text"
                id="quote-input"
                class="form-control form-control-sm mb-1"

                [value]="clientName"
                readonly>

                <!-- <select class="form-select form-control-sm " id="quote-dropdown" formControlName="insuredCode" >
                  <option value="">{{clientName |sentenceCase}}</option>
              </select> -->
            </div>


        </div>
            <div class="row mt-2 mx-4 mb-4">
                <div class="col-4">
                  <label for="minmax-buttons" id="quote-label" class="required">{{'gis.quotation.subclass' | translate}}</label>
                  <p-dropdown formControlName="subclassCode" [options]="allMatchingSubclasses" optionLabel="description"
                  [filterBy]="'description'"  [filter]="true"
                  (onChange)="onSubclassSelected($event);loadSubclassSectionCovertype();"></p-dropdown>

                  <!-- <select class="form-select form-control-sm" id="quote-dropdown"
                  (change)="onSubclassSelected($event);loadSubclassSectionCovertype();" formControlName="subclassCode" >
                    <option></option>
                    <option *ngFor="let subclass of allMatchingSubclasses" [value]="subclass.code">{{subclass.description}}</option>
                  </select> -->
                </div>

                <div class="col-4">
                  <label for="minmax-buttons" id="quote-label"> {{'gis.quotation.vehicle_make' | translate}}</label>
                  <!-- <select class="form-select form-control-sm mb-1 ms-n4" id="quote-input"
                   (change)="onVehicleMakeSelected($event)">
                    <option></option>
                    <option *ngFor="let vehicleMake of vehicleMakeList" [value]="vehicleMake.code">{{vehicleMake.name}}</option>
                  </select> -->
                  <p-dropdown  [options]="vehicleMakeList" optionLabel="name"
                  [filterBy]="'name'"  [filter]="true"
                  (onChange)="onVehicleMakeSelected($event);"></p-dropdown>
                </div>
                <div class="col-4">
                  <label for="minmax-buttons" id="quote-label"> {{'gis.quotation.vehicle_model' | translate}}</label>
                  <p-dropdown  [options]="filteredVehicleModel" optionLabel="name"
                  [filterBy]="'name'"  [filter]="true"
                  (onChange)="onVehicleModelSelected($event);"></p-dropdown>
                  <!-- <select class="form-select form-control-sm mb-1 ms-n4" id="quote-input"
                   (change)="onVehicleModelSelected($event)">
                    <option></option>
                    <option *ngFor="let vehicleModel of filteredVehicleModel" [value]="vehicleModel.code">{{ vehicleModel.name }}</option>
                  </select> -->
                </div>

            </div>
            <div class="row mt-2 mx-4 mb-4">
              <div class="col-4">
                <label for="minmax-buttons" id="quote-label"> {{'gis.quotation.risk_id' | translate}}</label>
                  <!-- <input type="text" id="quote-input" class="form-control form-control-sm mb-1" formControlName="propertyId" [(ngModel)]="passedRiskId" (change)="riskIdPassed()">   -->
                  <input type="text" id="quote-input" class="form-control form-control-sm mb-1" formControlName="propertyId"
                  (input)="riskIdPassed($event); transformToUpperCase($event)" placeholder="KAA 123X" >
                  <div
                  *ngIf="riskDetailsForm?.get('propertyId')?.hasError('pattern') && riskDetailsForm?.get('propertyId').touched"
                  class="form-text text-danger">
                  {{'gis.quotation.risk_id' | translate}} is invalid
                </div>

            </div>
            <div class="col-4">
                <label for="minmax-buttons" id="quote-label" class="required"> {{'gis.quotation.risk_description' | translate}}</label>
                <input type="text" id="quote-input" class="form-control form-control-sm mb-1" formControlName="itemDescription" [value]="vehiclemakeModel" readonly>

            </div>
                <div class="col-4">
                  <label for="minmax-buttons" id="quote-label" class="required"> {{'gis.quotation.cover_type' | translate}}</label>
                  <p-dropdown formControlName="coverTypeDescription"  [options]="subclassCoverType" optionLabel="description"
                  [filterBy]="'description'"  [filter]="true"
                  (onChange)="onCoverTypeSelected($event);"></p-dropdown>

                  <!-- <select class="form-select form-control-sm mb-1 ms-n4" id="quote-input" formControlName="coverTypeDescription">
                    <option *ngFor="let covertype of subclassCoverType" [value]="covertype.coverTypeShortDescription">{{covertype.description}}</option>
                  </select> -->

                </div>

            </div>
            <div class="row mt-2 mx-4 mb-4">
              <div class="col-4">
                <label for="minmax-buttons" id="quote-label"  class="required"> {{'gis.quotation.premium_band' | translate}}</label>
                <p-dropdown formControlName="binderCode"  [options]="binderListDetails" optionLabel="binder_name"
                [filterBy]="'binder_name'"  [filter]="true"
                (onChange)="onBinderSelected($event);"></p-dropdown>

                <!-- <select class="form-select form-control-sm mb-1 ms-n4" id="quote-input" formControlName="binderCode" >
                    <option *ngFor="let binder of binderListDetails" [value]="binder.code">
                      {{binder.binder_name}}
                    </option>
                </select>     -->
            </div>
            <div class="col-xl-4">
              <label for="" id="quote-label"> {{'gis.quotation.cover_from' | translate}}</label>
              <p-calendar formControlName="wef" name="wef"
              id="coverFromDate"
              inputId="coverFromDate"
              [dateFormat]="dateFormat"
              inputStyleClass='form-control'
              [showIcon]="true"
              (onSelect)="updateCoverToDate($event)"
              [minDate]="currentDate"

              [ngModel]="passedCoverFromDate" >
            </p-calendar>
              <!-- <input type="date" id="cover-from" class="form-control form-control-sm mb-1" formControlName="wef"> -->

          </div>
            <div class="col-xl-4">
              <label for="" id="quote-label"> {{'gis.quotation.cover_to' | translate}}</label>
              <p-calendar formControlName="wet" name="wet"
              id="coverToDate"
              inputId="coverToDate"
              [dateFormat]="dateFormat"
              inputStyleClass='form-control'
              [showIcon]="true"
              [minDate]="passedCoverToDate"
              [ngModel]="passedCoverToDate"
              >
          </p-calendar>
              <!-- <input type="date" id="cover-to" class="form-control form-control-sm mb-1" formControlName="wet"> -->

          </div>
            </div>
            <button type="button" class="btn btn-primary float-end " (click)="createRiskDetail()"> {{'gis.quotation.save_details' | translate}}</button>

        </form>
      </div>
    </div>
  </div>
  <!-- schedule card -->
  <div class="card  mb-3">
    <div class="card-body">

        <div class="row">
          <div class="col-4">
            <strong> {{'gis.quotation.schedule_details' | translate}}</strong>
          </div>
          <div class="col-8 d-flex justify-content-end">
            <div class="row">
              <div class="col-4" *ngIf="isCollapsibleOpen">
                <!-- <button type="button" id="openModalButtonEdit" class="btn btn-primary icon" data-bs-toggle="modal" data-bs-target="#editSchedule" title="Edit" >
                </button> -->
                <button id="openModalButtonEdit" [hidden]="true"  data-bs-toggle="modal" data-bs-target="#editSchedule" >edits</button>
                <button type="button" class="btn  icon"  title="Edit" >
                  <i class="fa-solid fa-pencil " (click)="openEditScheduleModal()"></i>

                </button>

              </div>
              <div class="col-4" *ngIf="isCollapsibleOpen">
                <button type="button" id="icon" class="btn btn-danger me-2" data-bs-toggle="modal" data-bs-target="#deleteSchedule" title="Delete">

                  <i class="fa-solid fa-trash-can"></i>
                </button>
              </div>
                <div class="col-4">
                  <button
                    type="button"
                    id="icon"
                    class="btn btn-primary"
                    data-bs-toggle="collapse"
                    data-bs-target="#sectionDetails"
                    aria-expanded="false"
                    [attr.aria-expanded]="isSectionDetailsOpen"
                    (click)="toggleSchedule()">
                    <i class="fa-solid" [ngClass]="isCollapsibleOpen ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
                  </button>
                </div>
            </div>
          </div>
        </div>

        <div [@slideInOut]="isCollapsibleOpen ? 'open' : 'closed'" class="mt-2">

        <!-- Edit Schedule Modal -->
        <div class="modal fade" id="editSchedule" tabindex="-1" role="dialog" aria-labelledby="editScheduleLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="btn-close ms-auto py-2 px-2" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>

              <div class="modal-body">
                <h5 class="modal-title mt-2" id="editScheduleLabel">{{'gis.quotation.edit_motor_private_details' | translate}}</h5>
                <form [formGroup]="scheduleDetailsForm">
                  <div formGroupName="details">
                      <div formGroupName="level1">
                          <!-- **ROW 1** -->
                          <div class="row" id="scheduleRows">
                              <div class="col-xl-6">
                                  <div class="mb-3 row">
                                      <label for="minmax-buttons"
                                          class="col-5 col-form-label required"
                                          id="scheduleLabel">{{'gis.quotation.chasis_number'
                                          | translate}}</label>
                                      <div class="col-7">
                                          <input type="text"
                                              id="scheduleInput"
                                              class="form-control form-control-sm mb-1"
                                              formControlName="chasisNumber">

                                      </div>
                                  </div>
                              </div>
                              <div class="col-xl-6">
                                  <div class="mb-3 row">
                                      <label for="minmax-buttons"
                                          class="col-5 col-form-label"
                                          id="scheduleLabel">{{'gis.quotation.age'
                                          | translate}}</label>
                                      <div class="col-7">
                                          <select
                                              class="form-select form-control-sm mb-1"
                                              id="scheduleInput"
                                              formControlName="yearOfManufacture">
                                              <option></option>
                                              <option></option>
                                          </select>
                                      </div>
                                  </div>
                              </div>
                          </div>
                          <!-- **ROW 2** -->
                          <div class="row" id="scheduleRows">
                              <div class="col-xl-6">
                                  <div class="mb-3 row">
                                      <label for="minmax-buttons"
                                          class="col-5 col-form-label "
                                          id="scheduleLabel">{{'gis.quotation.reg_no'
                                          | translate}}</label>
                                      <div class="col-7">
                                          <input type="text"
                                              id="scheduleInput"
                                              class="form-control form-control-sm mb-1"
                                              formControlName="registrationNumber">
                                      </div>
                                  </div>
                              </div>
                              <div class="col-xl-6">
                                  <div class="mb-3 row">
                                      <label for="minmax-buttons"
                                          class="col-5 col-form-label"
                                          id="scheduleLabel">{{'gis.quotation.vehicle_make'
                                          | translate}}</label>
                                      <div class="col-7">
                                          <input type="text"
                                              id="scheduleInput"
                                              class="form-control form-control-sm mb-1"
                                              formControlName="Make">
                                      </div>
                                  </div>
                              </div>

                          </div>


                          <!-- **ROW 3** -->
                          <div class="row" id="scheduleRows">
                              <div class="col-xl-6">
                                  <div class="mb-3 row">
                                      <label for="minmax-buttons"
                                          class="col-5 col-form-label "
                                          id="scheduleLabel">{{'gis.quotation.cubic_capacity'
                                          | translate}}</label>
                                      <div class="col-7">
                                          <input type="number"
                                              id="scheduleInput"
                                              class="form-control form-control-sm mb-1"
                                              formControlName="cubicCapacity">

                                      </div>
                                  </div>
                              </div>
                              <div class="col-xl-6">
                                  <div class="mb-3 row">
                                      <label for="minmax-buttons"
                                          class="col-5 col-form-label"
                                          id="scheduleLabel">{{'gis.quotation.year_of_manufacture'
                                          | translate}}</label>
                                      <div class="col-7">
                                          <select
                                              class="form-select form-control-sm mb-1"
                                              id="scheduleInput"
                                              formControlName="yearOfManufacture">
                                              <option value=""></option>
                                              <option *ngFor="let year of modelYear" [value]="year">{{ year }}</option>
                                          </select>

                                      </div>
                                  </div>
                              </div>
                          </div>
                          <!-- **ROW 4** -->
                          <div class="row" id="scheduleRows">
                              <div class="col-xl-6">
                                  <div class="mb-3 row">
                                      <label for="minmax-buttons"
                                          class="col-5 col-form-label "
                                          id="scheduleLabel">{{'gis.quotation.seating_capacity'
                                          | translate}}</label>
                                      <div class="col-7">

                                          <input type="number"
                                              id="scheduleInput"
                                              class="form-control form-control-sm mb-1"
                                              formControlName="carryCapacity">
                                      </div>
                                  </div>
                              </div>
                              <div class="col-xl-6">
                                  <div class="mb-3 row">
                                      <label for="minmax-buttons"
                                          class="col-5 col-form-label"
                                          id="scheduleLabel">{{'gis.quotation.value'
                                          | translate}}</label>
                                      <div class="col-7">
                                          <input type="number"
                                              id="scheduleInput"
                                              class="form-control form-control-sm mb-1"
                                              formControlName="value">
                                              <!-- <input type="text"
                                              id="scheduleInput"
                                              class="form-control form-control-sm mb-1"
                                              formControlName="value"
                                              (input)="formatCurrency($event)"> -->
                                      </div>
                                  </div>
                              </div>
                          </div>
                          <!-- **ROW 5** -->
                          <div class="row" id="scheduleRows">
                              <div class="col-xl-6">
                                  <div class="mb-3 row">
                                      <label for="minmax-buttons"
                                          class="col-5 col-form-label "
                                          id="scheduleLabel">{{'gis.quotation.body_type'
                                          | translate}}</label>
                                      <div class="col-7">

                                          <p-dropdown
                                              [options]="bodytypesList"
                                              optionValue="description"
                                              optionLabel="description"
                                              formControlName="bodyType"
                                              [filterBy]="'description'"
                                              [filter]="true"></p-dropdown>
                                      </div>
                                  </div>
                              </div>
                              <div class="col-xl-6">
                                  <div class="mb-3 row">
                                      <label for="minmax-buttons"
                                          class="col-5 col-form-label"
                                          id="scheduleLabel">{{'gis.quotation.cover_type'
                                          | translate}}</label>
                                      <div class="col-7">
                                          <input type="text"
                                              id="scheduleInput"
                                              class="form-control form-control-sm mb-1"
                                              formControlName="coverType">

                                      </div>
                                  </div>
                              </div>
                          </div>
                          <!-- **ROW 6** -->
                          <div class="row" id="scheduleRows">
                              <div class="col-xl-6">
                                  <div class="mb-3 row">
                                      <label for="minmax-buttons"
                                          class="col-5 col-form-label "
                                          id="scheduleLabel">{{'gis.quotation.item_no'
                                          | translate}}</label>
                                      <div class="col-7">
                                          <input type="number"
                                              id="scheduleInput"
                                              class="form-control form-control-sm mb-1"
                                              formControlName="coverType">
                                      </div>
                                  </div>
                              </div>
                              <div class="col-xl-6">
                                  <div class="mb-3 row">
                                      <label for="minmax-buttons"
                                          class="col-5 col-form-label"
                                          id="scheduleLabel">{{'gis.quotation.colour'
                                          | translate}}</label>
                                      <div class="col-7">

                                          <p-dropdown
                                              [options]="motorColorsList"
                                              optionValue="code"
                                              optionLabel="description"
                                              formControlName="color"
                                              [filterBy]="'description'"
                                              [filter]="true"></p-dropdown>
                                      </div>
                                  </div>
                              </div>
                          </div>
                          <!-- **ROW 7** -->
                          <div class="row" id="scheduleRows">
                              <div class="col-xl-6">
                                  <div class="mb-3 row">
                                      <label for="minmax-buttons"
                                          class="col-5 col-form-label "
                                          id="scheduleLabel">{{'gis.quotation.engine_no'
                                          | translate}}</label>
                                      <div class="col-7">
                                          <input type="number"
                                              id="scheduleInput"
                                              class="form-control form-control-sm mb-1"
                                              formControlName="engineNumber">
                                      </div>
                                  </div>
                              </div>
                              <div class="col-xl-6">
                                  <div class="mb-3 row">
                                      <label for="minmax-buttons"
                                          class="col-5 col-form-label"
                                          id="scheduleLabel">{{'gis.quotation.terrorism_applicable'
                                          | translate}}</label>
                                      <div class="col-7">
                                          <select
                                              class="form-select form-control-sm mb-1"
                                              id="scheduleInput"
                                              formControlName="color">
                                              <option>{{'gis.policy.yes' |
                                                  translate}}</option>
                                              <option>{{'gis.policy.no' |
                                                  translate}}</option>
                                          </select>
                                      </div>
                                  </div>
                              </div>
                          </div>
                          <!-- **ROW 8** -->
                          <div class="row" id="scheduleRows">
                              <div class="col-xl-6">
                                  <div class="mb-3 row">
                                      <label for="minmax-buttons"
                                          class="col-5 col-form-label "
                                          id="scheduleLabel">{{'gis.quotation.logbook_no'
                                          | translate}}.</label>
                                      <div class="col-7">
                                          <input type="number"
                                              id="scheduleInput"
                                              class="form-control form-control-sm mb-1"
                                              formControlName="logBook">
                                      </div>
                                  </div>
                              </div>
                              <div class="col-xl-6">
                                  <div class="mb-3 row">
                                      <label for="minmax-buttons"
                                          class="col-5 col-form-label"
                                          id="scheduleLabel">{{'gis.quotation.security_device_1'
                                          | translate}}</label>
                                      <div class="col-7">


                                          <p-dropdown
                                              [options]="securityDevicesList"
                                              optionValue="type"
                                              optionLabel="desc"
                                              formControlName="color"
                                              [filterBy]="'desc'"
                                              [filter]="true"></p-dropdown>
                                      </div>
                                  </div>
                              </div>
                          </div>
                          <!-- **ROW 9** -->
                          <div class="row" id="scheduleRows">
                              <div class="col-xl-6">
                                  <div class="mb-3 row">
                                      <label for="minmax-buttons"
                                          class="col-5 col-form-label "
                                          id="scheduleLabel">{{'gis.quotation.motor_accessories'
                                          | translate}}</label>
                                      <div class="col-7">
                                          <p-dropdown
                                              [options]="motorAccessoriesList"
                                              optionValue="type"
                                              optionLabel="desc"
                                              formControlName="color"
                                              [filterBy]="'desc'"
                                              [filter]="true"
                                             ></p-dropdown>
                                      </div>
                                  </div>
                              </div>
                              <div class="col-xl-6">
                                  <div class="mb-3 row">
                                      <label for="minmax-buttons"
                                          class="col-5 col-form-label"
                                          id="scheduleLabel">{{'gis.quotation.model'
                                          | translate}}</label>
                                      <div class="col-7">
                                          <p-dropdown
                                              [options]="filteredVehicleModel"
                                              optionValue="code"
                                              optionLabel="name"
                                              formControlName="Make"
                                              [filterBy]="'name'"
                                              [filter]="true"
                                              [placeholder]="selectedVehicleModelName"></p-dropdown>
                                      </div>
                                  </div>
                              </div>
                          </div>
                          <!-- **ROW 10** -->
                          <div class="row" id="scheduleRows">
                              <div class="col-xl-6">
                                  <div class="mb-3 row">
                                      <label for="minmax-buttons"
                                          class="col-5 col-form-label "
                                          id="scheduleLabel">{{'gis.quotation.security_device'
                                          | translate}}</label>
                                      <div class="col-7">
                                          <p-dropdown
                                              [options]="securityDevicesList"
                                              optionValue="type"
                                              optionLabel="desc"
                                              formControlName="color"
                                              [filterBy]="'desc'"
                                              [filter]="true"></p-dropdown>
                                      </div>
                                  </div>
                              </div>
                              <div class="col-xl-6">
                                  <div class="mb-3 row">
                                      <label for="minmax-buttons"
                                          class="col-5 col-form-label"
                                          id="scheduleLabel">{{'gis.quotation.regular_driver_name'
                                          | translate}}</label>
                                      <div class="col-7">
                                          <select
                                              class="form-control form-control-sm mb-1"
                                              id="scheduleInput"
                                              formControlName="color">
                                              <option></option>
                                              <option></option>
                                          </select>
                                      </div>
                                  </div>
                              </div>
                          </div>
                          <!-- **ROW 11** -->
                          <div class="row" id="scheduleRows">
                              <div class="col-xl-6">
                                  <div class="mb-3 row">
                                      <label for="minmax-buttons"
                                          class="col-5 col-form-label "
                                          id="scheduleLabel">{{'gis.quotation.sch_active'
                                          | translate}}</label>
                                      <div class="col-7">
                                          <input type="number"
                                              id="scheduleInput"
                                              class="form-control form-control-sm mb-1"
                                              formControlName="color">
                                      </div>
                                  </div>
                              </div>
                              <div class="col-xl-6">
                                  <div class="mb-3 row">
                                      <label for="minmax-buttons"
                                          class="col-5 col-form-label"
                                          id="scheduleLabel">{{'gis.quotation.licence_no'
                                          | translate}}</label>
                                      <div class="col-7">
                                          <input type="number"
                                              id="scheduleInput"
                                              class="form-control form-control-sm mb-1"
                                              formControlName="color">
                                      </div>
                                  </div>
                              </div>
                          </div>
                          <!-- **ROW 12** -->
                          <div class="row" id="scheduleRows">
                              <div class="col-xl-6">
                                  <div class="mb-3 row">
                                      <label for="minmax-buttons"
                                          class="col-5 col-form-label "
                                          id="scheduleLabel">{{'gis.quotation.driver_licence_date'
                                          | translate}}</label>
                                      <div class="col-7">
                                          <input type="datetime"
                                              id="scheduleInput"
                                              class="form-control form-control-sm mb-1"
                                              >
                                      </div>
                                  </div>
                              </div>
                              <div class="col-xl-6">
                                  <div class="mb-3 row">
                                      <label for="minmax-buttons"
                                          class="col-5 col-form-label"
                                          id="scheduleLabel">{{'gis.quotation.driver_sms_no'
                                          | translate}}</label>
                                      <div class="col-7">
                                          <input type="number"
                                              id="scheduleInput"
                                              class="form-control form-control-sm mb-1"
                                              >
                                      </div>
                                  </div>
                              </div>
                          </div>
                          <!-- **ROW 13** -->
                          <div class="row" id="scheduleRows">
                              <div class="col-xl-6">
                                  <div class="mb-3 row">
                                      <label for="minmax-buttons"
                                          class="col-5 col-form-label "
                                          id="scheduleLabel">{{'gis.quotation.driver_relation_insured'
                                          | translate}}</label>
                                      <div class="col-7">
                                          <input type="text"
                                              id="scheduleInput"
                                              class="form-control form-control-sm mb-1"
                                              >
                                      </div>
                                  </div>
                              </div>
                              <div class="col-xl-6">
                                  <div class="mb-3 row">
                                      <label for="minmax-buttons"
                                          class="col-5 col-form-label"
                                          id="scheduleLabel">{{'gis.quotation.driver_email_address'
                                          | translate}}</label>
                                      <div class="col-7">
                                          <input type="text"
                                              id="scheduleInput"
                                              class="form-control form-control-sm mb-1"
                                             >
                                      </div>
                                  </div>
                              </div>
                          </div>

                      </div>
                  </div>

                  <div class="row mt-3 mb-2 mx-3">
                      <div class="col-6 ">
                          <button type="button" class="btn btn-primary"
                              (click)="clearForm()">{{'gis.quotation.clear' |
                              translate}}</button>

                      </div>
                      <div class="col-6 d-flex justify-content-end">
                          <button type="button"
                              class="btn btn-outline-primary " id="
 " (click)="updateSchedule()" data-bs-dismiss="modal">{{'gis.quotation.save_details'
                              | translate}}</button>
                      </div>
                  </div>
              </form>
              </div>
            </div>
          </div>
        </div>


        <!-- Delete Schedule Modal -->
        <div class="modal fade" id="deleteSchedule" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered ">
            <div class="modal-content">
              <!-- <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div> -->
              <div class="modal-body">
                <p class="d-flex justify-content-center" id="deleteLabel">{{'gis.quotation.are_you_sure_you_want_to_delete_schedule' | translate}}?</p>
                <div class="row d-flex justify-content-center">
                  <button type="button" class="btn btn-primary " id="delete" data-bs-dismiss="modal" (click)="deleteSchedule()">{{'gis.quotation.yes_delete' | translate}}</button>
                </div><br>
                <div class="row d-flex justify-content-center">
                  <button type="button" class="btn btn-outline-primary" id="delete" data-bs-dismiss="modal">{{'gis.quotation.no_im_not' | translate}}</button>
                </div><br>
              </div>
            </div>
          </div>
        </div>
        <br>
        <p-table [value]="scheduleList" selectionMode="single" [(selection)]="selectedSchedule" dataKey="code">
          <ng-template pTemplate="header">
            <tr>
              <th class="flexible-header">{{'gis.quotation.reg_no' | translate}}</th>
              <th class="flexible-header">{{'gis.quotation.vehicle_make' | translate}}</th>
              <th class="flexible-header">{{'gis.quotation.cubic_capacity' | translate}}</th>
              <th class="flexible-header">{{'gis.quotation.year_of_manufacture' | translate}}</th>
              <th class="flexible-header">{{'gis.quotation.seating_capacity' | translate}}</th>
              <th class="flexible-header">{{'gis.quotation.value' | translate}}</th>
              <th class="flexible-header">{{'gis.quotation.body_type' | translate}}</th>
              <th class="flexible-header">{{'gis.quotation.cover_type' | translate}}</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-schedule>
            <tr (click)="onSelectSchedule(schedule)" [pEditableRow]="schedule"
            [class.p-highlight]="schedule === selectedSchedule"
            >
              <td class="flexible-header">{{ schedule.details.level1.registrationNumber}}</td>
              <td class="flexible-header">{{ schedule.details.level1.Make }}</td>
              <td class="flexible-header">{{ schedule.details.level1.cubicCapacity }}</td>
              <td class="flexible-header">{{ schedule.details.level1.yearOfManufacture }}</td>
              <td class="flexible-header">{{ schedule.details.level1.carryCapacity }}</td>
              <td class="flexible-header">{{ schedule.details.level1.value |number }}</td>
              <td class="flexible-header">{{ schedule.details.level1.bodyType }}</td>
              <td class="flexible-header">{{ schedule.details.level1.coverType }}</td>
            </tr>
          </ng-template>
          <ng-template pTemplate="emptymessage">
            <tr>
              <td colspan="8"  style="padding: 20px; text-align:center " id="empty">{{'gis.quotation.no_data_to_display' | translate}}</td>
            </tr>
          </ng-template>
        </p-table>
        <div class="card-body">
          <div>
            <div class="row">
              <div class="col-3">
                <strong style="margin-left: -12px;">{{'gis.quotation.other_details' | translate}}</strong>
              </div>
              <div class="col-9 d-flex justify-content-end">
                <div class="row">
                  <!-- <div class="col-1" *ngIf="isOtherDetailsOpen"></div> -->
                  <div class="col-2" >
                    <button type="button" id="icon" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addOtherDetails" title="Edit">
                      <i class="fa-solid fa-plus"></i>
                    </button>
                  </div>
                  <div class="col-2" >
                    <button type="button" id="icon" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#editOtherDetails" title="Edit">
                      <i class="fa-solid fa-pencil"></i>
                    </button>
                  </div>
                  <div class="col-2" >
                    <button type="button" id="icon" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#deleteOtherDetails" title="Edit">
                      <i class="fa-solid fa-trash-can"></i>
                    </button>
                  </div>
                  <div class="col-6 d-flex justify-content-end" >
                    <button type="button" class="btn btn-primary" id="importButton" data-bs-dismiss="modal">{{'gis.quotation.import_files' | translate}}</button>

                  </div>
                  <!-- <div class="col-2" >
                    <button type="button" id="icon" class="btn btn-primary" data-bs-toggle="collapse" data-bs-target="#otherDetails" aria-expanded="false" aria-controls="otherDetails" [attr.aria-expanded]="!isOtherDetailsOpen" (click)="toggleOtherDetails()">
                      <i class="fa-solid fa-chevron-down"></i>
                    </button>
                  </div> -->
                </div>

              </div>
            </div>

          </div>
          <div class=" mt-2" id="otherDetails">
              <!-- Add Schedule-other details Modal -->
          <div class="modal fade" id="addOtherDetails" tabindex="-1" role="dialog" aria-labelledby="addOtherDetailsLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
              <div class="modal-content">
                <div class="modal-body">
                  <h5 class="modal-title mt-2" id="editOtherDetailsLabel">{{'gis.quotation.add_other_details' | translate}}</h5>
                  <form >
                    <label for="minmax-buttons" class="col-5 col-form-label " id="scheduleLabel">{{'gis.quotation.code' | translate}}</label>
                    <input type="number" id="scheduleInput" class="form-control form-control-sm mb-1" >
                    <label for="minmax-buttons" class="col-5 col-form-label " id="scheduleLabel">{{'gis.quotation.geographical_limits' | translate}}</label>
                    <input type="text" id="scheduleInput" class="form-control form-control-sm mb-1" >
                    <label for="minmax-buttons" class="col-5 col-form-label " id="scheduleLabel">{{'gis.quotation.deductible_desc' | translate}}</label>
                    <input type="text" id="scheduleInput" class="form-control form-control-sm mb-1" >
                    <label for="minmax-buttons" class="col-5 col-form-label " id="scheduleLabel">{{'gis.quotation.limitation_use' | translate}}</label>
                    <select class="form-select form-control-sm mb-1" id="scheduleInput" >
                      <option ></option>
                      <option ></option>
                    </select>
                    <label for="minmax-buttons" class="col-5 col-form-label " id="scheduleLabel">{{'gis.quotation.authorized_driver' | translate}}</label>
                    <input type="text" id="scheduleInput" class="form-control form-control-sm mb-1" >
                  </form>
                  <div class="mt-4 d-flex justify-content-end">
                    <button type="button" class="btn btn-primary " id="saveDetails" data-bs-dismiss="modal">{{'gis.quotation.save_details' | translate}}</button>

                  </div>

                </div>
              </div>
            </div>
          </div>

             <!-- Edit Schedule-other details Modal -->
          <div class="modal fade" id="editOtherDetails" tabindex="-1" role="dialog" aria-labelledby="editScheduleLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
              <div class="modal-content">
                <div class="modal-body">
                  <h5 class="modal-title mt-2" id="editOtherDetailsLabel">{{'gis.quotation.edit_Other_details' | translate}}</h5>
                  <form >
                    <label for="minmax-buttons" class="col-5 col-form-label " id="scheduleLabel">{{'gis.quotation.code' | translate}}</label>
                    <input type="number" id="scheduleInput" class="form-control form-control-sm mb-1" >
                    <label for="minmax-buttons" class="col-5 col-form-label " id="scheduleLabel">{{'gis.quotation.geographical_limits' | translate}}</label>
                    <input type="text" id="scheduleInput" class="form-control form-control-sm mb-1" >
                    <label for="minmax-buttons" class="col-5 col-form-label " id="scheduleLabel">{{'gis.quotation.deductible_desc' | translate}}</label>
                    <input type="text" id="scheduleInput" class="form-control form-control-sm mb-1" >
                    <label for="minmax-buttons" class="col-5 col-form-label " id="scheduleLabel">{{'gis.quotation.limitation_use' | translate}}</label>
                    <select class="form-select form-control-sm mb-1" id="scheduleInput" >
                      <option ></option>
                      <option ></option>
                    </select>
                    <label for="minmax-buttons" class="col-5 col-form-label " id="scheduleLabel">{{'gis.quotation.authorized_driver' | translate}}</label>
                    <input type="text" id="scheduleInput" class="form-control form-control-sm mb-1" >
                  </form>
                  <div class="mt-4 d-flex justify-content-end">
                    <button type="button" class="btn btn-primary " id="saveDetails" data-bs-dismiss="modal">{{'gis.quotation.save_details' | translate}}</button>

                  </div>

                </div>
              </div>
            </div>
          </div>
          <!-- Delete Schedule-other details Modal -->
          <div class="modal fade" id="deleteOtherDetails" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered ">
              <div class="modal-content">
                <!-- <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div> -->
                <div class="modal-body">
                  <p class="d-flex justify-content-center" id="deleteLabel">{{'gis.policy.are_you_sure_you_want_to_delete' | translate}}</p>
                  <div class="row d-flex justify-content-center">
                    <button type="button" class="btn btn-primary " id="delete" data-bs-dismiss="modal">{{'gis.quotation.yes_delete' | translate}}</button>
                  </div><br>
                  <div class="row d-flex justify-content-center">
                    <button type="button" class="btn btn-outline-primary" id="delete" data-bs-dismiss="modal">{{'gis.quotation.no_im_not' | translate}}</button>
                  </div><br>
                </div>
              </div>
            </div>
          </div>
            <p-table [value]="" [tableStyle]="{ 'min-width': '300px' }">
              <ng-template pTemplate="header">
                  <tr>
                      <th class="flexible-header">{{'gis.quotation.code' | translate}}</th>
                      <th class="flexible-header">{{'gis.quotation.limitation_use' | translate}}</th>
                      <th class="flexible-header">{{'gis.quotation.geographical_limits' | translate}}</th>
                      <th class="flexible-header">{{'gis.quotation.authorized_driver' | translate}}</th>
                      <th class="flexible-header">{{'gis.quotation.deductible_description' | translate}}</th>


                  </tr>
              </ng-template>
              <ng-template pTemplate="body" >
                  <tr>
                      <td class="flexible-header"></td>
                      <td class="flexible-header"></td>
                      <td class="flexible-header"></td>
                      <td class="flexible-header"></td>
                      <td class="flexible-header"></td>

                  </tr>
              </ng-template>
              <ng-template pTemplate="emptymessage">
                <tr>
                  <td colspan="8"  style="padding: 20px; text-align:center " id="empty">{{'gis.quotation.no_data_to_display' | translate}}</td>
                </tr>

                </ng-template>
          </p-table>
          </div>
        </div>
        <div class="card-body">
          <div>
            <div class="row">
              <div class="col-3">
                <strong style="margin-left: -12px;">{{'gis.quotation.third' | translate}}</strong>
              </div>
              <div class="col-9 d-flex justify-content-end">
                <div class="row">
                  <!-- <div class="col-1" *ngIf="isOtherDetailsOpen"></div> -->
                  <div class="col-3"></div>
                  <div class="col-3" >
                    <button type="button" id="icon" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addThirdDetails" title="Edit">
                      <i class="fa-solid fa-plus"></i>
                    </button>
                  </div>
                  <div class="col-3" >
                    <button type="button" id="icon" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#editThirdDetails" title="Edit">
                      <i class="fa-solid fa-pencil"></i>
                    </button>
                  </div>
                  <div class="col-3" >
                    <button type="button" id="icon" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#deleteThirdDetails" title="Edit">
                      <i class="fa-solid fa-trash-can"></i>
                    </button>
                  </div>

                  <!-- <div class="col-2" >
                    <button type="button" id="icon" class="btn btn-primary" data-bs-toggle="collapse" data-bs-target="#thirdDetails" aria-expanded="false" aria-controls="otherDetails" [attr.aria-expanded]="!isThirdDetailsOpen" (click)="toggleThirdDetails()">
                      <i class="fa-solid fa-chevron-down"></i>
                    </button>
                  </div> -->
                </div>

              </div>
            </div>
            <div  id="thirdDetails">
              <!-- Add Third details Modal -->
          <div class="modal fade" id="addThirdDetails" tabindex="-1" role="dialog" aria-labelledby="addOtherDetailsLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
              <div class="modal-content">
                <div class="modal-body">

                </div>
              </div>
            </div>
          </div>

             <!-- Edit Third details Modal -->
          <div class="modal fade" id="editThirdDetails" tabindex="-1" role="dialog" aria-labelledby="editScheduleLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
              <div class="modal-content">
                <div class="modal-body">

                </div>
              </div>
            </div>
          </div>
          <!-- Delete Third details Modal -->
          <div class="modal fade" id="deleteThirdDetails" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered ">
              <div class="modal-content">
                <!-- <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div> -->
                <div class="modal-body">
                  <p class="d-flex justify-content-center" id="deleteLabel">{{'gis.policy.are_you_sure_you_want_to_delete' | translate}}</p>
                  <div class="row d-flex justify-content-center">
                    <button type="button" class="btn btn-primary " id="delete" data-bs-dismiss="modal">{{'gis.quotation.yes_delete' | translate}}</button>
                  </div><br>
                  <div class="row d-flex justify-content-center">
                    <button type="button" class="btn btn-outline-primary" id="delete" data-bs-dismiss="modal"> {{'gis.quotation.no_im_not' | translate}}</button>
                  </div><br>
                </div>
              </div>
            </div>
          </div>

          </div>
          </div>
        </div>
      </div>

    </div>
  </div>
     <!-- Section card -->
     <div class="card mb-3">
      <div class="card-body">
        <div>
          <div class="row">
            <div class="col-4">
              <strong> {{'gis.quotation.section_details' | translate}}</strong>
            </div>
            <div class="col-8 d-flex justify-content-end">
              <div class="row">
                <div class="col-4" *ngIf="isSectionDetailsOpen">
                  <button id="openModalButtonAdd" [hidden]="true"  data-bs-toggle="modal" data-bs-target="#addSection" >add</button>
                  <button type="button" id="icon" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addSection" title="Edit">
                    <i class="fa-solid fa-plus"></i>
                  </button>
                </div>
                <!-- <div class="col-3" *ngIf="isSectionDetailsOpen">
                  <button type="button" id="icon" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#editSection" title="Edit">
                    <i class="fa-solid fa-pencil"></i>
                  </button>
                </div> -->
                <div class="col-4" *ngIf="isSectionDetailsOpen">
                  <button type="button" id="icon" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#deleteSection" title="Delete">
                    <i class="fa-solid fa-trash-can"></i>
                  </button>
                </div>
                <div class="col-4">
                  <button
                    type="button"
                    id="icon"
                    class="btn btn-primary"
                    data-bs-toggle="collapse"
                    data-bs-target="#sectionDetails"
                    aria-expanded="false"
                    [attr.aria-expanded]="isSectionDetailsOpen"
                    (click)="toggleSectionDetails()">
                    <i class="fa-solid" [ngClass]="isSectionDetailsOpen ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
                  </button>
                </div>
              </div>

            </div>
          </div>

        </div>
        <div [@slideInOut]="isSectionDetailsOpen ? 'open' : 'closed'" class="mt-2">

          <!-- Add Risk Section Modal -->
          <div class="modal fade" id="addSection" tabindex="-1" role="dialog" aria-labelledby="addSectionLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered "  role="document">
              <div class="modal-content" id="addSectionModal">
                <div class="modal-body">
                  <h5 class="modal-title mt-2" id="editOtherDetailsLabel">{{'gis.quotation.risk_sections' | translate}}</h5>
                  <div class="search-container mb-3">
                    <span class="search-icon"><i class="fa fa-search"></i></span>
                    <input type="text" placeholder="Search" id="search-input-Rsection" [(ngModel)]="searchText" />
                  </div>
                  <div class="scrollable-list">
                    <div *ngFor="let section of filteredMandatorySections">
                      <!-- Add a check to see if the section matches the search text -->
                      <div class="form-check" *ngIf="matchesSearch(section.sectionShortDescription)">
                        <input class="form-check-input" type="checkbox" [id]="'checkbox-' + section.code" (change)="onCheckboxChange(section)" />
                        <label class="form-check-label" [for]="'checkbox-' + section.code">
                          {{ section.sectionShortDescription }}
                        </label>
                      </div>
                    </div>
                  </div>
                  <div class="mt-4 d-flex justify-content-end">
                    <button type="button" class="btn btn-primary " id="saveDetails" data-bs-dismiss="modal" (click)="createRiskSection()">{{'gis.quotation.save_details' | translate}}</button>
                  </div>
                </div>

              </div>
            </div>
          </div>

           <!-- Edit Risk Section Modal -->
        <div class="modal fade" id="editSection" #editSectionModal tabindex="-1" role="dialog" aria-labelledby="editSectionLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
              <div class="modal-body">
                <h5 class="modal-title mt-2" id="editScheduleLabel">{{'gis.quotation.edit_risk_section_details' | translate}}</h5>
                <form [formGroup]="sectionDetailsForm">
                    <!-- **ROW 1** -->
                    <div class="row" id="scheduleRows">
                      <div class="col-xl-6">
                          <div class="mb-3 row">
                              <label for="minmax-buttons" class="col-5 col-form-label" id="scheduleLabel">{{'gis.quotation.id' | translate}} :</label>
                              <div class="col-7">
                                <input type="text" id="scheduleInput" class="form-control form-control-sm mb-1" formControlName="code">
                              </div>
                            </div>
                      </div>
                      <div class="col-xl-6">
                          <div class="mb-3 row">
                              <label for="minmax-buttons" class="col-5 col-form-label" id="scheduleLabel">{{'gis.quotation.description' | translate}}:</label>
                              <div class="col-7">
                                  <input type="number" id="scheduleInput" class="form-control form-control-sm mb-1" formControlName="sectionShortDescription">                             </div>
                              </div>
                          </div>
                    </div>
                    <!-- **ROW 2** -->
                    <div class="row" id="scheduleRows">
                      <div class="col-xl-6">
                          <div class="mb-3 row">
                              <label for="minmax-buttons" class="col-5 col-form-label" id="scheduleLabel"> {{'gis.quotation.rate_type' | translate}} :</label>
                              <div class="col-7">
                                <select class="form-select form-control-sm mb-1" id="scheduleInput" formControlName="rateType">
                                  <option value="FXD">{{'gis.quotation.fixed' | translate}}</option>
                                  <option value="RCU">{{'gis.quotation.recursive' | translate}}</option>
                                  <option value="RT">{{'gis.quotation.rate_table' | translate}}</option>
                                  <option value="ARG"> {{'gis.quotation.absolute_range' | translate}}</option>
                                  <option value="SRG">{{'gis.quotation.step_ranges' | translate}}</option>
                                </select>

                              </div>
                            </div>
                      </div>
                      <div class="col-xl-6">
                          <div class="mb-3 row">
                              <label for="minmax-buttons" class="col-5 col-form-label" id="scheduleLabel">{{'gis.quotation.premium_type' | translate}}:</label>
                              <div class="col-7">
                                <select class="form-select form-control-sm mb-1" id="scheduleInput" formControlName="description" >

                                </select>

                                </div>
                              </div>
                          </div>
                    </div>
                    <!-- **ROW 3** -->
                    <div class="row" id="scheduleRows">
                    <div class="col-xl-6">
                        <div class="mb-3 row">
                            <label for="minmax-buttons" class="col-5 col-form-label" id="scheduleLabel">{{'gis.quotation.free_limit' | translate}} :</label>
                            <div class="col-7">
                              <input type="number" id="scheduleInput" class="form-control form-control-sm mb-1" formControlName="freeLimit" >
                            </div>
                          </div>
                    </div>
                    <div class="col-xl-6">
                        <div class="mb-3 row">
                            <label for="minmax-buttons" class="col-5 col-form-label" id="scheduleLabel">{{'gis.quotation.limit_amount' | translate}}:</label>
                            <div class="col-7">
                                <input type="number" id="scheduleInput" class="form-control form-control-sm mb-1" formControlName="limitAmount">                             </div>
                            </div>
                        </div>
                    </div>
                    <!-- **ROW 4** -->
                    <div class="row" id="scheduleRows">
                      <div class="col-xl-6">
                          <div class="mb-3 row">
                              <label for="minmax-buttons" class="col-5 col-form-label" id="scheduleLabel">{{'gis.quotation.group' | translate}}:</label>
                              <div class="col-7">
                                <input type="number" id="scheduleInput" class="form-control form-control-sm mb-1" formControlName="calcGroup" >
                              </div>
                            </div>
                      </div>
                      <div class="col-xl-6">
                          <div class="mb-3 row">
                              <label for="minmax-buttons" class="col-5 col-form-label" id="scheduleLabel">{{'gis.quotation.premium_rate' | translate}}:</label>
                              <div class="col-7">
                                  <input type="number" id="scheduleInput" class="form-control form-control-sm mb-1" formControlName="premiumRate">

                                </div>
                              </div>
                          </div>
                    </div>
                    <!-- **ROW 5** -->
                    <div class="row" id="scheduleRows">
                      <div class="col-xl-6">
                        <div class="mb-3 row">
                          <label for="minmax-buttons" class="col-5 col-form-label" id="scheduleLabel">{{'gis.quotation.div_by' | translate}}:</label>
                          <div class="col-7">
                            <input type="number"  id="scheduleInput" class="form-control form-control-sm mb-1" formControlName="rateDivisionFactor">
                          </div>
                        </div>
                      </div>
                      <div class="col-xl-6">
                        <div class="mb-3 row">
                          <label for="minmax-buttons" class="col-5 col-form-label" id="scheduleLabel">{{'gis.quotation.multi_rate' | translate}} :</label>
                          <div class="col-7">
                            <input type="number"  id="scheduleInput" class="form-control form-control-sm mb-1" formControlName="multiplierRate">
                          </div>
                        </div>
                      </div>
                    </div>
                      <!-- **ROW 6** -->
                      <div class="row" id="scheduleRows">
                        <div class="col-xl-6">
                          <div class="mb-3 row">
                            <label for="minmax-buttons" class="col-5 col-form-label" id="scheduleLabel">{{'gis.quotation.div_multi_by' | translate}}:</label>
                            <div class="col-7">
                              <input type="number"  id="scheduleInput" class="form-control form-control-sm mb-1" formControlName="multiplierDivisionFactor">
                            </div>
                          </div>
                        </div>
                        <div class="col-xl-6">
                          <div class="mb-3 row">
                            <label for="minmax-buttons" class="col-5 col-form-label" id="scheduleLabel">{{'gis.quotation.premium' | translate}}:</label>
                            <div class="col-7">
                              <input type="number"  id="scheduleInput" class="form-control form-control-sm mb-1" formControlName="premiumAmount" >
                            </div>
                          </div>
                        </div>
                      </div>
                       <!-- **ROW 7** -->
                       <div class="row" id="scheduleRows">
                        <div class="col-xl-6">
                          <div class="mb-3 row">
                            <label for="minmax-buttons" class="col-5 col-form-label" id="scheduleLabel">{{'gis.quotation.minimum_premium' | translate}}:</label>
                            <div class="col-7">
                              <input type="number"  id="scheduleInput" class="form-control form-control-sm mb-1" formControlName="description">
                            </div>
                          </div>
                        </div>
                        <div class="col-xl-6">
                          <div class="mb-3 row">
                            <label for="minmax-buttons" class="col-5 col-form-label" id="scheduleLabel">{{'gis.quotation.accumulation' | translate}}:</label>
                            <div class="col-7">
                              <input type="number"  id="scheduleInput" class="form-control form-control-sm mb-1" formControlName="description" >
                            </div>
                          </div>
                        </div>
                      </div>
                       <!-- **ROW 8** -->
                       <div class="row" id="scheduleRows">
                        <div class="col-xl-6">
                          <div class="mb-3 row">
                            <label for="minmax-buttons" class="col-5 col-form-label" id="scheduleLabel">{{'gis.quotation.remarks' | translate}}:</label>
                            <div class="col-7">
                              <input type="text"  id="scheduleInput" class="form-control form-control-sm mb-1" formControlName="description">
                            </div>
                          </div>
                        </div>
                        <div class="col-xl-6">
                          <div class="mb-3 row">
                            <label for="minmax-buttons" class="col-5 col-form-label" id="scheduleLabel">{{'gis.quotation.declaration' | translate}}:</label>
                            <div class="col-7">
                              <select class="form-select form-control-sm mb-1" id="scheduleInput" formControlName="description" >
                                <option ></option>
                                <option >Yes{{'gis.policy.yes' | translate}}</option>
                                <option >No{{'gis.policy.no' | translate}}</option>
                              </select>
                            </div>
                          </div>
                        </div>
                      </div>
                       <!-- **ROW 9** -->
                       <div class="row" id="scheduleRows">
                        <div class="col-xl-6">
                          <div class="mb-3 row">
                            <label for="minmax-buttons" class="col-5 col-form-label" id="scheduleLabel">{{'gis.quotation.compute' | translate}}:</label>
                            <div class="col-7">
                              <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault" formControlName="compute">
                            </div>
                          </div>
                        </div>
                        <div class="col-xl-6">

                        </div>
                      </div>


                </form>
                <div class="row mt-3 mb-2">
                  <div class="col-6 ">
                  </div>
                  <div class="col-6 d-flex justify-content-end">
                    <!-- <button type="button" class="btn btn-primary"  data-bs-dismiss="modal" (click)="updateRiskSection()" >Save Details</button> -->
                    <button type="button" class="btn btn-primary" (click)="onSaveDetailsClick()"> {{'gis.quotation.save_details' | translate}}</button>

                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Delete Section Modal -->
        <div class="modal fade" id="deleteSection" tabindex="-1" aria-labelledby="deleteSectionLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered ">
            <div class="modal-content">
              <!-- <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div> -->
              <div class="modal-body">
                <p class="d-flex justify-content-center" id="deleteLabel">{{'gis.quotation.are_you_sure_you_want_to_delete_section' | translate}}?</p>
                <div class="row d-flex justify-content-center">
                  <button type="button" class="btn btn-primary " id="delete" data-bs-dismiss="modal">{{'gis.quotation.yes_delete' | translate}}</button>
                </div><br>
                <div class="row d-flex justify-content-center">
                  <button type="button" class="btn btn-outline-primary" id="delete" data-bs-dismiss="modal"> {{'gis.quotation.no_im_not' | translate}}</button>
                </div><br>
              </div>
            </div>
          </div>
        </div>

        <p-table [value]="sectionDetails" [tableStyle]="{'min-width': '300px'}" selectionMode="single" [(selection)]="selectedSection" dataKey="code" editMode="row">
          <ng-template pTemplate="header">
            <tr>
              <th class="flexible-header">{{'gis.quotation.group' | translate}}</th>
              <th class="flexible-header"> {{'gis.quotation.row_num' | translate}}</th>
              <th class="flexible-header"> {{'gis.quotation.short_description' | translate}}</th>
              <th class="flexible-header">{{'gis.quotation.description' | translate}}</th>
              <th class="flexible-header">{{'gis.quotation.limit_amount' | translate}}</th>
              <th class="flexible-header"> {{'gis.quotation.premium_rate' | translate}}</th>
              <th class="flexible-header">{{'gis.quotation.rate_type' | translate}}</th>
              <th class="flexible-header"></th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-sectionArray let-editing="editing" let-ri="rowIndex">
            <tr (click)="onSelectSection(sectionArray)" [pEditableRow]="sectionArray">
              <td class="flexible-header">{{sectionArray.calcGroup}}</td>
              <td class="flexible-header">{{sectionArray.rowNumber}}</td>
              <td class="flexible-header">{{sectionArray.sectionShortDescription}}</td>
              <td class="flexible-header">{{sectionArray.description}}</td>
              <td class="flexible-header">{{sectionArray.limitAmount}}</td>
              <td class="flexible-header">{{sectionArray.premiumRate}}</td>
              <td class="flexible-header">{{sectionArray.rateType}}</td>
              <td class="flexible-header">
                <!-- Edit Button -->
                <button pButton pRipple type="button" pInitEditableRow class="p-button-rounded p-button-text"
                        (click)="onEditButtonClick(sectionArray)">
                  <i class="fas fa-pencil"></i>
                </button>
              </td>
            </tr>
          </ng-template>
        </p-table>

    </div>
      </div>
    </div>
     <!-- Risk Clauses card -->
  <div class="card mb-4">
    <div class="card-body">
      <div>
        <div class="row">
          <div class="col-4">
            <strong>{{'gis.quotation.risk_clauses' | translate}}</strong>
          </div>
          <div class="col-8 d-flex justify-content-end">
            <button type="button" id="icon" class="btn btn-primary" data-bs-toggle="collapse" data-bs-target="#riskClauses" aria-expanded="false" aria-controls="riskClauses"
            (click)="toggleClausesopen()">
              <i class="fa-solid fa-chevron-down"></i>
            </button>
          </div>
        </div>

      </div>
      <div [@slideInOut]="isClausesOpen ? 'open' : 'closed'" class="mt-2">

            <p-table
                [value]="selectedClauseList"
                dataKey="code"
                editMode="row"
                [tableStyle]="{'min-width': '50rem'}"
                responsiveLayout="scroll"
                class='ui-datatable'
                [autoLayout]="true"
                [paginator]="selectedClauseList?.length > 5" [rows]="5"
                [showCurrentPageReport]="selectedClauseList?.length > 5"
                currentPageReportTemplate=" {first} - {last} of {totalRecords}">
                <ng-template pTemplate="header">
                  <tr>
                            <th style="width: 5%;padding-right: 50px;">{{'gis.quotation.select' | translate}}</th>
                            <th style="width: 25%;padding-right: 50px;">{{'gis.quotation.heading' | translate}}</th>
                            <th style="width: 40%;">{{'gis.quotation.wording' | translate}}</th>
                            <th style="width: 5%;"></th>
                            <th style="width: 5%;">{{'gis.quotation.editable' | translate}}</th>
                  </tr>
                </ng-template>
                <ng-template pTemplate="body" let-selectedClauseList let-editing="editing" let-ri="rowIndex">
                    <tr (click)="onSelectRiskClauses(selectedClauseList)" [pEditableRow]="selectedClauseList">
                          <td>
                              <p-tableCheckbox [value]="selectedClauseList"></p-tableCheckbox>
                          </td>

                          <td
                              style=" white-space: nowrap;
                              overflow: hidden;
                              text-overflow: ellipsis;
                              overflow-y: auto;
                              max-width: 250px;" pTooltip="{{selectedClauseList.heading }}" tooltipPosition="top">
                              <p-cellEditor>
                                  <ng-template pTemplate="input" *ngIf="selectedClauseList.is_editable  === 'Y'">
                                      <input pInputText type="text" [(ngModel)]="selectedClauseList.heading" class="form-control form-control-sm" [ngModelOptions]="{standalone: true}">
                                  </ng-template>
                                  <ng-template pTemplate="output">
                                      {{selectedClauseList.heading}}
                                  </ng-template>
                              </p-cellEditor>
                          </td>
                          <td style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width:300px; overflow-y: auto;">
                            <p-cellEditor>
                                <ng-template pTemplate="input">
                                    <input pInputText type="text" [(ngModel)]="selectedClauseList.wording" class="form-control form-control-sm" [ngModelOptions]="{standalone: true}">
                                </ng-template>
                                <ng-template pTemplate="output">
                                    {{selectedClauseList.wording}}
                                </ng-template>
                                <!-- Helper icon added next to the wording column -->
                            </p-cellEditor>
                          </td>
                          <td>
                            <button pButton pRipple type="button" (click)="openHelperModal(selectedClauseList)" icon="pi pi-info-circle" class="p-button-rounded p-button-text"></button>
                          </td>
                          <td *ngIf="selectedClauseList.is_editable  !== 'Y'" style="padding-left: 24px;" > -- </td>
                          <td *ngIf="selectedClauseList.is_editable  === 'Y'">
                              <div class="flex align-items-center justify-content-center gap-2">
                                  <button *ngIf="!editing" pButton pRipple type="button" pInitEditableRow  icon="pi pi-pencil" class="p-button-rounded p-button-text"></button>
                                  <button *ngIf="editing" pButton pRipple  type="button" pSaveEditableRow icon="pi pi-check" class="p-button-rounded p-button-text p-button-success mr-2"></button>
                                  <button *ngIf="editing" pButton pRipple type="button" pCancelEditableRow icon="pi pi-times" class="p-button-rounded p-button-text p-button-danger"></button>
                               </div>
                          </td>
                    </tr>
                    <!-- Modal for each row -->
                    <p-dialog [(visible)]="selectedClauseList.showHelperModal" [modal]="false" [style]="{ 'width': '700px'}">
                      <ng-container *ngIf="selectedClauseList">
                          <div pResizable [ngStyle]="{'min-width.px': 200, 'min-height.px': 150}" (onResize)="onResize($event)">
                              <p>{{ selectedClauseList.wording }}</p>
                          </div>
                      </ng-container>
                    </p-dialog>
                  </ng-template>
              </p-table>

      </div>
    </div>
  </div>

  <div class="row mb-4" >
    <div class="col-6">
      <button type="button" class="btn btn-link" (click)="backLink()">{{'gis.quotation.back' | translate}}</button>
    </div>
    <div class="col-6 d-flex justify-content-end">
      <div class="row">
        <div class="col-8 d-flex justify-content-end">
          <button type="button" id="nextButton" class="btn btn-primary">{{'gis.quotation.assign_task' | translate}}</button>
        </div>
        <div class="col-4 d-flex justify-content-end">
          <button type="button" id="nextButton" class="btn btn-primary" (click)="finish()">{{'gis.quotation.next' | translate}}</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- apps-fileview.texmex_20250213.01_p1
risk-section-details.component.html
Displaying risk-section-details.component.html. -->
