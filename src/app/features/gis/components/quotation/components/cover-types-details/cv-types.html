<div class="container">
    <p class="titleMain mt-3">Quotations: Quotation Data Entry</p>
    <app-stepper [currentStep]="1" [stepperData]="steps"></app-stepper>
    <div class="container  mx-2 mt-n1">
        <div class="card">
            <div class="card-body">
                <div *ngFor="let coverType of coverTypes" class="cover-type">
                    <p class="title"> {{ coverType.name}}</p>
                    <div class="row">
                         <!-- Basic Premium section -->
                        <div class="col-4">
                            <p class="title2"> Basic Premium</p>
                            <!-- ROW 1 -->
                            <div class="row">
                                <div class="col-6">
                                    <p class="details-label">Value of vehicle</p>
                                </div>
                                <div class="col-6">
                                    <p class="details-label">{{ coverType.basicPremium.valueOfVehicle }}</p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-6">
                                    <p class="details-label">Premium</p>
                                </div>
                                <div class="col-6">
                                    <p class="details-label">{{ coverType.basicPremium.premium }}</p>
                                </div>
                            </div>
                        </div>
                       <!-- Levies and Taxes section -->
                        <div class="col-4">
                            <p class="title2">Levies and taxes (KES)</p>
                            <div *ngFor="let levyTax of coverType.leviesTaxes" class="levy-tax">
                            <div class="row">
                                <div class="col-6">
                                <p class="details-label">{{ levyTax.name }}</p>
                                </div>
                                <div class="col-6">
                                <p class="details-label">{{ levyTax.amount }}</p>
                                </div>
                            </div>
                            </div>
                        </div>
                        <!-- Total Payable Premium section -->
                        <div class="col-4">
                            <p class="title2">Total payable premium</p>
                            <p class="payable-premium">{{ coverType.totalPayablePremium }}</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-4">
                            <div class="row">
                                 <!-- Add more benefits Section -->
                                <div class="col-6" *ngIf="!isCollapsibleOpen">
                                    <!-- Button trigger modal -->
                                    <button type="button" class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#addMoreBenefits">Add more benefits</button>
                                    <!-- Modal -->
                                    <div class="modal fade" id="addMoreBenefits" tabindex="-1" aria-labelledby="addMoreBenefitsLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered">
                                          <div class="modal-content ps-4 pt-4 pe-4">
                                              <p class="modal-title mb-3" id="addMoreBenefitsLabel">Additional benefit details</p>
                                              <p-table [value]="coverType.additionalBenefits" [tableStyle]="{ 'max-width': '608px' }">
                                                <ng-template pTemplate="header">
                                                    <tr>
                                                        <th>Benefit</th>
                                                        <th>Limit</th>
                                                        <th>Value</th>
                                                    </tr>
                                                </ng-template>
                                                <ng-template pTemplate="body"  let-benefit>
                                                    <tr>
                                                        <td>{{ benefit.name }}</td>
                                                        <td>{{ benefit.limit }}</td>
                                                        <td>{{ benefit.value }}</td>
                                                    </tr>
                                                </ng-template>
                                                <ng-template pTemplate="emptymessage">
                                                    <tr>
                                                      <td colspan="1"></td>
                                    
                                                      <td colspan="10" style="padding:50px;padding-left: 50px;" id="empty">No data to display.</td>
                                                    </tr>
                                    
                                                  </ng-template>
                                            </p-table>
                                            <div class="row mt-3 mb-3">
                                                <div class="col-6">
                                                    <button type="button" data-bs-dismiss="modal" class="btn btn-link"> Back</button>
                                                </div>
                                                <div class="col-6">
                                                    <button class="btn btn-primary" type="submit">Update quote</button>
                                                </div>
        
                                            </div>
                                           
                                          </div>
                                        </div>
                                    </div>
                                </div>  
                                 <!-- View Cover Button-->
                                <div class="col-6" *ngIf="!isCollapsibleOpen">
                                    <p>
                                        <a class="btn btn-link" (click)="toggleCollapsible()">
                                            View cover details
                                        </a>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-4"></div>
                        <div class="col-4 ">
                            <div class="row">
                                <!-- Share Quote Section -->
                                <div class="col-5" *ngIf="!isCollapsibleOpen">
                                    <button type="button" class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#shareQuote">Share quote</button>
                                  </div>
                                  <div  class="modal fade"  id="shareQuote" tabindex="-1" aria-labelledby="shareQuote" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered">
                                      <div class="modal-content  ps-4 pt-4 pe-4">
    
                                          <div class="row">
                                            <div class="col-3">                                      
                                                <input type="radio" id="shareRadio" name="shareOption" [(ngModel)]="selectedOption" value="email" /> 
                                                <span class="ps-2" [ngClass]="{ 'bold-label': selectedOption === 'email' }">Email</span>
                                            </div>
                                            <div class="col-3">                                      
                                                <input type="radio"  id="shareRadio" name="shareOption" [(ngModel)]="selectedOption" value="sms" /> 
                                                <span class="ps-2" [ngClass]="{ 'bold-label': selectedOption === 'sms' }">SMS</span>
                                            </div>
                                            <div class="col-4">
                                                <input type="radio"  id="shareRadio" name="shareOption" [(ngModel)]="selectedOption" value="whatsapp" /> 
                                                <span class="ps-2" [ngClass]="{ 'bold-label': selectedOption === 'whatsapp' }">WhatsApp</span>
    
                                            </div>
                                          </div>
                                  
                                          <div class="form-group mt-3">
                                            <label class="mb-3" for="clientName" id="shareLabel">Client Name</label>
                                            <input type="text"  [(ngModel)]="clientName" id="clientName" class="form-control" />
                                          </div>
                                          <div class="form-group">
                                            <label class="mb-3 mt-3"  id="shareLabel" [textContent]="selectedOption === 'email' ? 'Email' : 'Phone Number'"></label>
                                            <input id="shareInput" [type]="selectedOption === 'email' ? 'email' : 'tel'" [(ngModel)]="contactValue" class="form-control" />
                                          </div>
                                        <div class="row mt-4 mb-4">
                                            <div class="col-6"></div>
                                            <div class="col-6 d-flex justify-content-end">                                      
                                                <button type="button" class="btn btn-primary" id="sendQoute" data-bs-dismiss="modal" >Send</button>
                                            </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                 <!-- Select Cover Button --> 
                                <div class="col-5 " *ngIf="!isCollapsibleOpen">
                                    <button class="btn btn-primary" type="submit">Select cover</button>
                                </div>
                            </div>
                        </div>
                    </div>
                     <!-- Collapsible View Cover Details Section -->
           <div *ngIf="isCollapsibleOpen" class="mt-3 MB-2">
            <p class="title2"> Excess applicable under the cover</p>
            <div class="row">
                <div class="col-8">
                    <div class="row">
                        <div class="col-6">
                            <p class="details-label">Theft with standard anti-theft device</p>
                        </div>
                        <div class="col-6">
                            <p class="details-label">10% of vehicle value minimum of KshS 20,000</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <p class="details-label">Theft without anti-theft device</p>
                        </div>
                        <div class="col-6">
                            <p class="details-label">20% of vehicle value minimum of KshS 20,000</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <p class="details-label">Third-party excess</p>
                        </div>
                        <div class="col-6">
                            <p class="details-label">Nil</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <p class="details-label">Own damage</p>
                        </div>
                        <div class="col-6">
                            <p class="details-label">2.5% of vehicle value minimum of KshS 20,000</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <p class="details-label">Theft with satellite tracking</p>
                        </div>
                        <div class="col-6">
                            <p class="details-label">2.5% of vehicle value minimum of KshS 20,000</p>
                        </div>
                    </div>
                </div>
            </div>  
            <p class="title2 mt-2"> Cover details</p>
            <div class="row">
                <div class="col-8">
                    <div class="row">
                        <div class="col-6">
                            <p class="details-label" style="font-weight: 500;">Details</p>
                        </div>
                        <div class="col-6">
                            <p class="details-label" style="font-weight: 500;">Benefits (KES)</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <p class="details-label">Own damage</p>
                        </div>
                        <div class="col-6">
                            <p class="details-label">Covered</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <p class="details-label">Fire and theft</p>
                        </div>
                        <div class="col-6">
                            <p class="details-label">Covered</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <p class="details-label">Third party emergency medical expenses</p>
                        </div>
                        <div class="col-6">
                            <p class="details-label">30,000</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <p class="details-label">Agreed value on vehicle valuation</p>
                        </div>
                        <div class="col-6">
                            <p class="details-label">Covered</p>
                        </div>
                    </div>
                </div>
            </div>      
            <!-- Buttons Container -->
            <div class="mt-3">
                <div class="row">
                    <div class="col-4">
                         <!-- Close Button -->
                        <button type="button" class="btn btn-link" (click)="toggleCollapsible()">
                            Close
                        </button>
                    </div>
                    <div class="col-4"></div>
                    <div class="col-4">
                        <div class="row">
                            <div class="col-5">
                                <button type="button" class="btn btn-outline-primary">Share quote</button>
                            </div>
                            <div class="col-5">
                                <button class="btn btn-primary" type="submit">Select cover</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
                </div>

            </div>
        </div>
    </div>
</div>