<div class="mx-4 mt-3">
    <p class="title">Quotations:Quotation Summary </p>
    <app-stepper [currentStep]="5" [stepperData]="steps"></app-stepper>


    <div class="card mb-3">
       <div class="header mx-4 mt-2 mb-2">
        <ul class="nav">
            <li class="nav-item">
              <a class="nav-link sub-title active" data-bs-toggle="tab" id="nav-summary-tab"  aria-controls="nav-summary" data-bs-target="#nav-summary">Quotation Details</a>
            </li>
            <li class="nav-item">
              <a class="nav-link sub-title" data-bs-toggle="tab"  id="nav-authorization-tab" aria-controls="nav-authorization" data-bs-target="#nav-authorization">Authorization & Reports </a>
            </li>
          </ul>
      
       </div>
          
    
    </div>

    <div class="tab-content" id="nav-tabContent">
        <div class="tab-pane fade show active" id="nav-summary" role="tabpanel" aria-labelledby="nav-summary-tab" tabindex="0">
            <div class="spinner" style="position: relative">
                <ngx-spinner type="ball-clip-rotate-multiple" [fullScreen]="true" color="#00529B" size="large" bdColor = "rgba(255, 255, 255, 0.966)"></ngx-spinner>
              </div>
            <!-- Quotation Details Card -->
            <div class="card mb-4">
                <div class="card-body">
                  
                    <p class="card-title mb-4">Details</p>
                      
                       <div class="row">
                        <div class="col-md-4">
                            <div class="row">
                                <div class="col-6">
                                    <p class="label">Quotation Number</p>
                                </div>
                                <div class="col-6">
                                    <p class="content">{{quotationNumber}}</p>
                                </div>
                            </div>
                          
                        </div>
                        <div class="col-md-4">
                            <div class="row">
                                <div class="col-6">
                                    <p class="label">Client</p>
                                </div>
                                <div class="col-6">
                                    <p class="content" >{{ clientDetails.firstName+" "+clientDetails.lastName }}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="row">
                                <div class="col-6">
                                    <p class="label">Agent</p>
                                </div>
                                <div class="col-6">
                                    <p class="content">{{agents.name}}</p>
                                </div>
                            </div>
                        </div>
                        </div>
        
                        <div class="row">
                            <div class="col-md-4">
                                <div class="row">
                                    <div class="col-6">
                                        <p class="label">Branch</p>
                                    </div>
                                    <div class="col-6">
                                        <p class="content">{{branch.name}}</p>
                                    </div>
                                </div>
                              
                            </div>
                            <div class="col-md-4">
                                <div class="row">
                                    <div class="col-6">
                                        <p class="label">Cover From</p>
                                    </div>
                                    <div class="col-6">
                                        <p class="content">{{quotationDetails.withEffectiveFromDate}}</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="row">
                                    <div class="col-6">
                                        <p class="label">Cover To</p>
                                    </div>
                                    <div class="col-6">
                                        <p class="content">{{quotationDetails.withEffectiveToDate}}</p>
                                    </div>
                                </div>
                            </div>
                            </div>
        
        
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="row">
                                        <div class="col-6">
                                            <p class="label">Currency</p>
                                        </div>
                                        <div class="col-6">
                                            <p class="content">{{quotationView.currency}}</p>
                                        </div>
                                    </div>
                                  
                                </div>
                                <div class="col-md-4">
                                    <div class="row">
                                        <div class="col-6">
                                            <p class="label">Prosper</p>
                                        </div>
                                        <div class="col-6">
                                            <p class="content"> {{quotationDetails.proInterfaceType}}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="row">
                                        <div class="col-6">
                                            <p class="label">Introducer</p>
                                        </div>
                                        <div class="col-6">
                                            <p class="content">{{quotationDetails.introducerCode}}</p>
                                        </div>
                                    </div>
                                </div>
                                </div>
        
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="row">
                                            <div class="col-6">
                                                <p class="label">Expiry Date</p>
                                            </div>
                                            <div class="col-6">
                                                <p class="content">{{quotationDetails.expiryDate}}</p>
                                            </div>
                                        </div>
                                      
                                    </div>
                                    <div class="col-md-4">
                                        <div class="row">
                                            <div class="col-6">
                                                <p class="label">Status</p>
                                            </div>
                                            <div class="col-6">
                                                <p class="content">{{quotationView.status}}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="row">
                                            <div class="col-6">
                                                <p class="label">Source</p>
                                            </div>
                                            <div class="col-6">
                                                <p class="content">{{quotationView.source.description}}</p>
                                            </div>
                                        </div>
                                    </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="row">
                                                <div class="col-6">
                                                    <p class="label">Premium</p>
                                                </div>
                                                <div class="col-6">
                                                    <p class="content" *ngIf="premium"  >{{premium.premiumAmount| number:'1.2-2'}}</p>
                                                    <p class="content" *ngIf="!premium"  >0.00</p>
                                                </div>
                                            </div>
                                          
                                        </div>
                                        <div class="col-md-4">
                                            <div class="row">
                                                <div class="col-6">
                                                    <p class="label">Sum Insured</p>
                                                </div>
                                                <div class="col-6">
                                                    <p class="content">{{sumInsured| number:'1.2-2' }}</p>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- <div class="col-md-4">
                                            <div class="row">
                                                <div class="col-6">
                                                    <p class="label">Likelihood</p>
                                                </div>
                                                <div class="col-6">
                                                    <p class="content"></p>
                                                </div>
                                            </div>
                                        </div> -->
                                        </div>
                                   
        
                                    <div class="row mb-3">
                                        <div class="col-md-4">
                                            <div class="row">
                                                <div class="col-6">
                                                    <p class="label">Internal Comments</p>
                                                </div>
                                                <div class="col-6">
                                                    <p class="content">{{quotationDetails.internalComments}}</p>
                                                </div>
                                            </div>
                                          
                                        </div>
                                        <div class="col-md-4">
                                            <div class="row">
                                                <div class="col-6">
                                                    <p class="label">External Comments</p>
                                                </div>
                                                <div class="col-6">
                                                    <p class="content">{{quotationDetails.comments}}</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                           
                                        </div>
                                        </div>
        
        
                            <p class="cancel float-start" (click)="cancelQuotation()">Cancel Quotation</p>
                            <div class="float-end">
                                <button class="btn btn-outline-primary" style="margin-right: 10px;" (click)="editDetails()">Edit Details</button>
                                <button class="btn btn-primary" (click)="computePremium()">Compute Premium</button>
                            </div>   
                        </div>
                  
            </div>    
            <!-- Product Details Card -->
            <div class="card mb-4">  
                <div class="card-body">
                    <div class="row">
                        <div class="col-4">
                            <p class="card-title mt-2" data-bs-toggle="collapse" data-bs-target="#productDetails" (click)="toggleProductDetails()">Product Details</p>
                        </div>
                        <div class="col-8 d-flex justify-content-end">
                            <div class="row">
                                <div class="col-sm-4" *ngIf="isCollapsibleOpen">
                                    <button type="button" id="icon" class="btn btn-primary"  title="Add">
                                        <i class="fa-solid fa-plus"></i>
                                    </button>
                                </div>
                                <div class="col-sm-4" *ngIf="isCollapsibleOpen">
                                <button type="button" id="icon" class="btn btn-primary"  title="Edit">
                                    <i class="fa-solid fa-pencil"></i>
                                </button>
                                </div>
                                <div class="col-sm-4" *ngIf="isCollapsibleOpen">
                                <button type="button" id="icon" class="btn btn-danger me-2"  title="Delete">
                                    <i class="fa-solid fa-trash-can"></i>
                                </button>
                                </div>
                                <div class="col-sm-4" *ngIf="!isCollapsibleOpen">
                                <button type="button" id="icon" class="btn btn-primary" data-bs-toggle="collapse" data-bs-target="#productDetails" (click)="toggleProductDetails()" [attr.aria-expanded]="!isCollapsibleOpen">
                                    <i class="fa-solid fa-chevron-down"></i>
                                </button>
                                </div>
                            </div>            
                        </div>
                    </div>
                              <div class="collapse mt-4" id="productDetails">
                                <p-table [value]="productDetails" [tableStyle]="{ 'min-width': '50rem' }"  styleClass="p-datatable-sm">
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th>Product</th>
                                        <th>Cover From</th>
                                        <th>Cover To</th>
                                        <th>Premium</th>
                                        <th>Commission</th>
                                       <th>Binder</th>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-data>
                                    <tr (click)="getLimits(data.code);getProductSubclass(data.code)">  
                                        <!-- <td>{{data.productShortDescription}}</td>
                                <td>{{data.wef}}</td>
                                <td>{{data.wet}}</td>
                                <td>{{data.premium}}</td>
                                <td>{{data.commission}}</td>
                                <td>{{data.binder}}</td> -->
                                <td>{{data.description}}</td>
                                <td>{{data.withEffectFrom}}</td>
                                <td>{{data.withEffectTo}}</td>
                                <td>{{data.minimumPremium}}</td>
                                <td>{{data.commissionRate}}</td>
                                <td>{{data.doesCashBackApply}}</td>
                            </tr>
                        </ng-template>
                        </p-table>
                        <br>
                        <ul class="nav nav-underline mb-4">
                            <li class="nav-item">
                              <a class="nav-link active" aria-current="page" data-bs-toggle="tab" data-bs-target="#nav-clauses">Clauses</a>
                            </li>
                            <br>
                            <li class="nav-item">
                              <a class="nav-link" data-bs-toggle="tab" data-bs-target="#nav-taxes">Taxes</a>
                            </li>
                            <br>
                            <li class="nav-item">
                              <a class="nav-link" data-bs-toggle="tab" data-bs-target="#nav-limits">Limits of Liability</a>
                            </li>
                            <br>
                            <li class="nav-item">
                                <a class="nav-link" data-bs-toggle="tab" data-bs-target="#nav-similarities">Similar Quotes</a>
                              </li>
                          </ul>
                          <div class="tab-content mb-4" id="nav-tabContent">
                            <div class="tab-pane fade show active" id="nav-clauses" role="tabpanel" aria-labelledby="nav-clauses" tabindex="0">

                                <p-table
                                 [value]="clauses" 
                                 [tableStyle]="{ 'min-width': '50rem' }"  
                                 styleClass="p-datatable-sm"
                                 [paginator]="true"
                                 [rows]="5"
                                 [showCurrentPageReport]="true"
                                 currentPageReportTemplate="{first} to {last} of {totalRecords}">
                                    <ng-template pTemplate="header">
                                        <tr>
                                            <th>ID</th>
                                            <th>Heading</th>
                                            <th>Wording</th>
                                           
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="body" let-data>
                                        <tr>
                                          <td>{{data.shortDescription}}</td>
                                          <td>{{data.heading}}</td>
                                          <td style=" white-space: nowrap;
                                          overflow: hidden;
                                          text-overflow: ellipsis;
                                          max-width:300px;
                                          overflow-y: auto;">{{data.wording}}</td>
                                        </tr>
                                    </ng-template>
                                    </p-table>
                            </div>
                            <div class="tab-pane fade" id="nav-taxes" role="tabpanel" aria-labelledby="nav-taxes" tabindex="0">
                                <p-table [value]="taxDetails" [tableStyle]="{ 'min-width': '50rem' }"  styleClass="p-datatable-sm">
                                    <ng-template pTemplate="header">
                                        <tr>
                                            <th>Amount</th>
                                            <th>Description</th>
                                            <th>Quotation Rate</th>
                                           <th>Rate Type</th>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="body" let-data>
                                        <tr>
                                          <td>{{data.amount}}</td>
                                          <td>{{data.description}}</td>
                                          <td>{{data.quotationRate}}</td>
                                          <td>{{data.rateType}}</td>
                                        </tr>
                                    </ng-template>
                                    </p-table>
                            </div>
                            <div class="tab-pane fade " id="nav-limits" role="tabpanel" aria-labelledby="nav-limits" tabindex="0">
                                <div class="row">
                                    <div class="col">
                                        <div class="card" style="border:0px">
                                            <div class="card-body">
                                                <h6>Product  Subclass </h6>
                                                <div class="listing">
                                                <ul>
                                                    <li
                                                      *ngFor="let data of productSubclass"
                                                      
                                                    >
                                                      {{ data.description }}
                                                    </li>
                                                </ul>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="col">
                                        <div class="card" style="border:0px">
                                            <div class="card-body">
                                                <p-table [value]="limitsList" [tableStyle]="{ 'min-width': '50rem' }"  styleClass="p-datatable-sm">
                                                    <ng-template pTemplate="header">
                                                        <tr>
                                                            <th>Narration</th>
                                                            <th>Scl Desc</th>
                                                            <th>Value</th>
                                                           
                                                        </tr>
                                                    </ng-template>
                                                    <ng-template pTemplate="body" let-data>
                                                        <tr>
                                                          <td>{{data.narration}}</td>
                                                        </tr>
                                                    </ng-template>
                                                    </p-table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                               
                            </div>
                            <div class="tab-pane fade" id="nav-similarities" role="tabpanel" aria-labelledby="nav-similarities" tabindex="0">
                                <p-table [value]="" [tableStyle]="{ 'min-width': '50rem' }"  styleClass="p-datatable-sm">
                                    <ng-template pTemplate="header">
                                        <tr>
                                            <th>Amount</th>
                                            <th>Description</th>
                                            <th>Quotation Rate</th>
                                           <th>Rate Type</th>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="body" let-data>
                                        <tr>
                                          
                                        </tr>
                                    </ng-template>
                                    </p-table>
                            </div>
                          </div>
                      </div>
                      </div>
                      
            </div>
            <!-- Risk Details Card -->
            <div class="card mb-4">
                <div class="card-body"> 
                    <div class="row">
                        <div class="col-4">
                            <p class="card-title mt-2" data-bs-toggle="collapse" data-bs-target="#riskDetails" (click)="toggleRiskDetails()">Risk Details</p>
                        </div>
                        <div class="col-8 d-flex justify-content-end">
                            <div class="row">
                                <div class="col-4" *ngIf="isRiskCollapsibleOpen">
                                    <button type="button" id="icon" class="btn btn-primary"  title="Add">
                                        <i class="fa-solid fa-plus"></i>
                                    </button>
                                    </div>
                                <div class="col-4" *ngIf="isRiskCollapsibleOpen">
                                <button type="button" id="icon" class="btn btn-primary"  title="Edit">
                                    <i class="fa-solid fa-pencil"></i>
                                </button>
                                </div>
                                <div class="col-4" *ngIf="isRiskCollapsibleOpen">
                                <button type="button" id="icon" class="btn btn-danger me-2"  title="Delete">
                                    <i class="fa-solid fa-trash-can"></i>
                                </button>
                                </div>
                                <div class="col-4" *ngIf="!isRiskCollapsibleOpen">
                                <button type="button" id="icon" class="btn btn-primary" data-bs-toggle="collapse" data-bs-target="#riskDetails" (click)="toggleRiskDetails()" [attr.aria-expanded]="!isRiskCollapsibleOpen">
                                    <i class="fa-solid fa-chevron-down"></i>
                                </button>
                                </div>
                            </div>
                                
                        </div>
                    </div>
                          
                          <div class="collapse mt-4" id="riskDetails">
                            <p-table [value]="riskDetails" [tableStyle]="{ 'min-width': '50rem' }" class='ui-datatable'  styleClass="p-datatable-striped"  styleClass="p-datatable-sm">
                            <ng-template pTemplate="header">
                                <tr>
                                    <th>ID</th>
                                    <th>Description</th>
                                    <th>Cover Type</th>
                                    <th>SI</th>
                                    <th>Premium</th>
                                
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-data>
                                <tr [pSelectableRow]="riskDetails" class="point" (click)="getSections(data.code);getExcesses(data.code)">
                                    <td>{{data.quotationRiskNo}}</td>
                                    <td>{{data.propertyId}}</td>
                                    <td>{{data.covertypeShortDescription}}</td>
                                    <td>{{data.sectionsDetails.limitamount}}</td>
                                    <td>{{data.sectionsDetails.premium}}</td>
                                </tr>
                            </ng-template>
                            </p-table>
                            <br>
                            <ul class="nav nav-underline mb-4">
                                <li class="nav-item">
                                  <a class="nav-link active" aria-current="page" data-bs-toggle="tab" data-bs-target="#nav-sections">Sections</a>
                                </li>
                                <br>
                                <li class="nav-item">
                                  <a class="nav-link" data-bs-toggle="tab" data-bs-target="#nav-riskClauses">Clauses</a>
                                </li>
                                <br>
                                <li class="nav-item">
                                  <a class="nav-link" data-bs-toggle="tab" data-bs-target="#nav-schedules">Other Details</a>
                                </li>
                                <br>
                                <li class="nav-item">
                                    <a class="nav-link" data-bs-toggle="tab" data-bs-target="#nav-excesses">Excesses</a>
                                  </li>
                              </ul>
                              <div class="tab-content mb-4" id="nav-tabContent">
                                <div class="tab-pane fade show active" id="nav-sections" role="tabpanel" aria-labelledby="nav-sections" tabindex="0">
    
                                    <p-table
                                     [value]="sections" 
                                     [tableStyle]="{ 'min-width': '50rem' }"  
                                     styleClass="p-datatable-sm">
                                        <ng-template pTemplate="header">
                                            <tr>
                                                <th>Row Num</th>
                                                <th>Group</th>
                                                <th>Section Description</th>
                                               <th>Section Limit</th>
                                                <th>Premium</th>
                                                <th>Rate Type</th>
                                                <th>Section Rate</th>
                                                <th>Free Limit</th>
                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="body" let-data>
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td>{{data.description}}</td>
                                                <td>{{data.limitAmount}}</td>
                                                <td>{{data.premium}}</td>
                                                <td></td>
                                                <td>{{data.rate}}</td>
                                                <td>{{data.freeLimit}}</td>
                                            </tr>
                                        </ng-template>
                                      
                                        </p-table>
                                </div>
                                <div class="tab-pane fade" id="nav-riskClauses" role="tabpanel" aria-labelledby="nav-riskClauses" tabindex="0">
                                    <p-table [value]="" [tableStyle]="{ 'min-width': '50rem' }"  styleClass="p-datatable-sm">
                                        <ng-template pTemplate="header">
                                            <tr>
                                                <th>Clause</th>
                                                <th>Product</th>
                                                <th>Wording</th>
                                               <th>Editable</th>
                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="body" let-data>
                                            <tr>
                                             
                                            </tr>
                                        </ng-template>
                                        </p-table>
                                </div>
                                <div class="tab-pane fade " id="nav-schedules" role="tabpanel" aria-labelledby="nav-schedules" tabindex="0">
                                    <p-table [value]="schedules" [tableStyle]="{ 'min-width': '50rem' }"  styleClass="p-datatable-sm">
                                        <ng-template pTemplate="header">
                                            <tr>
                                                <th>Reg no.</th>
                                                <th>Vehicle make</th>
                                                <th>Cubic capacity</th>
                                                <th>Year of manufacture</th>
                                                <th>Seating capacity</th>
                                                <th>Value</th>
                                                <th>Body type</th>
                                                <th>Cover type</th>
                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="body" let-data>
                                            <tr>
                                              <td>{{data.registrationNumber}}</td>
                                              <td>{{data.Make}}</td>
                                              <td>{{data.cubicCapacity}}</td>
                                              <td>{{data.yearOfManufacture}}</td>
                                              <td>{{data.carryCapacity}}</td>
                                              <td>{{data.value}}</td>
                                              <td>{{data.bodyType}}</td>
                                              <td>{{data.coverType}}</td>
                                            </tr>
                                        </ng-template>
                                        </p-table>
                                </div>
                                <div class="tab-pane fade" id="nav-excesses" role="tabpanel" aria-labelledby="nav-excesses" tabindex="0">
                                    <p-table [value]="excessesList" [tableStyle]="{ 'min-width': '50rem' }"  styleClass="p-datatable-sm">
                                        <ng-template pTemplate="header">
                                            <tr>
                                                <th>Narration</th>
                                                <th>Value</th>
                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="body" let-data>
                                            <tr>
                                              <td>{{data.narration}}</td>
                                              <td>{{data.value}}</td>
                                            </tr>
                                        </ng-template>
                                        </p-table>
                                </div>
                              </div>
                          </div>
                          </div>
                          
            </div>
            <!-- External Claims Experience -->
            <div class="card mb-4">
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-4">
                            <p-panelMenu [model]="menuItems" [style]="{'width':'300px'}"></p-panelMenu>
                        </div>
                        <div class="col-8 d-flex justify-content-end">
                            <div class="row">
                                <div class="col-4" >
                                    <button type="button" id="icon" class="btn btn-primary"  title="Add">
                                        <i class="fa-solid fa-plus"></i>
                                    </button>
                                    </div>
                                <div class="col-4" >
                                <button type="button" id="icon" class="btn btn-primary"  title="Edit">
                                    <i class="fa-solid fa-pencil"></i>
                                </button>
                                </div>
                                <div class="col-4" >
                                <button type="button" id="icon" class="btn btn-danger me-2"  title="Delete">
                                    <i class="fa-solid fa-trash-can"></i>
                                </button>
                                </div>
                            
                            </div>
                            
                        </div>
                    </div>
                    <div class="mb-4" *ngIf="showExternalClaims === true;">
                        <p-table [value]="externalTable" [tableStyle]="{ 'min-width': '50rem' }">
                            <ng-template pTemplate="header">
                                <tr>
                                    <th>Client</th>
                                    <th>Claim Paid</th>
                                    <th>Insurer</th>
                                    <th>Policy Number</th>
                                    <th>Year</th>
                                   
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-data>
                                <tr>
                                    <td>{{data.clientCode}}</td>
                                    <td>{{data.claimPaid}}</td>
                                    <td>{{data.insurer}}</td>
                                    <td>{{data.policyNo}}</td>
                                    <td>{{data.year}}</td>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="emptymessage">
                                <tr>
                                  <td colspan="1"></td>
                            
                                  <td colspan="4" style="padding:100px;padding-left: 350px;" id="empty">No records Found</td>
                                </tr>
                            
                              </ng-template>
                        </p-table>
                    </div>
                    <div class="mb-4" *ngIf="showExternalClaims === false;">
                        <p-table [value]="internalTable" [tableStyle]="{ 'min-width': '50rem' }">
                            <ng-template pTemplate="header">
                                <tr>
                                    <th>Policy No</th>
                                    <th>Claim No</th>
                                    <th>OST Reserve</th>
                                   <th>Total Reserve</th>
                                    <th>Recoveries</th>
                                    <th>Salvages</th>
                                   <th>Total Payments</th>
                                   <th>Net Paid</th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-data>
                                <tr>
                                  <td>{{data.clientPolicyNo}}</td>
                                  <td>{{data.claimNo}}</td>
                                  <td>{{data.reserve}}</td>
                                  <td>{{data.totalReserve}}</td>
                                  <td>{{data.recoveries}}</td>
                                  <td>{{data.salvages}}</td>
                                  <td>{{data.totalPayments}}</td>
                                  <td>{{data.netPaid}}</td>       
                                 </tr>
                            </ng-template>
                            <ng-template pTemplate="emptymessage">
                                <tr>
                                  <td colspan="4"></td>
                            
                                  <td colspan="5" style="padding:100px;padding-left:0px;" id="empty">No records Found</td>
                                </tr>
                            
                              </ng-template>
                        </p-table>
                    </div>
                </div>

            </div>
        </div>
        <div class="tab-pane fade" id="nav-authorization" role="tabpanel" aria-labelledby="nav-authorization-tab" tabindex="0">

            <div class="card mb-4">
                <div class="card-body">
                    <h6 class="mb-4">Choose Report</h6>
    
                    <div class="form-check form-check-inline" id="report-checks">
                        <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">
                        <label class="form-check-label" for="inlineCheckbox1">Quotation summary document</label>
                      </div>
                      <div class="form-check form-check-inline" id="report-checks">
                        <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2">
                        <label class="form-check-label" for="inlineCheckbox2">Quotation premium calculation</label>
                      </div>
                      <div class="form-check form-check-inline" id="report-checks">
                        <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">
                        <label class="form-check-label" for="inlineCheckbox1">Quotation document</label>
                      </div>
                    <br><br>
                    <div class="form-check form-check-inline" id="report-checks" style="margin-right: 10%;">
                        <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">
                        <label class="form-check-label" for="inlineCheckbox1">Quotation clauses document</label>
                      </div>
                      <div class="form-check form-check-inline" id="report-checks">
                        <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2">
                        <label class="form-check-label" for="inlineCheckbox2">Quotation schedules</label>
                      </div>
                     
                
    
                    
    
                </div>
              
                    <br>
                    <div class="float-end mb-3">
                        <button class="btn btn-primary float-end mr-3" style="margin-right: 13px;">Download</button>
                        <button class="btn btn-outline-primary float-end" style="margin-right: 10px;" (click)="makeReady()" *ngIf="makeQuotationReady">Make Quotation Ready</button>
                        <button class="btn btn-outline-primary float-end" style="margin-right: 10px;" (click)="confirm()"  *ngIf="confirmQuotation">Confirm</button>
                        <button class="btn btn-outline-primary float-end" style="margin-right: 10px;" (click)="authorise()"  *ngIf="authoriseQuotation">Authorise</button>
                    </div>
            </div>
            <div class="card mb-4">
                <div class="card-body">
                    <h6 class="mb-4">Communication</h6>
    
    
                    <div class="form-check form-check-inline">
                       
                        <label style="margin-left:-24px">Send</label>
                      </div>
    
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" (change)="showCommunicationDetails('email')" value="option1">
                        <label class="form-check-label" for="inlineRadio1">Email</label>
                      </div>
                      <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="inlineRadioOptions" (change)="showCommunicationDetails('sms')" id="inlineRadio2" value="option2">
                        <label class="form-check-label" for="inlineRadio2">SMS</label>
                      </div>
                      <br><br> 



                <div *ngIf="showSms">
                    <div class="row mr-4">
                        <div class="col-sm">
                            <div class="row mb-3">
                                <label class="col-sm-4 col-form-label" id="communicationLabel">SMS Template</label>
                                <div class="col-sm-8">
                                  <input type="text" class="form-control" id="inputEmail3">
                                </div>
                              </div>
                        </div>
                        <div class="col-sm">
                            <div class="form-check form-check-reverse" id="report-checks">
                                <label class="form-check-label" for="inlineCheckbox2" id="communicationLabel">Send to client</label>
                                <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2">
                              </div>
                        </div>
                        <div class="col-sm">
                            <div class="form-check form-check-reverse" id="report-checks">
                                <label class="form-check-label" for="inlineCheckbox1" id="communicationLabel">Send to agent</label>
                                <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">
                              </div>
                        </div>
                        
                    </div>

                    <div class="float-end mb-3">
                        <button class="btn btn-primary float-end mr-3" style="margin-right: 13px;">Cancel</button>
                        <button class="btn btn-outline-primary float-end" style="margin-right: 10px;" data-bs-toggle="modal" data-bs-target="#smsModal">Okay</button>
                       
                    </div>

                </div>
                  
                
                <div *ngIf="showEmail">
                    <div class="row ">
                        <div class="col-sm">
                            <div class="row mb-3">
                                <label class="col-sm-6 col-form-label" id="communicationLabel">Email Template</label>
                                <div class="col-sm-6">
                                  <input type="text" class="form-control" id="inputEmail3">
                                </div>
                              </div>
                        </div>
                        <div class="col-sm">
                            <div class="form-check form-check-reverse" >
                                <label class="form-check-label" for="inlineCheckbox2" id="communicationLabel">Send to client</label>
                                <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2">
                              </div>
                        </div>
                        <div class="col-sm">
                            <div class="form-check form-check-reverse">
                                <label class="form-check-label" for="inlineCheckbox1" id="communicationLabel">Send to agent</label>
                                <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">
                              </div>
                        </div>
                        <div class="col-sm">
                            <div class="form-check form-check-reverse" >
                                <label class="form-check-label" for="inlineCheckbox1" id="communicationLabel">Send to all agent</label>
                                <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">
                              </div>
                        </div>
                    </div>

                    <div class="float-end mb-3">
                        <button class="btn btn-primary float-end mr-3" style="margin-right: 13px;">Cancel</button>
                        <button class="btn btn-outline-primary float-end" style="margin-right: 10px;" data-bs-toggle="modal" data-bs-target="#emailModal">Okay</button>
                       
                    </div>

                </div>
                    
                <!-- Email Modal -->
                <div class="modal fade" id="emailModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div  class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                      
                        <div class="modal-body">
                        <h6 class="mb-3">Details</h6>
                        <!-- Client and Agent -->
                        <div class="row ">
                            <div class="col-sm">
                                <div class="row">
                                    <div class="col-sm-4">
                                        <h6>Client</h6>
                                    </div>
                                    <div class="col-sm-8">
                                        <p class="text-muted">{{ clientDetails.firstName+" "+clientDetails.lastName }}</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm">
                                <div class="row">
                                    <div class="col-sm-4">
                                        <h6>Agent</h6>
                                    </div>
                                    <div class="col-sm-8">
                                        <p class="text-muted"></p>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <!-- Quotation Code -->
                        <div class="row mb-2">
                            <div class="col-sm-8">
                                <div class="row">
                                    <div class="col-sm-5">
                                        <h6>Quotation Code</h6>
                                    </div>
                                    <div class="col-sm-7">
                                        <p class="text-muted">{{quotationCode}}</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                
                            </div>

                        </div>
                        <!-- Quotation Number -->
                        <div class="row mb-2">
                            <div class="col-sm-10">
                                <div class="row">
                                    <div class="col-sm-4">
                                        <h6>Quotation Number</h6>
                                    </div>
                                    <div class="col-sm-8">
                                        <p class="text-muted">{{quotationNumber}}</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-2">
                                
                            </div>

                        </div>
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" value="">
                            <label class="form-check-label" >
                              Include policy batch documents
                            </label>
                          </div>
                          <h6 class="mb-3">Message Details</h6>
                          <form [formGroup]="emailForm" >

                            <div class="mb-3 row">
                                <label class="col-sm-3 col-form-label" id="messageLabel">To</label>
                                <div class="col-sm-9">
                                  <input type="text" class="form-control" formControlName="address" >
                                </div>
                              </div>
    
                              <div class="mb-3 row">
                                <label class="col-sm-3 col-form-label" id="messageLabel">CC</label>
                                <div class="col-sm-9">
                                  <input type="text" class="form-control" formControlName="cc"  >
                                </div>
                              </div>
    
                              <div class="mb-3 row">
                                <label class="col-sm-3 col-form-label" id="messageLabel">BCC</label>
                                <div class="col-sm-9">
                                  <input type="text" class="form-control" formControlName="bcc" >
                                </div>
                              </div>
    
                              <div class="mb-3 row">
                                <label class="col-sm-3 col-form-label" id="messageLabel">Subject</label>
                                <div class="col-sm-9">
                                  <input type="text" class="form-control" formControlName="subject" >
                                </div>
                              </div>
                              
                              <div class="mb-3 row">
                                <label class="col-sm-3 col-form-label" id="messageLabel">Message</label>
                                <div class="col-sm-9">
                                    <textarea class="form-control" rows="3" formControlName="message" ></textarea>
                                </div>
                              </div>
                          </form>
                         
                          <button class="btn btn-primary float-end"  data-bs-dismiss="modal" (click)="emaildetails()">Send Email</button>
                        </div>
                    
                    </div>
                    </div>
                </div>

                <!--SMS  Modal -->
<div class="modal fade" id="smsModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
       
        <div class="modal-body">
            <h6 class="mb-3">Details</h6>
            <!-- Client and Agent -->
            <div class="row ">
                <div class="col-sm">
                    <div class="row">
                        <div class="col-sm-4">
                            <h6>Client</h6>
                        </div>
                        <div class="col-sm-8">
                            <p class="text-muted">{{ clientDetails.firstName+" "+clientDetails.lastName }}</p>
                        </div>
                    </div>
                </div>
                <div class="col-sm">
                    <div class="row">
                        <div class="col-sm-4">
                            <h6>Agent</h6>
                        </div>
                        <div class="col-sm-8">
                            <p class="text-muted"></p>
                        </div>
                    </div>
                </div>

            </div>
            <!-- Quotation Code -->
            <div class="row mb-2">
                <div class="col-sm-8">
                    <div class="row">
                        <div class="col-sm-5">
                            <h6>Quotation Code</h6>
                        </div>
                        <div class="col-sm-7">
                            <p class="text-muted">{{quotationCode}}</p>
                        </div>
                    </div>
                </div>
                <div class="col-sm-4">
                    
                </div>

            </div>
            <!-- Quotation Number -->
            <div class="row mb-2">
                <div class="col-sm-10">
                    <div class="row">
                        <div class="col-sm-4">
                            <h6>Quotation Number</h6>
                        </div>
                        <div class="col-sm-8">
                            <p class="text-muted">{{quotationNumber}}</p>
                        </div>
                    </div>
                </div>
                <div class="col-sm-2">
                    
                </div>

            </div>
            
              <h6 class="mb-3">Message Details</h6>
              <form [formGroup]="emailForm" >

                <div class="mb-3 row">
                    <label class="col-sm-3 col-form-label" id="messageLabel">Receiver Phone No.</label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" formControlName="recipients" >
                    </div>
                  </div>
                  <div class="mb-3 row">
                    <label class="col-sm-3 col-form-label" id="messageLabel">Sender Phone No.</label>
                    <div class="col-sm-9">
                      <input type="text" class="form-control" formControlName="sender" >
                    </div>  
                  </div>

                  <div class="mb-3 row">
                    <label class="col-sm-3 col-form-label" id="messageLabel">Message</label>
                    <div class="col-sm-9">
                        <textarea class="form-control" rows="3" formControlName="message" ></textarea>
                    </div>
                  </div>

                  

                
              </form>
             
              <button class="btn btn-primary float-end"  data-bs-dismiss="modal" (click)="sendSms()">Send SMS</button>
            </div>
        
        
      </div>
    </div>
  </div>
                </div>
                
    
            </div>
            <div class="card mb-4">
                <div class="card-body">
                    <h6 class="mb-4">Documents</h6>
                    <div class="row mt-3 g-3 align-items-center">
                        <div class="col-auto">
                          <label for="inputPassword6" class="col-form-label">Document Type</label>
                        </div>
                        <div class="col-auto">
                          <input type="password" id="inputPassword6" class="form-control" aria-describedby="passwordHelpInline">
                        </div>
                        <div class="col-auto">
                        
                        </div>
                      </div>
                </div>
            </div>
        </div>
       

      </div>
  

   
  


   

</div>
