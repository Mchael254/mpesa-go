<!-- revisions -->
<div *ngIf="noRevision" class="card mb-4 " style=" position: relative; border: none; border-radius: 5px;">

    <div class="card-body mx-4 mt-2 mb-2">
        <div class="row align-items-center">
            <div class="col-6">
                <p class="section-title mb-0"
                    style="color: #00529B; font-size: 18px; font-weight: 500; font-family: Roboto;">
                    {{ 'gis.quotation.revisions' | translate }}
                </p>
            </div>

            <div class="col-6 text-end">
                <button type="button" id="icon"
                    class="btn rounded-circle p-0 d-flex align-items-center justify-content-center ms-auto"
                    style="width: 40px; height: 35px; background-color: #e4e7eb; border-color: #e4e7eb;"
                    (click)="toggleRevision()">
                    <i class="fa-solid" style="color: #00529B;"
                        [ngClass]="{'fa-chevron-up': showRevision, 'fa-chevron-down': !showRevision}"></i>
                </button>
            </div>
        </div>



        <!-- Floating Column Selector -->
        <!-- <div *ngIf="showRevisionsColumnModal" class="card shadow rounded p-2 position-absolute bg-white border"
            [ngStyle]="{ top: columnModalPosition.top, left: columnModalPosition.left, zIndex: 1000 }">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <strong class="text-primary">Select Columns</strong>
                <button class="btn-close btn-sm" (click)="showRevisionsColumnModal = false"></button>
            </div>
            <div style="max-height: 250px; overflow-y: auto;">
                <div *ngFor="let col of revisionColumns">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" style="color: #00529B;"
                            [(ngModel)]="col.visible" 
                            [id]="col.field">
                        <label class="form-check-label" [for]="col.field">
                            {{ col.header }}
                        </label>
                    </div>
                </div>
            </div>
        </div> -->
        <div class="row mt-2 collapse" [ngClass]="{'show': showRevision}">
            <div class="d-flex justify-content-end mt-2">
                <i #iconTrigger class="pi border border-black p-1 rounded-1 text-black"
                    [ngClass]="{ 'pi-caret-up': showRevisions, 'pi-caret-down': !showRevisions }"
                    style="font-size: 15px; cursor: pointer; margin-left: 8px; padding: 4px 6px;">
                </i>
            </div>

            <p-table #dt [value]="quotationRevisions" styleClass="p-datatable-striped">

                <ng-template pTemplate="header">
                    <tr>
                        <th class="flexible-header1" pSortableColumn="quotationNo">
                            Quotation No <p-sortIcon field="quotationNo" />
                        </th>
                        <th class="flexible-header1" pSortableColumn="coverFrom">
                            Cover from <p-sortIcon field="coverFrom" />
                        </th>
                        <th class="flexible-header1" pSortableColumn="coverTo">
                            Cover to <p-sortIcon field="coverTo" />
                        </th>
                        <th class="flexible-header1" pSortableColumn="premium">
                            Premium <p-sortIcon field="coverTo" />
                        </th>
                    </tr>

                </ng-template>

                <ng-template pTemplate="body" let-revision>
                    <tr>
                        <td>{{ revision.quotationNo }}</td>
                        <td>{{ revision.coverFrom }}</td>
                        <td>{{ revision.coverTo }}</td>
                        <td>{{ revision.premium }}</td>

                    </tr>
                </ng-template>

                <ng-template pTemplate="emptymessage">
                    <tr>
                        <td colspan="4" class="text-center p-4 text-muted">
                            <p>No revisions available for this quotation</p>
                        </td>
                    </tr>
                </ng-template>

            </p-table>

        </div>

    </div>

</div>

<!-- comments -->
<div class="card mb-4 " style=" position: relative; border: none; border-radius: 5px;">

    <div class="card-body mx-4 mt-2 mb-2">
        <div>
            <h6 style="color: #00529B; font-size: 18px; font-weight: 500; font-family: Roboto; margin-bottom:12px;"
                class="mb-5">
                Comments
            </h6>
        </div>

        <div class="row mt-2">

            <p-table #dt [value]="" styleClass="p-datatable-striped" [paginator]="true" [rows]="2"
                [rowsPerPageOptions]="[5, 10, 20]">

                <ng-template pTemplate="header">
                    <tr>
                        <th class="flexible-header1" pSortableColumn="comments">
                            Comments <p-sortIcon field="quotationNo" />
                        </th>
                        <th class="flexible-header1" pSortableColumn="commentsBy">
                            Comments By <p-sortIcon field="coverFrom" />
                        </th>
                        <th class="flexible-header1" pSortableColumn="agent">
                            Agent <p-sortIcon field="agent" />
                        </th>
                        <th class="flexible-header1" pSortableColumn="client">
                            Client <p-sortIcon field="client" />
                        </th>
                        <th class="flexible-header1" pSortableColumn="commentDate">
                            Comment Date <p-sortIcon field="commentDate" />
                        </th>
                        <th class="flexible-header1" pSortableColumn="wef">
                            WEF <p-sortIcon field="wef" />
                        </th>
                        <th class="flexible-header1" pSortableColumn="wet">
                            WET <p-sortIcon field="wet" />
                        </th>
                    </tr>

                </ng-template>

                <ng-template pTemplate="body" let-comments>
                    <tr>
                        <td>{{ comments.comments }}</td>
                        <td>{{ comments.commentsBy }}</td>
                        <td>{{ comments.agent }}</td>
                        <td>{{ comments.client }}</td>
                        <td>{{ comments.commentDate }}</td>
                        <td>{{ comments.wef }}</td>
                        <td>{{ comments.wet }}</td>

                    </tr>
                </ng-template>

                <ng-template pTemplate="emptymessage">
                    <tr>
                        <td colspan="7" class="text-center p-4 text-muted">
                            <p>No comments available for this quotation</p>
                        </td>
                    </tr>
                </ng-template>

            </p-table>

        </div>

    </div>

</div>