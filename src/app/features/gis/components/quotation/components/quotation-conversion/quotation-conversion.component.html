<div class="container" style="max-width: 90%; margin: 0 auto;">
  <!-- Page Title -->
  <p class="titleMain mt-3 mb-5">{{ 'gis.quotation.quotation_conversion' | translate }}</p>

  <!-- Input Fields Section -->
  <div class="input-section p-4 mb-4" style="background-color: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
    <!-- First Row -->
    <div class="row">
      <div class="row">
        <div class="col-md-3">
          <!-- Search Type Dropdown -->
          <div class="field mb-4 w-full">
            <label for="search-type" class="quote-label required">
              {{ 'gis.quotation.search_criteria' | translate }}
            </label><br>
            <p-dropdown
              [options]="searchOptions"
              [(ngModel)]="selectedSearchType"
              optionLabel="name"
              (onChange)="onSearchTypeChange()"
              [style]="{'width':'100%', 'height':'38px'}"
              placeholder="Select Search Type">
            </p-dropdown>
          </div>
        </div>

        <div class="col-md-3">
          <!-- Dynamic Search Value Dropdown -->
          <div class="field mb-4 w-full">
            <label for="search-value" class="quote-label required">
              {{ selectedSearchType ? selectedSearchType.name : "" }}
            </label><br>
            <p-dropdown
              [options]="filteredOptions"
              [(ngModel)]="selectedSearchValue"
              [filter]="true"
              filterBy="name"
              [showClear]="true"
              [style]="{'width':'100%', 'height':'38px'}"
              [placeholder]="getPlaceholder()"
              (onFocus)="onFocus()"
              (onBlur)="onBlur()"
              (onChange)="onSearchValueChange()"
            >
              <ng-template pTemplate="selectedItem">
                <div class="search-item search-item-value" *ngIf="selectedSearchValue">
                  <div>{{selectedSearchValue.name}}</div>
                </div>
              </ng-template>
              <ng-template let-option pTemplate="item">
                <div class="search-item">
                  <div>{{option.name}}</div>
                </div>
              </ng-template>
            </p-dropdown>
          </div>
        </div>
      </div>
    <!-- Second Row -->
    <div class="row">
      <div class="col-md-3">
        <!-- Industry Dropdown -->
        <div class="field mb-4 w-full">
          <label for="product" class="quote-label required" id="product">
            {{'gis.quotation.search_results' | translate}}
          </label><br>
          <p-dropdown
            [options]="products"
            [(ngModel)]="selectedProduct"
            optionLabel="name"
            [filter]="true"
            filterBy="name"
            [showClear]="true"
            placeholder="Select an product"
            [style]="{'width':'100%', 'height':'38px'}">
            <ng-template pTemplate="selectedItem">
              <div class="industry-item industry-item-value" *ngIf="selectedProduct">
                <div>{{selectedProduct.name}}</div>
              </div>
            </ng-template>
            <ng-template let-industry pTemplate="item">
              <div class="industry-item">
                <div>{{industry.name}}</div>
              </div>
            </ng-template>
          </p-dropdown>
        </div>
      </div>

      <div class="col-md-3">
        <!-- Business Type Dropdown -->
        <div class="field mb-4 w-full">
          <label for="use-of-property" class="quote-label" id="use-of-property">
            Select an Option
          </label><br>
          <p-dropdown
            [options]="status"
            [(ngModel)]="selectedStatus"
            optionLabel="name"
            [filter]="true"
            filterBy="name"
            [showClear]="true"
            placeholder="Select a status"
            [style]="{'width':'100%', 'height':'38px'}">
            <ng-template pTemplate="selectedItem">
              <div class="business-type-item business-type-value" *ngIf="selectedStatus">
                <div>{{selectedStatus.name}}</div>
              </div>
            </ng-template>
            <ng-template let-status pTemplate="item">
              <div class="business-type-item">
                <div>{{status.name}}</div>
              </div>
            </ng-template>
          </p-dropdown>
        </div>
      </div>

      <div class="col-md-3">
        <!-- Effective From Date -->
        <div class="field mb-4 w-full">
          <label for="cover-From" class="quote-label required" id="cover-From">
            Effective Date From</label>
          <p-calendar name="withEffectiveFromDate"
            [dateFormat]="dateFormat" [showIcon]="true" [showButtonBar]="true"
            [placeholder]="coverFrom ? coverFrom : todaysDate" [minDate]="minDate"
            [style]="{'width':'100%', 'height':'38px'}">
          </p-calendar>
        </div>
      </div>

      <div class="col-md-3">
        <!-- Effective To Date -->
        <div class="field mb-4 w-full">
          <label for="cover-To" class="quote-label required" id="cover-To">
            Effective Date To</label>
          <p-calendar name="withEffectiveToDate"
            [dateFormat]="dateFormat" [showIcon]="true" [showButtonBar]="true"
            [placeholder]="coverTo ? coverTo : todaysDate" [minDate]="minDate"
            [style]="{'width':'100%', 'height':'38px'}">
          </p-calendar>
        </div>
      </div>
    </div>
  </div>

  <!-- Table Section -->
  <div class="table-section mt-4 mb-3">
    <p class="title mb-3">{{ 'gis.quotation.product_details' | translate }}</p>
    <p-table
      #dt1
      (onLazyLoad)="onTableLazyLoad($event)"
      [autoLayout]="true"
      [lazy]="true"
      [paginator]="true"
      [rowHover]="true"
      [resizableColumns]="true"
      [showCurrentPageReport]="true"
      [rows]="pageSize || 5"
      [totalRecords]="tableDetails.totalElements"
      [value]="tableDetails.rows"
      [rowsPerPageOptions]="[5, 10, 20, 30, 50, 100]"
      responsiveLayout="stack"
      [scrollable]="true"
      scrollHeight="400px"
      currentPageReportTemplate="{first} - {last} of {totalRecords}"
      styleClass="p-datatable-sm">
      <ng-template pTemplate="header">
        <tr>
          <th style="background-color: #f0f0f0">{{ 'gis.quotation.quotation_number' | translate }}</th>
          <th style="background-color: #f0f0f0">{{ 'gis.quotation.client' | translate }}</th>
          <th>Sum Assured</th>
          <th style="background-color: #f0f0f0">{{'gis.quotation.premium' | translate}}</th>
          <th style="background-color: #f0f0f0">{{ 'gis.quotation.agent' | translate }}</th>
          <th>Date Created</th>
          <th style="background-color: #f0f0f0">{{ 'gis.quotation.cover_from' | translate }}</th>
          <th style="background-color: #f0f0f0">{{ 'gis.quotation.cover_to' | translate }}</th>
          <th style="background-color: #f0f0f0">{{ 'gis.quotation.status' | translate }}</th>
          <th>Action</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-quotation>
        <tr style="cursor: pointer" >
          <td>{{ quotation?.quotationNumber || '' }}</td>
          <td>{{ quotation?.clientName || '' }}</td>
          <td>{{ quotation?.clientName ||''}}</td>
          <td>{{ quotation?.clientName ||'' }}</td>
          <td>{{ quotation?.agentShortDescription || '' }}</td>
          <td>{{ quotation?.quotDate || '' | date:'short' }}</td>
          <td>{{ quotation?.fromDate || '' }}</td>
          <td>{{ quotation?.toDate || '' }}</td>
          <td>{{ quotation?.status || '' }}</td>
          <td>{{ "Process" }}</td>
        </tr>
      </ng-template>
    </p-table>
  </div>

  <!-- Quotation Products Section -->
  <div class="quotation-products-section mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <p class="title mb-3">{{'gis.quotation.quotation_products' | translate}}</p>
      <div>
        <button class="btn btn-outline-primary me-2">{{'gis.quotation.merge_to_policy' | translate}}</button>
        <button class="btn btn-primary">{{'gis.quotation.convert_to_policy' | translate}}</button>
      </div>
    </div>

    <p-table [tableStyle]="{ 'min-width': '50px' }">
      <ng-template pTemplate="header">
        <tr>
          <th style="width: 50px; background-color: #f0f0f0">
            <input type="checkbox" id="selectAll" />
          </th>
          <th style="background-color: #f0f0f0">{{'gis.quotation.product' | translate}}</th>
          <th style="background-color: #f0f0f0">{{'gis.quotation.start_date' | translate}}</th>
          <th style="background-color: #f0f0f0">{{'gis.quotation.end_date' | translate}}</th>
          <th style="background-color: #f0f0f0">{{'gis.quotation.premium' | translate}}</th>
          <th style="background-color: #f0f0f0">{{'gis.quotation.commission' | translate}}</th>
          <th style="background-color: #f0f0f0">FAP</th>
          <th style="background-color: #f0f0f0">{{'gis.quotation.remarks' | translate}}</th>
          <th style="background-color: #f0f0f0">{{'gis.quotation.converted' | translate}}</th>
          <th style="background-color: #f0f0f0">{{'gis.quotation.policy_no' | translate}}</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-product>
        <tr>
          <td>
            <input type="checkbox" id="productCheckbox{{ product.id }}" />
          </td>
          <td>Product</td>
          <td>Start date</td>
          <td>End date</td>
          <td>Premium</td>
          <td>Commission</td>
          <td>FAP</td>
          <td>Remarks</td>
          <td>Converted</td>
          <td>Policy no.</td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="10" class="text-center py-4">
            {{'gis.quotation.no_data' | translate}}
          </td>
        </tr>
      </ng-template>
    </p-table>

  </div>
</div>
