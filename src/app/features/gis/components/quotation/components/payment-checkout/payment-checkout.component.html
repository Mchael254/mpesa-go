<div class="container d-flex align-items-center">
  
  <div *ngIf="paymentCompleted" class="paymentCard border border-outline-success py-4 px-4 bg-white mb-0 rounded-2 z-10 shadow-lg text-center" style="height:auto">
    <div class="mb-3">
      <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="12" cy="12" r="10" stroke="#28a745" stroke-width="2" fill="#d4edda"/>
        <path d="m9 12 2 2 4-4" stroke="#28a745" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div>
    <h4 class="text-success fw-bold mb-3">Payment Completed!</h4>
    <p class="text-dark mb-4">{{ completionMessage }}</p>
    <p class="text-muted small">You can now safely close this tab.</p>
  </div>


  <div *ngIf="!paymentCompleted" class="paymentCard border border-outline-primary py-2 px-4 bg-white mb-0 rounded-2 z-10 shadow-lg" style="height:auto">
    <p class="fw-semibold mt-2">Payment details</p>
    <div [class.invisible]="!paymentStatus" class="text-center">
      <p *ngIf="success" class="text-center text-success fw-bold">{{ successMessage }}</p>
      <p *ngIf="failed" class="text-center text-danger fw-bold">{{ failedMessage }}</p>
    </div>

    <div class="d-flex justify-content-between mt-4 text-black">
      <div class="d-flex justify-content-around align-items-center gap-2">
        <input type="radio" id="mpesa" name="mobilePayment" value="mpesa" [(ngModel)]="selectedPayment" />
        <label for="mpesa">Mpesa</label>
      </div>
      <div class="d-flex justify-content-around align-items-center gap-2">
        <input type="radio" id="airtelMoney" name="mobilePayment" value="airtel" [(ngModel)]="selectedPayment" />
        <label for="airtelMoney">Airtel Money</label>
      </div>
      <div class="d-flex justify-content-around align-items-center gap-2">
        <input type="radio" id="Tkash" name="mobilePayment" value="tkash" [(ngModel)]="selectedPayment" />
        <label for="Tkash">Tkash</label>
      </div>
    </div>
    
    <div class="mt-4 py-2 text-black">
      <div class="row mb-2">
        <div class="col-5">
          <p class="mb-0">Amount</p>
        </div>
        <div class="col-7">
          <p class="mb-0"><strong>{{ currencyPrefix }} {{ amount | number:'1.0-0' }}</strong></p>
        </div>
      </div>

      <div class="row">
        <div class="col-5">
          <p class="mb-0">Account number</p>
        </div>
        <div class="col-7">
          <p class="mb-0"><strong>{{ ipayRefNo }}</strong></p>
        </div>
      </div>
    </div>

    <div class="d-flex flex-column mt-3">
      <label class="text-black">Phone number</label>
      <input type="tel" name="phoneNumber" [(ngModel)]="phoneNumber" #phoneInput="ngModel" maxlength="10"
        pattern="[0-9]{10}" class="border border-outline-primary w-50 p-2 mt-2 form-control"
        placeholder="e.g. 0712345678" required />
      <small class="text-danger" [class.invisible]="!(phoneInput.touched && !isValidPhoneNumber())">
        Invalid phone number, try again.
      </small>
      <small class="text-danger" [class.invisible]="!empty">
        Phone number cannot be empty, try again.
      </small>
    </div>

    <div class="d-flex mt-0 mb-0 gap-3 justify-content-end py-2 w-full">
      <button *ngIf="paymentButton" type="button" class="btn mx-0 btn-primary"
        (click)="sendSTK()">{{paymentButtonLabel}}</button>
    </div>
  </div>

</div>