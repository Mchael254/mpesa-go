<div class="">

  <div class="card">
    <div class="card-body">

      <div class="row mb-4">
        <div class="col-md-4">
          <label for="" class="quote-label required mb-2">Subclass</label>
          <p-dropdown [options]="allMatchingSubclasses" optionLabel="description" optionValue="code"
            formControlName="subclass" [style]="{'width':'100%', 'height':'30px'}"
            [panelStyle]="{'width':'400px', 'max-height':'100%'}" styleClass="form-control form-control-sm "
            id="quote-input" [filter]="true" [filterBy]="'description'" (onChange)="onSubclassChange($event)">
          </p-dropdown>
        </div>

        <div class="col-md-5 mt-1">
          <!-- <label for="inputProfileImg" style="margin-right: 15px;margin-left: 20px;">Download template</label>
          <input type="file" id="inputProfileImg" (change)="onFileChange($event)" formControlName="uploadFile" hidden />
          <label for="inputProfileImg" class="img_upload" style="margin-right: 15px;margin-top: 5px;">Choose
            File</label> -->

          <!-- <button *ngIf="subclassSelected" class="btn btn--primary" (click)="exportTemplate()">Download
            template</button> -->
          <span pTooltip="Select a subclass to continue" tooltipPosition="top" [tooltipDisabled]="subclassSelected">
            <!-- only disable tooltip when button is active -->

            <button class="btn btn-primary btn-sm btn-greyed-out mt-4" [class.disabled]="!subclassSelected"
              [disabled]="!subclassSelected" (click)="exportTemplate()">
              Download template
            </button>
          </span>



        </div>
        <div class="col-md-3">
        </div>
      </div>
      <!-- <div class="upload-area mt-2 mb-1" (click)="fileInput.click()" [class.dragover]="isDragging"
        (drop)="onDrop($event)" (dragover)="onDragOver($event)" (dragleave)="onDragLeave($event)"> -->

      <div class="upload-area mt-2 mb-4" (click)="!selectedSubclassCode ? null : fileInput.click()"
        [class.dragover]="isDragging" (drop)="selectedSubclassCode ? onDrop($event) : $event.preventDefault()"
        (dragover)="selectedSubclassCode ? onDragOver($event) : $event.preventDefault()"
        (dragleave)="selectedSubclassCode ? onDragLeave($event) : null" [class.disabled]="!selectedSubclassCode">

        <div class="upload-content">
          <i class="pi pi-upload upload-icon"></i>

          <p class="upload-text">Click this area to upload file</p>

          <p class="upload-subtext">Maximum file size 10MB</p>
        </div>

        <input #fileInput type="file" (change)="onFileSelected($event)" accept=".csv,.xls,.xlsx" style="display: none;">
        <div class="selected-file" *ngIf="selectedFile">
          <i [ngClass]="getFileIcon(selectedFile.name)" class="file-icon"></i>
          <span class="file-name">{{ selectedFile.name }}</span>

          <button class="remove-btn" (click)="removeFile()" aria-label="Remove">
            <i class="pi pi-trash"></i>
          </button>
        </div>

      </div>
      <div *ngIf="showImportedRiskTable">
        <div class="d-flex justify-content-between align-items-center ">

          <!-- LEFT: Tabs -->
          <!-- <ul class="nav nav-tabs" id="riskTabs" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#allRisksTab" type="button"
                (click)="activeTab = 'ALL'">
                All risks
              </button>
            </li>

            <li class="nav-item" role="presentation">
              <button class="nav-link" data-bs-toggle="tab" data-bs-target="#validTab" type="button"
                (click)="activeTab = 'VALID'">
                Valid
              </button>
            </li>

            <li class="nav-item" role="presentation">
              <button class="nav-link" data-bs-toggle="tab" data-bs-target="#reviewTab" type="button"
                (click)="activeTab = 'REVIEW'">
                Needs review
              </button>
            </li>
          </ul> -->
          <ul class="nav nav-tabs" id="riskTabs" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link" [ngClass]="{'active': activeTab === 'ALL'}" data-bs-toggle="tab"
                data-bs-target="#allRisksTab" type="button" (click)="activeTab = 'ALL'">
                All risks
              </button>
            </li>

            <li class="nav-item" role="presentation">
              <button class="nav-link" [ngClass]="{'active': activeTab === 'VALID'}" data-bs-toggle="tab"
                data-bs-target="#validTab" type="button" (click)="activeTab = 'VALID'">
                Valid
              </button>
            </li>

            <li class="nav-item" role="presentation">
              <button class="nav-link" [ngClass]="{'active': activeTab === 'REVIEW'}" data-bs-toggle="tab"
                data-bs-target="#reviewTab" type="button" (click)="activeTab = 'REVIEW'">
                Needs review
              </button>
            </li>
          </ul>



          <!-- RIGHT: Buttons -->
          <div>
            <button *ngIf="activeTab === 'ALL'" class="btn btn-primary me-2" (click)="validateImportedRisk()">
              Validate
            </button>

            <button class="btn btn-primary" [disabled]="isBulkDeleting" (click)="deleteSelectedRisks()">
              <i *ngIf="isBulkDeleting" class="pi pi-spin pi-spinner me-2"></i>
              {{ isBulkDeleting ? 'Deleting...' : 'Delete' }}
            </button>

          </div>

        </div>

        <div class="tab-content ">

          <!-- ALL risks  TAB -->
          <div class="tab-pane fade " [ngClass]="{'show active': activeTab === 'ALL'}" id="allRisksTab" role="tabpanel">
            <p-table [value]="allRisks" [resizableColumns]="true" [(selection)]="selectedAll"
              [paginator]="allRisks?.length > 10" [rowsPerPageOptions]="[10, 20, 100]" [rows]="10"
              (selectionChange)="onRiskSelectionChange($event)">
              <ng-template pTemplate="header">
                <tr>
                  <th>
                    <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                  </th>
                  <th>Insured </th>
                  <th>Risk ID</th>
                  <th>Risk description</th>
                  <th>Cover type</th>
                  <th>Premium Band</th>
                  <th>Cover from</th>
                  <th>Cover to</th>
                  <th style="width:120px; text-align:center;">Actions</th>
                </tr>
              </ng-template>

              <ng-template pTemplate="body" let-row>
                <tr>
                  <td><p-tableCheckbox [value]="row"></p-tableCheckbox></td>
                  <td>{{ row.insuredName | sentenceCase }}</td>
                  <td>{{ row.propertyId | sentenceCase }}</td>
                  <td>{{ row.riskDescription | sentenceCase }}</td>
                  <td>{{ row.coverType | sentenceCase}}</td>
                  <td>{{ row.binderCode }}</td>
                  <td>{{ row.withEffectFrom }}</td>
                  <td>{{ row.withEffectTo }}</td>
                  <!-- ACTION BUTTONS -->
                  <td style="text-align:center;">
                    <!-- Edit button -->
                    <button class="text-button" (click)="openEditRiskModal(row);">
                      Edit
                    </button>

                    <!-- Delete button -->
                    <button class="text-button" [disabled]="isSingleDeleting" (click)="deleteSingleRisk(row)">
                      Delete
                    </button>
                  </td>



                </tr>
              </ng-template>
            </p-table>
          </div>


          <!-- VALID TAB -->
          <div class="tab-pane fade" [ngClass]="{'show active': activeTab === 'VALID'}" id="validTab" role="tabpanel">
            <p-table [value]="validRisks" [resizableColumns]="true" [(selection)]="selectedValid"
              (selectionChange)="onRiskSelectionChange($event)">
              <ng-template pTemplate="header">
                <tr>
                  <th><p-tableHeaderCheckbox></p-tableHeaderCheckbox></th>
                  <th>Insured</th>
                  <th>Risk ID</th>
                  <th>Risk Description</th>
                  <th>Cover Type</th>
                  <th>Premium Band</th>
                  <th>Cover From</th>
                  <th>Cover To</th>
                  <th style="width:120px; text-align:center;">Actions</th>
                </tr>
              </ng-template>

              <ng-template pTemplate="body" let-row>
                <tr>
                  <td><p-tableCheckbox [value]="row"></p-tableCheckbox></td>
                  <td>{{ row.insuredName | sentenceCase }}</td>
                  <td>{{ row.propertyId | sentenceCase }}</td>
                  <td>{{ row.riskDescription | sentenceCase }}</td>
                  <td>{{ row.coverType | sentenceCase}}</td>
                  <td>{{ row.binderCode }}</td>
                  <td>{{ row.withEffectFrom }}</td>
                  <td>{{ row.withEffectTo }}</td>

                  <td style="text-align:center;">
                    <!-- Edit button -->
                    <button class="text-button" (click)="openEditRiskModal(row);">
                      Edit
                    </button>

                    <!-- Delete button -->
                    <button class="text-button" [disabled]="isSingleDeleting" (click)="deleteSingleRisk(row)">
                      Delete
                    </button>
                  </td>
                </tr>
              </ng-template>
            </p-table>

          </div>


          <!-- NEEDS REVIEW TAB -->
          <div class="tab-pane fade" [ngClass]="{'show active': activeTab === 'REVIEW'}" id="reviewTab" role="tabpanel">
            <p-table [value]="needsReviewRisks" [resizableColumns]="true" [(selection)]="selectedReview"
              (selectionChange)="onRiskSelectionChange($event)">
              <ng-template pTemplate="header">
                <tr>
                  <th><p-tableHeaderCheckbox></p-tableHeaderCheckbox></th>
                  <th>Insured</th>
                  <th>Risk ID</th>
                  <th>Risk Description</th>
                  <th>Cover Type</th>
                  <th>Premium Band</th>
                  <th>Cover From</th>
                  <th>Cover To</th>
                  <th style="width:120px; text-align:center;">Actions</th>
                </tr>
              </ng-template>

              <ng-template pTemplate="body" let-row>
                <tr [attr.data-bs-toggle]="'tooltip'" [attr.title]="row.validationRemarks" class="tooltip-row">
                  <td><p-tableCheckbox [value]="row"></p-tableCheckbox></td>

                  <td>{{ row.insuredName | sentenceCase }}</td>
                  <td>{{ row.propertyId | sentenceCase }}</td>
                  <td>{{ row.riskDescription | sentenceCase }}</td>
                  <td>{{ row.coverType | sentenceCase}}</td>
                  <td>{{ row.binderCode }}</td>
                  <td>{{ row.withEffectFrom }}</td>
                  <td>{{ row.withEffectTo }}</td>

                  <td style="text-align:center;">
                    <!-- Edit button -->
                    <button class="text-button" (click)="openEditRiskModal(row);">
                      Edit
                    </button>

                    <!-- Delete button -->
                    <button class="text-button" [disabled]="isSingleDeleting" (click)="deleteSingleRisk(row)">
                      Delete
                    </button>
                  </td>
                </tr>
              </ng-template>
            </p-table>

          </div>

        </div>

      </div>
      <div class="modal fade" id="addRisk" #addRiskModal tabindex="-1" role="dialog" aria-labelledby="addRiskLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
          <div class="modal-content">

            <div class="modal-body">
              <!-- <div *ngIf="motorClassAllowed == 'Y'">
                                  <ngx-spinner *ngIf="showModalSpinner" name="modal-spinner" [fullScreen]="false"
                                      bdColor="rgba(255,255,255,0.8)" color="#00529B" type="ball-spin-clockwise" size="medium"
                                      class="modal-overlay-spinner">
                                      <p style="color:#00529B">Scanning logbook...</p>
                                  </ngx-spinner>
      
                              </div> -->

              <h5 *ngIf="!isEditMode" class="modal-title mt-3 mb-2 addRiskTitle ">
                {{ 'gis.quotation.add_risk' | translate }}
                <button type="button" class="btn-close red-close float-end" data-bs-dismiss="modal"
                  aria-label="Close"></button>
              </h5>

              <h5 *ngIf="isEditMode" class="modal-title mt-3 mb-2 addRiskTitle ">
                {{ 'gis.quotation.edit_risk' | translate }}
                <button type="button" class="btn-close red-close float-end" data-bs-dismiss="modal"
                  aria-label="Close"></button>
              </h5>



              <form [formGroup]="riskDetailsForm">
                <div class="row ">
                  <ng-container *ngFor="let field of formData; let i = index">
                    <div class="col-sm-6 col-6 mb-4">
                      <div class="form-group form-group-sm">
                        <label *ngIf="field.name" [attr.for]="i + field.name" id="quote-label"
                          [ngClass]="{ 'required': field.isMandatory === 'Y' }">
                          {{ field.label | translate }}
                        </label>


                        <!-- text input -->
                        <input *ngIf="field.type === 'text'" type="text" class="form-control"
                          [formControlName]="field.name" [attr.placeholder]="field.label | translate" />

                        <!-- select -->

                        <ng-container
                          *ngIf="field.name !== 'insureds' && riskDetailsForm && riskDetailsForm.contains(field.name)">
                          <p-dropdown *ngIf="field.type === 'select'" [formControlName]="field.name"
                            [options]="field.selectOptions" optionLabel="label" optionValue="value" [filter]="true"
                            [showClear]="true" [attr.placeholder]="field.label | translate">
                          </p-dropdown>
                        </ng-container>

                        <!-- INSURED -->
                        <ng-container *ngIf="field.name === 'insureds' && clientsData?.length">
                          <p-dropdown formControlName="insureds" [options]="clientsData" optionLabel="clientFullName"
                            [filter]="true" filterBy="clientFullName">

                          </p-dropdown>
                        </ng-container>


                        <!-- <ng-container *ngIf="field.name === 'insureds' && clientsData?.length">
                                                      <p-dropdown formControlName="insureds" [options]="clientsData"
                                                          optionLabel="clientFullName" optionValue="id"
                                                          placeholder="Select Insured" [filter]="true"
                                                          filterBy="clientFullName">
                                                      </p-dropdown>
                                                  </ng-container> -->

                        <!-- date -->
                        <ng-container
                          *ngIf="field.name !== 'coverFrom' && field.name !== 'coverTo' && riskDetailsForm && riskDetailsForm.contains(field.name)">
                          <p-calendar *ngIf="field.type === 'date'" [formControlName]="field.name"
                            [dateFormat]="primeNgDateFormat" [showIcon]="true"
                            [attr.placeholder]="field.label | translate">
                          </p-calendar>
                        </ng-container>


                        <!-- number -->
                        <input *ngIf="field.type === 'number'" type="text" class="form-control"
                          [formControlName]="field.name" [attr.placeholder]="field.label | translate" />

                        <!-- currency -->
                        <input *ngIf="field.type === 'currency'" type="text" class="form-control" currencyMask
                          [options]="currencyObj" [formControlName]="field.name"
                          [attr.placeholder]="field.label | translate" />

                        <!-- validation -->
                        <div *ngIf="
                                                      riskDetailsForm.get(field.name)?.invalid &&
                                                      riskDetailsForm.get(field.name)?.touched"
                          class="text-danger small mt-1">
                          {{ field.label | translate }} is required.
                        </div>
                      </div>
                    </div>
                  </ng-container>

                  <!-- dynamic subclass fields -->
                  <ng-container *ngFor="let field of subclassFormData; let j = index">
                    <div *ngIf="field.name !== 'ncdLevel' || ncdStatusSelected" class="col-sm-6 col-6 mb-4">
                      <div class="form-group form-group-sm">
                        <!-- <label *ngIf="field.name" [attr.for]="j + field.name" id="quote-label"
                                                      [ngClass]="{ required: field.isMandatory === 'Y' }">
                                                      {{ field.label | translate }}
                                                  </label> -->
                        <label *ngIf="field.name !== 'ncdLevel' || ncdStatusSelected" [attr.for]="j + field.name"
                          id="quote-label" [ngClass]="{ required: field.isMandatory === 'Y' }">
                          {{ field.label | translate }}
                        </label>


                        <!-- text input fields -->
                        <ng-container
                          *ngIf="field.name !== 'registrationNumber' && field.name !== 'riskDescription' && field.name !== 'ncdStatus' && field.name !== 'coverDays' && riskDetailsForm && riskDetailsForm.contains(field.name)">

                          <input *ngIf="field.type === 'text'" type="text" class="form-control "
                            [formControlName]="field.name" />
                        </ng-container>
                        <ng-container *ngIf="field.name === 'ncdStatus'">
                          <div *ngIf="field.name === 'ncdStatus'">
                            <div class="form-check form-check-inline">
                              <input class="form-check-input" type="radio" formControlName="ncdStatus" id="ncdStatusYes"
                                value="Y" (change)="onNcdStatusChange($event)">
                              <label class="form-check-label quote-label" for="ncdStatusYes">
                                {{ 'gis.quotation.yes' |
                                translate }}</label>
                            </div>
                            <div class="form-check form-check-inline ms-4">
                              <input class="form-check-input" type="radio" formControlName="ncdStatus" id="ncdStatusNo"
                                value="N" (change)="onNcdStatusChange($event)">
                              <label class="form-check-label quote-label" for="ncdStatusNo">
                                {{
                                'gis.quotation.no' |
                                translate }}</label>
                            </div>
                          </div>
                        </ng-container>
                        <ng-container *ngIf="field.name === 'registrationNumber'">
                          <input type="text" id="quote-input" class="form-control form-control-sm "
                            formControlName="registrationNumber"
                            (input)="riskIdPassed($event); transformToUpperCase($event)" placeholder="KAA 123X">
                        </ng-container>
                        <ng-container *ngIf="motorClassAllowed =='Y' && field.name === 'riskDescription'">
                          <input type="text" id="quote-input" class="form-control   readonly-input"
                            formControlName="riskDescription" [readonly]="true" [value]="vehiclemakeModel">

                        </ng-container>
                        <ng-container *ngIf="field.name === 'coverDays'">
                          <input type="text" id="quote-input" class="form-control   bg-light text-muted"
                            formControlName="coverDays" [readonly]="true">

                        </ng-container>
                        <ng-container *ngIf="motorClassAllowed =='N' && field.name === 'riskDescription'">
                          <input type="text" id="quote-input" class="form-control " formControlName="riskDescription">

                        </ng-container>
                        <!-- select fields -->
                        <ng-container *ngIf="field.name !== 'yearOfManufacture' 
                                                               && field.name !== 'periodRates'
                                                               && field.name !== 'conveyanceType'
                                                                && field.name !== 'territory'
                                                                 && field.name !== 'ncdLevel'
                                                              && riskDetailsForm 
                                                              && riskDetailsForm.contains(field.name)">
                          <p-dropdown *ngIf="field.type === 'select'" [formControlName]="field.name"
                            [options]="field.selectOptions" optionLabel="label" optionValue="value" [filter]="true"
                            [showClear]="true" [attr.placeholder]="field.label | translate"
                            (onChange)="handleSelectChange(field.name, $event)">
                          </p-dropdown>
                        </ng-container>
                        <!-- YEAR OF MANUFACTURE -->
                        <ng-container *ngIf="field.name === 'yearOfManufacture'">
                          <!-- <p-dropdown formControlName="yearOfManufacture" [options]="yearList"
                                                          placeholder="" [filter]="true" filterBy="label">
                                                      </p-dropdown> -->
                          <p-dropdown formControlName="yearOfManufacture" [options]="yearList" optionLabel="label"
                            optionValue="value" [filter]="true" filterBy="label" [showClear]="true">
                          </p-dropdown>
                        </ng-container>
                        <!-- MARINE AND FIRE FIELDS -->
                        <!-- PERIOD RATES -->
                        <ng-container *ngIf="field.name === 'periodRates'">
                          <p-dropdown formControlName="periodRates" [options]="periodRates" optionValue="label"
                            placeholder="" [filter]="true" optionLabel="label">
                          </p-dropdown>
                        </ng-container>
                        <!-- CONVEYANCE TYPE -->
                        <ng-container *ngIf="field.name === 'conveyanceType'">
                          <p-dropdown formControlName="conveyanceType" [options]="conveyannceTypes" placeholder=""
                            [filter]="true" optionLabel="label" optionValue="value">
                          </p-dropdown>
                        </ng-container>
                        <!-- NCD Level -->
                        <ng-container *ngIf="ncdStatusSelected && field.name === 'ncdLevel'">
                          <p-dropdown formControlName="ncdLevel" [options]="ncdLevels" placeholder="" [filter]="true"
                            optionLabel="label" optionValue="value">
                          </p-dropdown>
                        </ng-container>
                        <!-- TERRITORIES -->
                        <ng-container *ngIf="field.name === 'territory'">
                          <p-dropdown formControlName="territory" [options]="territories" placeholder="" [filter]="true"
                            optionLabel="description" optionValue="description">
                          </p-dropdown>
                        </ng-container>
                        <!-- DATE -->
                        <ng-container
                          *ngIf="field.name !== 'coverFrom' && field.name !== 'coverTo' && riskDetailsForm && riskDetailsForm.contains(field.name)">
                          <p-calendar *ngIf="field.type === 'date'" [formControlName]="field.name"
                            [dateFormat]="primeNgDateFormat" [showIcon]="true"
                            [attr.placeholder]="field.label | translate">
                          </p-calendar>
                        </ng-container>
                        <!-- Cover From -->
                        <p-calendar *ngIf="field.name === 'coverFrom'" [formControlName]="field.name"
                          [dateFormat]="primeNgDateFormat" [showIcon]="true"
                          [attr.placeholder]="field.label | translate" (onSelect)="onDateChange()">
                        </p-calendar>

                        <!-- Cover To -->
                        <p-calendar *ngIf="field.name === 'coverTo'" [formControlName]="field.name"
                          [dateFormat]="primeNgDateFormat" [showIcon]="true"
                          [attr.placeholder]="field.label | translate" (onSelect)="onDateChange()">
                        </p-calendar>


                        <!-- number -->
                        <input *ngIf="field.type === 'number'" type="number" class="form-control"
                          [formControlName]="field.name" />

                        <!-- currency -->
                        <input *ngIf="field.type === 'currency'" type="text" class="form-control" currencyMask
                          [options]="currencyObj" [formControlName]="field.name"
                          [attr.placeholder]="field.label | translate" />
                        <div
                          *ngIf="riskDetailsForm.get(field.name)?.touched && riskDetailsForm.get(field.name)?.errors as errors"
                          class="text-danger small mt-1">

                          <div *ngIf="errors['required']">
                            {{ field.label | translate }} {{
                            'gis.quotation.is_required' | translate }}
                          </div>

                          <div *ngIf="errors['pattern']">
                            {{ field.label | translate }}
                            {{ 'gis.quotation.format_is_invalid' | translate }}
                          </div>

                        </div>

                      </div>
                    </div>
                  </ng-container>
                </div>
              </form>


              <div class="mt-5 d-flex justify-content-end">
                <button type="button" class="btn btn-outline-primary mx-2" id="saveDetails"
                  data-bs-dismiss="modal">{{'gis.policy.cancel' |
                  translate}}</button>
                <!-- <button *ngIf="!isEditMode" type="button" class="btn btn-primary " id="saveDetails"> {{
                  'gis.quotation.save' | translate }}</button> -->
                <button *ngIf="isEditMode" type="button" class="btn btn-primary " id="saveDetails"
                  (click)="saveEditedRisk()"> {{
                  'gis.quotation.save_changes' | translate
                  }}</button>
              </div>
            </div>

          </div>
        </div>
      </div>


      <!-- Mapping Modal -->
      <div *ngIf="showMappingModal" class="modal-overlay">
        <div class="modal-content">
          <div class="modal-header">
            <h3>Map Your Columns</h3>
            <p>Please match your file columns to the system fields.</p>
          </div>

          <div class="modal-body">
            <table class="mapping-table">
              <thead>
                <tr>
                  <th>System Field</th>
                  <th>Your File Column</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let field of systemFields">
                  <td>
                    {{ field.label }}
                    <span class="required-asterisk" *ngIf="field.required">*</span>
                  </td>
                  <td>
                    <select [value]="mapping[field.key]" #selectEl (change)="updateMapping(field.key, selectEl.value)">
                      <option [value]="''">-- Don't Map --</option>
                      <option *ngFor="let header of userFileHeaders" [value]="header">
                        {{ header }}
                      </option>
                    </select>
                  </td>
                </tr>
              </tbody>
            </table>

            <!-- Data Preview -->
            <div *ngIf="userFileData.length > 0" class="data-preview">
              <h4>Data Preview (First 3 rows):</h4>
              <table>
                <thead>
                  <tr>
                    <th *ngFor="let header of userFileHeaders">{{ header }}</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let row of userFileData.slice(0, 3)">
                    <td *ngFor="let header of userFileHeaders">{{ row[header] }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" (click)="onMappingCancelled()">
              Cancel
            </button>
            <button type="button" class="btn btn-primary" (click)="onMappingConfirmed()">
              Confirm Mapping
            </button>
          </div>
        </div>
      </div>

    </div>
  </div>

  <button *ngIf="activeTab === 'VALID'" class="btn btn-primary float-end mt-4" (click)="saveRiskDetail()">Save</button>

</div>