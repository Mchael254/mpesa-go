<div class="card mb-4" style="min-height: 634px;">
    <div class="card-body mx-4 my-4">
        <div class="row  mb-3" style="min-height: 600px;">
            <!-- Left side: reports list -->
            <div class="col-4  overflow-auto" style="max-height: 600px;">
                <h6 class="reports-title mb-2">Reports</h6>

                <div *ngFor="let report of fetchedReports; let i = index" class="d-flex align-items-center mb-2">

                    <!-- Description acts as the toggle -->
                    <label (click)="onReportClick(report)"
                        [ngClass]="{'text-primary fw-bold': currentReport?.code === report.code}"
                        class="flex-grow-1 report-label mb-2" style="cursor: pointer;">
                        {{ report.description }}
                    </label>

                    <!-- Download / Print icons -->
                    <i class="pi pi-download ms-3 text-primary" (click)="downloadReports(selectedReports)"
                        pTooltip="Download" tooltipPosition="top"
                        style="cursor: pointer !important; font-size: 13px;"></i>

                    <i class="pi pi-print ms-2 text-primary" (click)="printReport(report)" pTooltip="Print"
                        tooltipPosition="top" style="cursor: pointer !important; font-size: 13px;"></i>
                </div>

            </div>

            <!-- Right side: preview + nav -->
            <div class="col-8" style="min-height: 600px;">

                <div class="d-flex justify-content-center align-items-center gap-3 mt-2 mb-2">

                    <!-- Zoom Out -->

                    <i class="pi pi-minus text-primary" (click)="zoomLevel = zoomLevel - 0.2" pTooltip="Zoom out"
                        style="cursor: pointer; font-size: 16px;">
                    </i>

                    <!-- Current Zoom Percentage -->
                    <span class=" px-2 py-1 border rounded" style="color: black;border-color: black;">
                        {{ (zoomLevel * 100) | number:'1.0-0' }}%
                    </span>
                    <!-- Zoom In -->
                    <i class="pi pi-plus cursor-pointer" (click)="zoomLevel = zoomLevel + 0.2" pTooltip="Zoom in"
                        style="cursor: pointer !important; font-size: 16px;">
                    </i>
                    <!-- Reset -->
                    <button class="btn btn-sm btn-primary ms-2" (click)="zoomLevel = 1"
                        style="cursor: pointer !important; font-size: 16px;">
                        Reset
                    </button>

                </div>

                <div style="height: 600px; background: #fff; position: relative;">

                    <!-- LEFT NAV ICON (centered vertically on left side) -->
                    <button class="btn position-absolute p-0 border-0 bg-transparent"
                        style="top: 50%; left: -15px; transform: translateY(-50%);"
                        [attr.aria-label]="'Previous report'" (click)="toggleReport('prev')">
                        <i class="pi pi-chevron-left " style="font-size: 0.8rem; color: #00529B;"></i>
                    </button>

                    <!-- PDF Viewer -->
                    <div style="width:100%; height:100%; overflow:auto;" class="px-4">

                        <!-- PDF Viewer -->
                        <pdf-viewer *ngIf="filePath" [src]="filePath" [render-text]="true" [show-all]="true"
                            [original-size]="false" [fit-to-page]="true" [zoom]="zoomLevel" style="width:100%; height:100%; display:block; border: 1px solid #00000033;
">
                        </pdf-viewer>

                        <!-- Placeholder if no file loaded -->
                        <div *ngIf="!filePath" class="d-flex align-items-center justify-content-center"
                            style="height:100%;">
                            <div class="text-muted">No document selected. Check a report on the left to load the
                                PDF.</div>
                        </div>



                    </div>



                    <!-- RIGHT NAV ICON (centered vertically on right side) -->
                    <button class="btn position-absolute p-0 border-0 bg-transparent"
                        style="top: 50%; right: -15px; transform: translateY(-50%);" [attr.aria-label]="'Next report'"
                        (click)="toggleReport('next')">
                        <i class="pi pi-chevron-right " style="font-size: 0.8rem;color: #00529B;"></i>
                    </button>
                </div>


            </div>
        </div>
    </div>
</div>
<!-- CLIENT DOCUMENTS CARD -->
<div class="card mb-3">
    <div class="card-body mx-4">
        <div class="row">
            <div class="col-4 ">
                <p class="section-title "> Client documents</p>
            </div>
            <div class="col-8 d-flex justify-content-end">
                <div class="row">

                    <div class="col-4 ">
                        <button type="button" id="icon" class="btn btn-primary" data-bs-toggle="collapse"
                            data-bs-target="#clientCard" aria-expanded="false"
                            [attr.aria-expanded]="isClientCardDetailsOpen" (click)="toggleClientCardDetails()">
                            <i class="fa-solid"
                                [ngClass]="isClientCardDetailsOpen ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
                        </button>
                    </div>
                </div>

            </div>
            <!-- ADD SECTION BUTTON ROW -->
            <div class="row mt-3" *ngIf="isClientCardDetailsOpen">
                <div class="col-12 d-flex justify-content-end">
                    <button id="openModalButtonAdd" class="btn btn-primary btn-sm" data-bs-toggle="modal">
                        Add document
                    </button>

                    <!-- <i #iconTrigger class="pi border border-black p-1 rounded-1 text-black"
                        [ngClass]="{ 'pi-caret-down': showClientCard, 'pi-caret-up': !showClientCard }"
                        style="font-size: 15px; cursor: pointer; margin-left: 8px; padding: 4px 6px;"
                        (click)="toggleClientCard(iconTrigger)">
                    </i> -->

                </div>
            </div>
        </div>


        <div [@slideInOut]="isClientCardDetailsOpen ? 'open' : 'closed'" class="mt-2">




        </div>
    </div>
</div>