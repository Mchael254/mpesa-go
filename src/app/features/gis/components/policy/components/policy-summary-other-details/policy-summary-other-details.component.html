<div class=" mb-4">
    <div class="card-body">
        <div class="row">
            <div class="col-3">
                <!-- Sidebar content -->
                <div class="sidebar">
                    <!-- <h5>Sidebar</h5> -->
                    <ul class="list-group">
                        <li class="list-group-item" (click)="selectItem(1)" [class.selected]="selectedItem === 1">
                            {{'gis.policy.risk_details' | translate}}</li>
                        <li class="list-group-item" (click)="selectItem(2)" [class.selected]="selectedItem === 2">
                            {{'gis.policy.client_dd_details' | translate}}</li>
                        <li class="list-group-item" (click)="selectItem(3)" [class.selected]="selectedItem === 3">
                            {{'gis.policy.policy_taxes' | translate}}</li>
                        <li class="list-group-item" (click)="selectItem(4)" [class.selected]="selectedItem === 4">
                            {{'gis.policy.policy_clauses' | translate}}</li>
                        <li class="list-group-item" (click)="selectItem(5)" [class.selected]="selectedItem === 5">
                            {{'gis.policy.policy_subclasses_clauses' | translate}}</li>
                        <li class="list-group-item" (click)="selectItem(6)" [class.selected]="selectedItem === 6">
                            {{'gis.policy.policy_level_perils' | translate}}</li>
                        <li class="list-group-item" (click)="selectItem(7)" [class.selected]="selectedItem === 7">
                            {{'gis.policy.policy_remarks' | translate}}</li>
                        <li class="list-group-item" (click)="selectItem(8)" [class.selected]="selectedItem === 8">
                            {{'gis.policy.limits_of_liability' | translate}}</li>
                        <li class="list-group-item" (click)="selectItem(9)" [class.selected]="selectedItem === 9">
                            {{'gis.policy.external_claim_exp' | translate}}.</li>
                        <li class="list-group-item" (click)="selectItem(10)" [class.selected]="selectedItem === 10">
                            {{'gis.policy.internal_claim_exp' | translate}}.</li>
                        <li class="list-group-item" (click)="selectItem(11)" [class.selected]="selectedItem === 11">
                            {{'gis.policy.service_providers' | translate}}</li>
                        <li class="list-group-item" (click)="selectItem(12)" [class.selected]="selectedItem === 12">
                            {{'gis.policy.reasons_for_pending' | translate}}</li>
                    </ul>
                </div>
            </div>
            <div class="col-9  tab-content-details">
                <!-- Content based on sidebar selection -->
                <ng-container *ngIf="selectedItem === 1">
                    <!-- INSUREDS -->
                    <div class="card riskDetailsCards">
                        <div class="card-body">
                            <div class="row ">
                                <div class="col-sm-3">
                                    <p class="subheading"> {{'gis.policy.insureds' | translate}}</p>

                                </div>
                                <div class="col-sm-9 d-flex justify-content-end">
                                    <div class="row  mb-2">

                                        <!-- <div class="col-sm-3"></div> -->
                                        <div class="col-sm-3 ">
                                            <button type="button" id="icon" class="btn btn-success"
                                                data-bs-toggle="modal" data-bs-target="#clientModal" title="add">
                                                <i class="fa-solid fa-plus"></i>
                                            </button>
                                        </div>
                                        <div class="col-sm-3">
                                            <button type="button" id="icon" class="btn btn-primary"
                                                data-bs-toggle="modal" data-bs-target="#editThirdDetails" title="Edit">
                                                <i class="fa-solid fa-pencil"></i>
                                            </button>
                                        </div>
                                        <!-- <div class="col-sm-3">
                                                    <button type="button" id="icon" class="btn btn-danger" data-bs-toggle="modal"
                                                        data-bs-target="#deleteInsured" title="Delete">
                                                        <i class="fa-solid fa-trash-can"></i>
                                                    </button>
                                                </div> -->
                                        <div class="col-sm-3">
                                            <button type="button" id="icon" class="btn btn-primary"
                                                data-bs-toggle="modal" id="openModalButtonDelete" [hidden]="true"
                                                data-bs-target="#deleteInsured" title="Delete">
                                            </button>
                                            <button type="button" id="icon" class="btn btn-primary" title="Delete">
                                                <i class="fa-solid fa-trash-can" (click)="openDeleteModal()"></i>
                                            </button>
                                            <!-- <button id="openModalButtonDelete" [hidden]="true"  data-bs-toggle="modal" data-bs-target="#deletePremium" >deletes</button>
                                                    <a class="nav-link" id="links"  (click)="openDeleteModal()">Delete</a>
                                                    <i class="fa-solid fa-trash-can"  id="icon" (click)="openDeleteModal()"></i> -->
                                        </div>


                                    </div>

                                </div>
                            </div>
                            <div class="row mb-2 ">
                                <div class="col-7">
                                    <div class="row">
                                        <div class="col-5">
                                            <p-dropdown [options]="columns" [(ngModel)]="selectedColumn"
                                                placeholder="Search by"></p-dropdown>

                                        </div>
                                        <div class="col-7">
                                            <!-- <input class="search-input" pInputText type="text"
                                                        [(ngModel)]="searchQuery" placeholder="Search..."
                                                        (input)="filterTable()" /> -->
                                            <div class="flex">
                                                <span class="p-input-icon-left ml-auto">
                                                    <i class="pi pi-search search-icon"></i>
                                                </span>
                                                <input class="search-input-insured" pInputText type="text"
                                                    [(ngModel)]="searchQuery" (input)="filterTable()"
                                                    placeholder="Search" />

                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div class="col-5">
                                </div>
                            </div>

                            <!-- <p-table #dt1 [value]="insuredDetails" dataKey="code" editMode="row" selectionMode="single"
                         [(selection)]="selectedInsured" [tableStyle]="{'min-width': '50rem'}" styleClass="p-datatable-sm"
                         responsiveLayout="scroll" class='ui-datatable' [autoLayout]="true">
                    <ng-template pTemplate="header">
                        <tr>
                            <th style="width:50%">Name</th>
                            <th>Address</th>
                            <th>Town</th>
                            <th>Pin</th>
                            <th>Passport no.</th>
                            <th>Business</th>
                            <th style="width:15%">Other interested parties</th>
                            <th>ID no.</th>
                            <th></th>
                        </tr>
                    </ng-template>
                
                    <ng-template pTemplate="body" let-insuredDetails let-editing="editing" let-ri="rowIndex">
                        <tr [pEditableRow]="insuredDetails" [pSelectableRow]="insuredDetails"
                            [class.p-highlight]="insuredDetails === selectedInsured">
                            <td>
                                {{insuredDetails.newInsured + ' ' + insuredDetails.otherNames}}
                            </td>
                            <td>
                                {{insuredDetails.address}}
                            </td>
                            <td>
                                {{insuredDetails.town}}
                            </td>
                            <td>
                                <p-cellEditor>
                                    <ng-template pTemplate="input">
                                        <input pInputText type="text" [(ngModel)]="insuredDetails.pinNo" />
                                    </ng-template>
                                    <ng-template pTemplate="output">
                                        {{insuredDetails.pinNo}}
                                    </ng-template>
                                </p-cellEditor>
                            </td>
                            <td>
                                <p-cellEditor>
                                    <ng-template pTemplate="input">
                                        <input pInputText type="text" [(ngModel)]="insuredDetails.passportNumber" />
                                    </ng-template>
                                    <ng-template pTemplate="output">
                                        {{insuredDetails.passportNumber}}
                                    </ng-template>
                                </p-cellEditor>
                            </td>
                            <td>
                                {{insuredDetails.business}}
                            </td>
                            <td>
                                {{insuredDetails.otherParties}}
                            </td>
                            <td>
                                <p-cellEditor>
                                    <ng-template pTemplate="input">
                                        <input pInputText type="text" [(ngModel)]="insuredDetails.idNo" />
                                    </ng-template>
                                    <ng-template pTemplate="output">
                                        {{insuredDetails.idNo}}
                                    </ng-template>
                                </p-cellEditor>
                            </td>
                            <td>
                                <div class="flex align-items-center justify-content-center gap-2">
                                    <button *ngIf="!editing" pButton pRipple type="button" pInitEditableRow
                                            icon="pi pi-pencil" class="p-button-rounded p-button-text"></button>
                                    <button *ngIf="editing" pButton pRipple type="button" pSaveEditableRow
                                            icon="pi pi-check" (click)="editInsureds(insuredDetails)"
                                            class="p-button-rounded p-button-text p-button-success mr-2"></button>
                                    <button *ngIf="editing" pButton pRipple type="button" pCancelEditableRow
                                            icon="pi pi-times"
                                            class="p-button-rounded p-button-text p-button-danger"></button>
                                </div>
                            </td>
                        </tr>
                    </ng-template>
                </p-table> -->

                            <!-- <p-table #dt1 [value]="filteredInsuredDetails" dataKey="code" editMode="row"
                                    selectionMode="single" [(selection)]="selectedInsured" [tableStyle]="{'min-width': '50rem'}"
                                    styleClass="p-datatable-sm" responsiveLayout="scroll" class='ui-datatable'
                                    [autoLayout]="true">
                                    <ng-template pTemplate="header">
                                        <tr>
                                            <th >{{'gis.policy.name' | translate}}</th>
                                            <th>{{'gis.policy.address' | translate}}</th>
                                            <th>{{'gis.policy.town' | translate}}</th>
                                            <th>{{'gis.policy.pin' | translate}}</th>
                                            <th>{{'gis.policy.passport_no' | translate}}.</th>
                                            <th>{{'gis.policy.business' | translate}}</th>
                                            <th>{{'gis.policy.other_interested_parties' | translate}}</th>
                                            <th>{{'gis.policy.id_no' | translate}}</th>
                                            <th></th>
                                        </tr>
                                    </ng-template>
        
                                    <ng-template pTemplate="body" let-insuredDetails let-editing="editing" let-ri="rowIndex">
                                        <tr [pEditableRow]="insuredDetails" [pSelectableRow]="insuredDetails"
                                            [class.p-highlight]="insuredDetails === selectedInsured">
                                            <td>
                                                {{insuredDetails.newInsured + ' ' + insuredDetails.otherNames}}
                                            </td>
                                            <td>
                                                {{insuredDetails.address}}
                                            </td>
                                            <td>
                                                {{insuredDetails.town}}
                                            </td>
                                            <td>
                                                <p-cellEditor>
                                                    <ng-template pTemplate="input">
                                                        <input pInputText type="text" [(ngModel)]="insuredDetails.pinNo" />
                                                    </ng-template>
                                                    <ng-template pTemplate="output">
                                                        {{insuredDetails.pinNo}}
                                                    </ng-template>
                                                </p-cellEditor>
                                            </td>
                                            <td>
                                                <p-cellEditor>
                                                    <ng-template pTemplate="input">
                                                        <input pInputText type="text"
                                                            [(ngModel)]="insuredDetails.passportNumber" />
                                                    </ng-template>
                                                    <ng-template pTemplate="output">
                                                        {{insuredDetails.passportNumber}}
                                                    </ng-template>
                                                </p-cellEditor>
                                            </td>
                                            <td>
                                                {{insuredDetails.business}}
                                            </td>
                                            <td>
                                                {{insuredDetails.otherParties}}
                                            </td>
                                            <td>
                                                <p-cellEditor>
                                                    <ng-template pTemplate="input">
                                                        <input pInputText type="text" [(ngModel)]="insuredDetails.idNo" />
                                                    </ng-template>
                                                    <ng-template pTemplate="output">
                                                        {{insuredDetails.idNo}}
                                                    </ng-template>
                                                </p-cellEditor>
                                            </td>
                                            <td>
                                                <div class="flex align-items-center justify-content-center gap-2">
                                                    <button *ngIf="!editing" pButton pRipple type="button" pInitEditableRow
                                                        icon="pi pi-pencil" class="p-button-rounded p-button-text"></button>
                                                    <button *ngIf="editing" pButton pRipple type="button" pSaveEditableRow
                                                        icon="pi pi-check" (click)="editInsureds(insuredDetails)"
                                                        class="p-button-rounded p-button-text p-button-success mr-2"></button>
                                                    <button *ngIf="editing" pButton pRipple type="button" pCancelEditableRow
                                                        icon="pi pi-times"
                                                        class="p-button-rounded p-button-text p-button-danger"></button>
                                                </div>
                                            </td>
                                        </tr>
                                    </ng-template>
                                </p-table> -->
                            <p-table #dt1 [value]="filteredInsuredDetails" dataKey="code" editMode="row"
                                selectionMode="single" [(selection)]="selectedInsured"
                                [tableStyle]="{'min-width': '50rem'}" styleClass="p-datatable-sm"
                                responsiveLayout="scroll" class='ui-datatable' [autoLayout]="true">


                                <ng-template pTemplate="header">
                                    <tr>
                                        <th class="flexible-header">{{'gis.policy.name' | translate}}</th>
                                        <th class="flexible-header">{{'gis.policy.address' | translate}}</th>
                                        <th class="flexible-header">{{'gis.policy.town' | translate}}</th>
                                        <th class="flexible-header">{{'gis.policy.pin' | translate}}</th>
                                        <th class="flexible-header">{{'gis.policy.passport_no' | translate}}</th>
                                        <th class="flexible-header">{{'gis.policy.business' | translate}}</th>
                                        <th class="flexible-header">{{'gis.policy.other_interested_parties' |
                                            translate}}</th>
                                        <th class="flexible-header">{{'gis.policy.id_no' | translate}}</th>
                                        <th></th>
                                    </tr>
                                </ng-template>

                                <ng-template pTemplate="body" let-insuredDetails let-editing="editing"
                                    let-ri="rowIndex">
                                    <tr [pEditableRow]="insuredDetails" [pSelectableRow]="insuredDetails"
                                        [class.p-highlight]="insuredDetails === selectedInsured">
                                        <td>
                                            {{insuredDetails.newInsured + ' ' + insuredDetails.otherNames}}
                                        </td>
                                        <td>
                                            {{insuredDetails.address}}
                                        </td>
                                        <td>
                                            {{insuredDetails.town}}
                                        </td>
                                        <td>
                                            <p-cellEditor>
                                                <ng-template pTemplate="input">
                                                    <input pInputText type="text" [(ngModel)]="insuredDetails.pinNo" />
                                                </ng-template>
                                                <ng-template pTemplate="output">
                                                    {{insuredDetails.pinNo}}
                                                </ng-template>
                                            </p-cellEditor>
                                        </td>
                                        <td>
                                            <p-cellEditor>
                                                <ng-template pTemplate="input">
                                                    <input pInputText type="text"
                                                        [(ngModel)]="insuredDetails.passportNumber" />
                                                </ng-template>
                                                <ng-template pTemplate="output">
                                                    {{insuredDetails.passportNumber}}
                                                </ng-template>
                                            </p-cellEditor>
                                        </td>
                                        <td>
                                            {{insuredDetails.business}}
                                        </td>
                                        <td>
                                            {{insuredDetails.otherParties}}
                                        </td>
                                        <td>
                                            <p-cellEditor>
                                                <ng-template pTemplate="input">
                                                    <input pInputText type="text" [(ngModel)]="insuredDetails.idNo" />
                                                </ng-template>
                                                <ng-template pTemplate="output">
                                                    {{insuredDetails.idNo}}
                                                </ng-template>
                                            </p-cellEditor>
                                        </td>
                                        <td>
                                            <div class="flex align-items-center justify-content-center gap-2">
                                                <button *ngIf="!editing" pButton pRipple type="button" pInitEditableRow
                                                    icon="pi pi-pencil" class="p-button-rounded p-button-text"></button>
                                                <button *ngIf="editing" pButton pRipple type="button" pSaveEditableRow
                                                    icon="pi pi-check" (click)="editInsureds(insuredDetails)"
                                                    class="p-button-rounded p-button-text p-button-success mr-2"></button>
                                                <button *ngIf="editing" pButton pRipple type="button" pCancelEditableRow
                                                    icon="pi pi-times"
                                                    class="p-button-rounded p-button-text p-button-danger"></button>
                                            </div>
                                        </td>
                                    </tr>
                                </ng-template>
                            </p-table>
                            <!-- Add Insured  Modal -->
                            <div class="modal fade" id="clientModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                                aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content">

                                        <div class="modal-body">
                                            <button type="button" #closebutton class="float-end btn-close"
                                                data-bs-dismiss="modal" aria-label="Close"></button>
                                            <p class="text-start" id="selectClient">{{'gis.policy.select_client'
                                                | translate}}
                                            </p>

                                            <p-table #dt1 [value]="clientData" [tableStyle]="{'max-width': '465px'}"
                                                selectionMode="single" [resizableColumns]="true"
                                                styleClass="p-datatable-sm" responsiveLayout="scroll"
                                                class='ui-datatable' [autoLayout]="true" [paginator]="true" [rows]="5"
                                                [scrollable]="true" scrollDirection="horizontal"
                                                [showCurrentPageReport]="true"
                                                currentPageReportTemplate=" {first} - {last} of {totalRecords}"
                                                [globalFilterFields]="['idNumber', 'emailAddress','lastName','emailAddress']">
                                                <ng-template pTemplate="caption">
                                                    <div class="flex">
                                                        <span class="p-input-icon-left ml-auto">
                                                            <i class="pi pi-search search-icon"></i>
                                                        </span>
                                                        <input class="search-input" pInputText type="text"
                                                            (input)="applyFilterGlobal($event, 'contains')"
                                                            placeholder="Search" />

                                                    </div>
                                                </ng-template>
                                                <ng-template pTemplate="header">

                                                    <tr id="product">
                                                        <th>{{'gis.policy.id_no' | translate}}</th>
                                                        <th>{{'gis.policy.name' | translate}}</th>
                                                        <th>{{'gis.policy.email' | translate}}</th>

                                                    </tr>
                                                </ng-template>

                                                <ng-template let-clientData pTemplate="body">
                                                    <tr id="productData" [pSelectableRow]=""
                                                        (click)="loadClientDetails(clientData.id);">

                                                        <td>
                                                            {{clientData.idNumber}}
                                                        </td>
                                                        <td>
                                                            {{clientData.firstName+" "+clientData.lastName}}
                                                        </td>
                                                        <td>
                                                            {{clientData.emailAddress}}
                                                        </td>
                                                    </tr>
                                                </ng-template>

                                            </p-table>
                                            <br>
                                            <!-- <button class="btn btn-primary float-end" data-bs-dismiss="modal" (click)="saveclient()">Save Details</button> -->
                                        </div>



                                    </div>
                                </div>
                            </div>
                            <!-- Delete Insured Modal -->
                            <div class="modal fade" id="deleteInsured" tabindex="-1" role="dialog"
                                aria-labelledby="deleteInsured" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered" role="document">
                                    <div class="modal-content" id="deleteInsured">
                                        <div class="modal-body ">
                                            <p class="deleteMessage mt-4 mb-4">
                                                {{'gis.policy.are_you_sure_you_want_to_delete' | translate}}</p>
                                            <div class="d-flex justify-content-center mb-3">
                                                <button type="button" class="btn btn-primary px-5" id="delete"
                                                    data-bs-dismiss="modal"
                                                    (click)="deleteInsured()">{{'gis.policy.yes_delete' |
                                                    translate}}</button>
                                            </div>
                                            <div class="d-flex justify-content-center mb-2">
                                                <button type="button" class="btn btn-outline-primary px-5"
                                                    data-bs-dismiss="modal">{{'gis.policy.no_im_not' |
                                                    translate}}</button>
                                            </div>


                                            <!-- <div class="row mt-4 mb-2 d-flex justify-content-center">
                                  <button type="button" class="btn btn-outline-primary "
                                          data-bs-dismiss="modal">Cancel</button>
                                  <div class="col-6 ">
                                      <button type="button" class="btn btn-outline-primary "
                                          data-bs-dismiss="modal">Cancel</button>
                                  </div>
                                  <div class="col-6 d-flex justify-content-end">
                                      <button type="button" class="btn btn-primary" id="save"
                                          data-bs-dismiss="modal" (click)="deleteCoinsurance" >Delete</button>
                
                                  </div>
                                  <div class="row">
                                      <button type="button" class="btn btn-primary" id="save"
                                          data-bs-dismiss="modal" (click)="deleteCoinsurance" >Delete</button>
                                  </div>
                              </div> -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- RISK DETAILS -->
                    <div class="card mt-2 mb-2 riskDetailsCards">
                        <div class="card-body">
                            <div class="row ">
                                <div class="col-sm-3">
                                    <p class="subheading">{{'gis.policy.risk_details'|translate}}</p>

                                </div>
                                <div class="col-sm-9 d-flex justify-content-end">
                                    <div class="row  mb-2">

                                        <!-- <div class="col-sm-3"></div> -->
                                        <div class="col-sm-3 " *ngIf="isRiskDetailsOpen">
                                            <button type="button" id="icon" class="btn btn-success" title="add"
                                                (click)="addAnotherRisk()">
                                                <i class="fa-solid fa-plus"></i>
                                            </button>
                                        </div>
                                        <div class="col-sm-3" *ngIf="isRiskDetailsOpen">
                                            <button type="button" id="icon" class="btn btn-primary" (click)="editRisk()"
                                                title="Edit">
                                                <i class="fa-solid fa-pencil"></i>
                                            </button>

                                        </div>

                                        <div class="col-sm-3" *ngIf="isRiskDetailsOpen">
                                            <button type="button" id="icon" class="btn btn-primary"
                                                data-bs-toggle="modal" id="openRiskModalButtonDelete" [hidden]="true"
                                                data-bs-target="#deleteRisk" title="Delete">
                                            </button>
                                            <button type="button" id="icon" class="btn btn-primary" title="Delete">
                                                <i class="fa-solid fa-trash-can" (click)="openRiskDeleteModal()"></i>
                                            </button>
                                            <!-- <button id="openModalButtonDelete" [hidden]="true"  data-bs-toggle="modal" data-bs-target="#deletePremium" >deletes</button>
                                                    <a class="nav-link" id="links"  (click)="openDeleteModal()">Delete</a>
                                                    <i class="fa-solid fa-trash-can"  id="icon" (click)="openDeleteModal()"></i> -->
                                        </div>
                                        <div class="col-3">
                                            <button type="button" id="icon" class="btn btn-primary"
                                                data-bs-toggle="collapse" data-bs-target="#riskDetails"
                                                aria-expanded="false" aria-controls="riskDetails"
                                                [attr.aria-expanded]="!isRiskDetailsOpen" (click)="toggleRiskDetails()">
                                                <i class="fa-solid fa-chevron-down"></i>
                                            </button>
                                        </div>

                                    </div>

                                </div>
                            </div>
                            <div class="collapse" id="riskDetails">
                                <div class="row mb-2 ">
                                    <div class="col-7">
                                        <div class="row mb-3">

                                            <div class="col-7">

                                                <div class="flex">
                                                    <span class="p-input-icon-left ml-auto">
                                                        <i class="pi pi-search search-icon"></i>
                                                    </span>
                                                    <!-- <input class="search-input-insured" pInputText type="text"
                                                                [(ngModel)]="searchQuery" (input)="filterTable()"
                                                                    placeholder="RISK ID" /> -->
                                                    <input class="search-input-insured" pInputText type="text"
                                                        (input)="applyFilterGlobalRisk($event, 'contains')"
                                                        placeholder="RISK ID" />


                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-5">
                                    </div>
                                </div>
                                <p-table #dt2 [value]="riskDetails" dataKey="code" selectionMode="single"
                                    [(selection)]="selectedRisk" [tableStyle]="{'min-width': '50rem'}"
                                    styleClass="p-datatable-sm" responsiveLayout="scroll" class='ui-datatable'
                                    responsiveLayout="scroll" [autoLayout]="true" [globalFilterFields]="['propertyId']">


                                    <!-- <ng-template pTemplate="caption">
                                                <div class="flex">
                                                    <span class="p-input-icon-left ml-auto">
                                                        <i class="pi pi-search search-icon"></i>
                                                    </span>
                                                    <input class="search-input-Risk" pInputText type="text"
                                                        (input)="applyFilterGlobalRisk($event, 'contains')"
                                                        placeholder="Search" />
                    
                                                </div>
                                            </ng-template> -->
                                    <ng-template pTemplate="header">
                                        <tr>
                                            <th>{{'gis.policy.risk_id' | translate}}</th>
                                            <th>{{'gis.policy.risk_note' | translate}}</th>
                                            <th>{{'gis.policy.description' | translate}}</th>
                                            <th>{{'gis.policy.subclass' | translate}}</th>
                                            <th>{{'gis.policy.binder_name' | translate}}</th>
                                            <th>{{'gis.policy.cover_type' | translate}}</th>
                                            <th>{{'gis.policy.uw_year' | translate}}</th>
                                            <th>{{'gis.policy.premium' | translate}}</th>
                                        </tr>
                                    </ng-template>

                                    <ng-template pTemplate="body" let-riskDetails let-ri="rowIndex">
                                        <tr [pSelectableRow]="riskDetails"
                                            [class.p-highlight]="riskDetails === selectedRisk"
                                            (click)="togglePremiumDetails();getRiskClauses();getRiskPeril();getSubclassPerils();getRelatedRisks()">
                                            <td class="flexible-header">{{riskDetails.propertyId}}</td>
                                            <td class="flexible-header"></td>
                                            <td class="flexible-header">{{riskDetails.propertyDescription}}</td>
                                            <td class="flexible-header">{{riskDetails.subClassDescription}}</td>
                                            <td class="flexible-header">{{riskDetails.binderCode}}</td>
                                            <td class="flexible-header">{{riskDetails.coverTypeShortDescription}}</td>
                                            <td class="flexible-header">{{riskDetails.underwritingYear}}</td>
                                            <td class="flexible-header">{{riskDetails.totalPremium}}</td>
                                        </tr>
                                    </ng-template>
                                </p-table>

                                <!-- Delete Risk  Modal -->
                                <div class="modal fade" id="deleteRisk" tabindex="-1" role="dialog"
                                    aria-labelledby="deleteRisk" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered" role="document">
                                        <div class="modal-content" id="deleteRisk">
                                            <div class="modal-body ">
                                                <p class="deleteMessage mt-4 mb-4">
                                                    {{'gis.policy.are_you_sure_you_want_to_delete' | translate}}</p>
                                                <div class="d-flex justify-content-center mb-3">
                                                    <button type="button" class="btn btn-primary px-5" id="delete"
                                                        data-bs-dismiss="modal"
                                                        (click)="deleteRisk()">{{'gis.policy.yes_delete' |
                                                        translate}} </button>
                                                </div>
                                                <div class="d-flex justify-content-center mb-2">
                                                    <button type="button" class="btn btn-outline-primary px-5"
                                                        data-bs-dismiss="modal">{{'gis.policy.no_im_not' |
                                                        translate}}</button>
                                                </div>


                                                <!-- <div class="row mt-4 mb-2 d-flex justify-content-center">
                                      <button type="button" class="btn btn-outline-primary "
                                              data-bs-dismiss="modal">Cancel</button>
                                      <div class="col-6 ">
                                          <button type="button" class="btn btn-outline-primary "
                                              data-bs-dismiss="modal">Cancel</button>
                                      </div>
                                      <div class="col-6 d-flex justify-content-end">
                                          <button type="button" class="btn btn-primary" id="save"
                                              data-bs-dismiss="modal" (click)="deleteCoinsurance" >Delete</button>
                    
                                      </div>
                                      <div class="row">
                                          <button type="button" class="btn btn-primary" id="save"
                                              data-bs-dismiss="modal" (click)="deleteCoinsurance" >Delete</button>
                                      </div>
                                  </div> -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- SCHEDULE DETAILS -->
                    <div class="card  mt-2 riskDetailsCards">
                        <div class="card-body">
                            <div class="row ">
                                <div>
                                    <div>
                                        <div class="row ">
                                            <div class="col-sm-3">
                                                <p class="subheading"> {{'gis.policy.schedule_details' | translate}}</p>

                                            </div>
                                            <div class="col-sm-9 d-flex justify-content-end">
                                                <div class="row  mb-2">

                                                    <!-- <div class="col-sm-3"></div> -->
                                                    <div class="col-3" *ngIf="isScheduleDetailOpen">
                                                        <button type="button" id="icon" class="btn btn-success"
                                                            title="add">
                                                            <i class="fa-solid fa-plus"></i>
                                                        </button>
                                                    </div>
                                                    <div class="col-3" *ngIf="isScheduleDetailOpen">
                                                        <!-- <button type="button" id="icon" class="btn btn-primary" 
                                                        data-bs-toggle="modal"
                                                        data-bs-target="#editSchedule" (click)="editRisk()"  title="Edit">
                                                            <i class="fa-solid fa-pencil"></i>
                                                        </button> -->
                                                        <button type="button" id="icon" class="btn btn-primary"
                                                            data-bs-toggle="modal" id="openRiskModalButtonEdit"
                                                            [hidden]="true" data-bs-target="#editSchedule" title="Edit">
                                                        </button>
                                                        <button type="button" id="icon" class="btn btn-primary"
                                                            title="Edit">
                                                            <i class="fa-solid fa-pencil"
                                                                (click)="openRiskEditModal()"></i>
                                                        </button>

                                                    </div>
                                                    <div class="col-3" *ngIf="isScheduleDetailOpen">
                                                        <button type="button" id="icon" class="btn btn-primary"
                                                            data-bs-toggle="modal" id="openRiskModalButtonDelete"
                                                            [hidden]="true" data-bs-target="#deleteRisk" title="Delete">
                                                        </button>
                                                        <button type="button" id="icon" class="btn btn-primary"
                                                            title="Delete">
                                                            <i class="fa-solid fa-trash-can"
                                                                (click)="openRiskDeleteModal()"></i>
                                                        </button>

                                                    </div>
                                                    <div class="col-3">
                                                        <button type="button" id="icon" class="btn btn-primary"
                                                            data-bs-toggle="collapse" data-bs-target="#scheduleDetails"
                                                            aria-expanded="false" aria-controls="scheduleDetails"
                                                            [attr.aria-expanded]="!isScheduleDetailOpen"
                                                            (click)="toggleScheduleDetails()">
                                                            <i class="fa-solid fa-chevron-down"></i>
                                                        </button>
                                                    </div>

                                                </div>

                                            </div>

                                        </div>
                                    </div>
                                    <div class="collapse" id="scheduleDetails">

                                        <p-table #dt2 [value]="riskDetails" dataKey="code" selectionMode="single"
                                            [(selection)]="selectedSchedule" [tableStyle]="{'min-width': '50rem'}"
                                            responsiveLayout="scroll" [autoLayout]="true" styleClass="p-datatable-sm"
                                            class='ui-datatable'>


                                            <!-- <ng-template pTemplate="caption">
                                                    <div class="flex">
                                                        <span class="p-input-icon-left ml-auto">
                                                            <i class="pi pi-search search-icon"></i>
                                                        </span>
                                                        <input class="search-input-Risk" pInputText type="text"
                                                            (input)="applyFilterGlobalRisk($event, 'contains')"
                                                            placeholder="Search" />
                        
                                                    </div>
                                                </ng-template> -->
                                            <ng-template pTemplate="header">
                                                <tr>
                                                    <th>{{'gis.policy.reg_no' | translate}}</th>
                                                    <th>{{'gis.policy.vehicle_make' | translate}}</th>
                                                    <th>{{'gis.policy.cubic_capacity' | translate}}</th>
                                                    <th>{{'gis.policy.year_of_manufacture' | translate}}</th>
                                                    <th>{{'gis.policy.seating_capacity' | translate}}</th>
                                                    <th>{{'gis.policy.value' | translate}}</th>
                                                    <th>{{'gis.policy.body_type' | translate}}</th>

                                                </tr>
                                            </ng-template>

                                            <ng-template pTemplate="body" let-riskDetails let-ri="rowIndex">
                                                <tr [pSelectableRow]="riskDetails"
                                                    [class.p-highlight]="riskDetails === selectedRisk">
                                                    <td class="flexible-header"></td>
                                                    <td class="flexible-header"></td>
                                                    <td class="flexible-header"></td>
                                                    <td class="flexible-header"></td>
                                                    <td class="flexible-header"></td>
                                                    <td class="flexible-header"></td>
                                                    <td class="flexible-header"></td>

                                                </tr>
                                            </ng-template>
                                        </p-table>
                                        <!--Edit Schedule Modal -->
                                        <div class="modal fade" id="editSchedule" tabindex="-1" role="dialog"
                                            aria-labelledby="editScheduleLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                <div class="modal-content">




                                                    <div class="modal-body">
                                                        <button type="button"
                                                            class="btn-close ms-auto py-2 px-2 float-end"
                                                            data-bs-dismiss="modal" aria-label="Close"
                                                            id="close"></button>
                                                        <h5 class="modal-title mt-2" id="editScheduleLabel">Edit Motor
                                                            Private Details</h5>
                                                        <form [formGroup]="scheduleDetailsForm">
                                                            <div formGroupName="details">
                                                                <div formGroupName="level1">
                                                                    <!-- **ROW 1** -->
                                                                    <div class="row" id="scheduleRows">
                                                                        <div class="col-xl-6">
                                                                            <div class="mb-3 row">
                                                                                <label for="minmax-buttons"
                                                                                    class="col-5 col-form-label required"
                                                                                    id="scheduleLabel">{{'gis.quotation.chasis_no'
                                                                                    | translate}}</label>
                                                                                <div class="col-7">
                                                                                    <input type="text"
                                                                                        id="scheduleInput"
                                                                                        class="form-control form-control-sm mb-1"
                                                                                        formControlName="chasisNumber">

                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-xl-6">
                                                                            <div class="mb-3 row">
                                                                                <label for="minmax-buttons"
                                                                                    class="col-5 col-form-label"
                                                                                    id="scheduleLabel">{{'gis.quotation.age'
                                                                                    | translate}}</label>
                                                                                <div class="col-7">
                                                                                    <select
                                                                                        class="form-select form-control-sm mb-1"
                                                                                        id="scheduleInput"
                                                                                        formControlName="yearOfManufacture">
                                                                                        <option></option>
                                                                                        <option></option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <!-- **ROW 2** -->
                                                                    <div class="row" id="scheduleRows">
                                                                        <div class="col-xl-6">
                                                                            <div class="mb-3 row">
                                                                                <label for="minmax-buttons"
                                                                                    class="col-5 col-form-label "
                                                                                    id="scheduleLabel">{{'gis.quotation.reg_no'
                                                                                    | translate}}</label>
                                                                                <div class="col-7">
                                                                                    <input type="text"
                                                                                        id="scheduleInput"
                                                                                        class="form-control form-control-sm mb-1"
                                                                                        formControlName="registrationNumber">
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-xl-6">
                                                                            <div class="mb-3 row">
                                                                                <label for="minmax-buttons"
                                                                                    class="col-5 col-form-label"
                                                                                    id="scheduleLabel">{{'gis.quotation.vehicle_make'
                                                                                    | translate}}</label>
                                                                                <div class="col-7">
                                                                                    <input type="text"
                                                                                        id="scheduleInput"
                                                                                        class="form-control form-control-sm mb-1"
                                                                                        formControlName="Make">
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                    </div>


                                                                    <!-- **ROW 3** -->
                                                                    <div class="row" id="scheduleRows">
                                                                        <div class="col-xl-6">
                                                                            <div class="mb-3 row">
                                                                                <label for="minmax-buttons"
                                                                                    class="col-5 col-form-label "
                                                                                    id="scheduleLabel">{{'gis.quotation.cubic_capacity'
                                                                                    | translate}}</label>
                                                                                <div class="col-7">
                                                                                    <input type="number"
                                                                                        id="scheduleInput"
                                                                                        class="form-control form-control-sm mb-1"
                                                                                        formControlName="cubicCapacity">

                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-xl-6">
                                                                            <div class="mb-3 row">
                                                                                <label for="minmax-buttons"
                                                                                    class="col-5 col-form-label"
                                                                                    id="scheduleLabel">{{'gis.quotation.year_of_manufacture'
                                                                                    | translate}}</label>
                                                                                <div class="col-7">
                                                                                    <select
                                                                                        class="form-select form-control-sm mb-1"
                                                                                        id="scheduleInput"
                                                                                        formControlName="yearOfManufacture">
                                                                                        <option></option>
                                                                                        <option></option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <!-- **ROW 4** -->
                                                                    <div class="row" id="scheduleRows">
                                                                        <div class="col-xl-6">
                                                                            <div class="mb-3 row">
                                                                                <label for="minmax-buttons"
                                                                                    class="col-5 col-form-label "
                                                                                    id="scheduleLabel">{{'gis.quotation.seating_capacity'
                                                                                    | translate}}</label>
                                                                                <div class="col-7">
                                                                                    <select
                                                                                        class="form-select form-control-sm mb-1"
                                                                                        id="scheduleInput"
                                                                                        formControlName="carryCapacity">
                                                                                        <option></option>
                                                                                        <option></option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-xl-6">
                                                                            <div class="mb-3 row">
                                                                                <label for="minmax-buttons"
                                                                                    class="col-5 col-form-label"
                                                                                    id="scheduleLabel">{{'gis.quotation.value'
                                                                                    | translate}}</label>
                                                                                <div class="col-7">
                                                                                    <input type="number"
                                                                                        id="scheduleInput"
                                                                                        class="form-control form-control-sm mb-1"
                                                                                        formControlName="value">
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <!-- **ROW 5** -->
                                                                    <div class="row" id="scheduleRows">
                                                                        <div class="col-xl-6">
                                                                            <div class="mb-3 row">
                                                                                <label for="minmax-buttons"
                                                                                    class="col-5 col-form-label "
                                                                                    id="scheduleLabel">{{'gis.quotation.body_type'
                                                                                    | translate}}</label>
                                                                                <div class="col-7">
                                                                                    <select
                                                                                        class="form-select form-control-sm mb-1"
                                                                                        id="scheduleInput"
                                                                                        formControlName="bodyType">
                                                                                        <option></option>
                                                                                        <option></option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-xl-6">
                                                                            <div class="mb-3 row">
                                                                                <label for="minmax-buttons"
                                                                                    class="col-5 col-form-label"
                                                                                    id="scheduleLabel">{{'gis.quotation.cover_type'
                                                                                    | translate}}</label>
                                                                                <div class="col-7">
                                                                                    <input type="text"
                                                                                        id="scheduleInput"
                                                                                        class="form-control form-control-sm mb-1"
                                                                                        formControlName="coverType">

                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <!-- **ROW 6** -->
                                                                    <div class="row" id="scheduleRows">
                                                                        <div class="col-xl-6">
                                                                            <div class="mb-3 row">
                                                                                <label for="minmax-buttons"
                                                                                    class="col-5 col-form-label "
                                                                                    id="scheduleLabel">{{'gis.quotation.item_no'
                                                                                    | translate}}</label>
                                                                                <div class="col-7">
                                                                                    <input type="number"
                                                                                        id="scheduleInput"
                                                                                        class="form-control form-control-sm mb-1"
                                                                                        formControlName="coverType">
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-xl-6">
                                                                            <div class="mb-3 row">
                                                                                <label for="minmax-buttons"
                                                                                    class="col-5 col-form-label"
                                                                                    id="scheduleLabel">{{'gis.quotation.color'
                                                                                    | translate}}</label>
                                                                                <div class="col-7">
                                                                                    <select
                                                                                        class="form-select form-control-sm mb-1"
                                                                                        id="scheduleInput"
                                                                                        formControlName="color">
                                                                                        <option></option>
                                                                                        <option></option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <!-- **ROW 7** -->
                                                                    <div class="row" id="scheduleRows">
                                                                        <div class="col-xl-6">
                                                                            <div class="mb-3 row">
                                                                                <label for="minmax-buttons"
                                                                                    class="col-5 col-form-label "
                                                                                    id="scheduleLabel">{{'gis.quotation.engine_no'
                                                                                    | translate}}</label>
                                                                                <div class="col-7">
                                                                                    <input type="number"
                                                                                        id="scheduleInput"
                                                                                        class="form-control form-control-sm mb-1"
                                                                                        formControlName="engineNumber">
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-xl-6">
                                                                            <div class="mb-3 row">
                                                                                <label for="minmax-buttons"
                                                                                    class="col-5 col-form-label"
                                                                                    id="scheduleLabel">{{'gis.quotation.terrorism_applicable'
                                                                                    | translate}}</label>
                                                                                <div class="col-7">
                                                                                    <select
                                                                                        class="form-select form-control-sm mb-1"
                                                                                        id="scheduleInput"
                                                                                        formControlName="color">
                                                                                        <option>{{'gis.policy.yes' |
                                                                                            translate}}</option>
                                                                                        <option>{{'gis.policy.no' |
                                                                                            translate}}</option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <!-- **ROW 8** -->
                                                                    <div class="row" id="scheduleRows">
                                                                        <div class="col-xl-6">
                                                                            <div class="mb-3 row">
                                                                                <label for="minmax-buttons"
                                                                                    class="col-5 col-form-label "
                                                                                    id="scheduleLabel">{{'gis.quotation.logbook_no'
                                                                                    | translate}}.</label>
                                                                                <div class="col-7">
                                                                                    <input type="number"
                                                                                        id="scheduleInput"
                                                                                        class="form-control form-control-sm mb-1"
                                                                                        formControlName="logBook">
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-xl-6">
                                                                            <div class="mb-3 row">
                                                                                <label for="minmax-buttons"
                                                                                    class="col-5 col-form-label"
                                                                                    id="scheduleLabel">{{'gis.quotation.security_device1'
                                                                                    | translate}}</label>
                                                                                <div class="col-7">
                                                                                    <select
                                                                                        class="form-select form-control-sm mb-1"
                                                                                        id="scheduleInput"
                                                                                        formControlName="color">
                                                                                        <option></option>
                                                                                        <option></option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <!-- **ROW 9** -->
                                                                    <div class="row" id="scheduleRows">
                                                                        <div class="col-xl-6">
                                                                            <div class="mb-3 row">
                                                                                <label for="minmax-buttons"
                                                                                    class="col-5 col-form-label "
                                                                                    id="scheduleLabel">{{'gis.quotation.motor_accessories'
                                                                                    | translate}}</label>
                                                                                <div class="col-7">
                                                                                    <select
                                                                                        class="form-select form-control-sm mb-1"
                                                                                        id="scheduleInput"
                                                                                        formControlName="color">
                                                                                        <option></option>
                                                                                        <option></option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-xl-6">
                                                                            <div class="mb-3 row">
                                                                                <label for="minmax-buttons"
                                                                                    class="col-5 col-form-label"
                                                                                    id="scheduleLabel">{{'gis.quotation.model'
                                                                                    | translate}}</label>
                                                                                <div class="col-7">
                                                                                    <select
                                                                                        class="form-select form-control-sm mb-1"
                                                                                        id="scheduleInput"
                                                                                        formControlName="bodyType">
                                                                                        <option></option>
                                                                                        <option></option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <!-- **ROW 10** -->
                                                                    <div class="row" id="scheduleRows">
                                                                        <div class="col-xl-6">
                                                                            <div class="mb-3 row">
                                                                                <label for="minmax-buttons"
                                                                                    class="col-5 col-form-label "
                                                                                    id="scheduleLabel">{{'gis.quotation.security_device'
                                                                                    | translate}}</label>
                                                                                <div class="col-7">
                                                                                    <select
                                                                                        class="form-select form-control-sm mb-1"
                                                                                        id="scheduleInput"
                                                                                        formControlName="color">
                                                                                        <option></option>
                                                                                        <option></option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-xl-6">
                                                                            <div class="mb-3 row">
                                                                                <label for="minmax-buttons"
                                                                                    class="col-5 col-form-label"
                                                                                    id="scheduleLabel">{{'gis.quotation.regular_driver_name'
                                                                                    | translate}}</label>
                                                                                <div class="col-7">
                                                                                    <select
                                                                                        class="form-control form-control-sm mb-1"
                                                                                        id="scheduleInput"
                                                                                        formControlName="color">
                                                                                        <option></option>
                                                                                        <option></option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <!-- **ROW 11** -->
                                                                    <div class="row" id="scheduleRows">
                                                                        <div class="col-xl-6">
                                                                            <div class="mb-3 row">
                                                                                <label for="minmax-buttons"
                                                                                    class="col-5 col-form-label "
                                                                                    id="scheduleLabel">{{'gis.quotation.sch_active'
                                                                                    | translate}}</label>
                                                                                <div class="col-7">
                                                                                    <input type="number"
                                                                                        id="scheduleInput"
                                                                                        class="form-control form-control-sm mb-1"
                                                                                        formControlName="color">
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-xl-6">
                                                                            <div class="mb-3 row">
                                                                                <label for="minmax-buttons"
                                                                                    class="col-5 col-form-label"
                                                                                    id="scheduleLabel">{{'gis.quotation.licence_no'
                                                                                    | translate}}</label>
                                                                                <div class="col-7">
                                                                                    <input type="number"
                                                                                        id="scheduleInput"
                                                                                        class="form-control form-control-sm mb-1"
                                                                                        formControlName="color">
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <!-- **ROW 12** -->
                                                                    <div class="row" id="scheduleRows">
                                                                        <div class="col-xl-6">
                                                                            <div class="mb-3 row">
                                                                                <label for="minmax-buttons"
                                                                                    class="col-5 col-form-label "
                                                                                    id="scheduleLabel">{{'gis.quotation.driver_licence_date'
                                                                                    | translate}}</label>
                                                                                <div class="col-7">
                                                                                    <input type="datetime"
                                                                                        id="scheduleInput"
                                                                                        class="form-control form-control-sm mb-1"
                                                                                        formControlName="color">
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-xl-6">
                                                                            <div class="mb-3 row">
                                                                                <label for="minmax-buttons"
                                                                                    class="col-5 col-form-label"
                                                                                    id="scheduleLabel">{{'gis.driver_sms_no.model'
                                                                                    | translate}}</label>
                                                                                <div class="col-7">
                                                                                    <input type="number"
                                                                                        id="scheduleInput"
                                                                                        class="form-control form-control-sm mb-1"
                                                                                        formControlName="color">
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <!-- **ROW 13** -->
                                                                    <div class="row" id="scheduleRows">
                                                                        <div class="col-xl-6">
                                                                            <div class="mb-3 row">
                                                                                <label for="minmax-buttons"
                                                                                    class="col-5 col-form-label "
                                                                                    id="scheduleLabel">{{'gis.driver_relation_insured.model'
                                                                                    | translate}}</label>
                                                                                <div class="col-7">
                                                                                    <input type="text"
                                                                                        id="scheduleInput"
                                                                                        class="form-control form-control-sm mb-1"
                                                                                        formControlName="color">
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-xl-6">
                                                                            <div class="mb-3 row">
                                                                                <label for="minmax-buttons"
                                                                                    class="col-5 col-form-label"
                                                                                    id="scheduleLabel">{{'gis.quotation.driver-email_address'
                                                                                    | translate}}</label>
                                                                                <div class="col-7">
                                                                                    <input type="text"
                                                                                        id="scheduleInput"
                                                                                        class="form-control form-control-sm mb-1"
                                                                                        formControlName="color">
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                            </div>

                                                            <div class="row mt-3 mb-2 mx-3">
                                                                <div class="col-6 ">
                                                                    <button type="button" class="btn btn-primary"
                                                                        (click)="clearForm()">{{'gis.quotation.clear' |
                                                                        translate}}</button>

                                                                </div>
                                                                <div class="col-6 d-flex justify-content-end">
                                                                    <button type="button"
                                                                        class="btn btn-outline-primary " id="
                                           " (click)="updateSchedule()" data-bs-dismiss="modal">{{'gis.quotation.save_details'
                                                                        | translate}}</button>
                                                                </div>
                                                            </div>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Delete Risk  Modal -->
                                        <div class="modal fade" id="deleteRisk" tabindex="-1" role="dialog"
                                            aria-labelledby="deleteRisk" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered" role="document">
                                                <div class="modal-content" id="deleteRisk">
                                                    <div class="modal-body ">
                                                        <p class="deleteMessage mt-4 mb-4">
                                                            {{'gis.policy.are_you_sure_you_want_to_delete' | translate}}
                                                        </p>
                                                        <div class="d-flex justify-content-center mb-3">
                                                            <button type="button" class="btn btn-primary px-5"
                                                                id="delete"
                                                                data-bs-dismiss="modal">{{'gis.policy.yes_delete' |
                                                                translate}} </button>
                                                        </div>
                                                        <div class="d-flex justify-content-center mb-2">
                                                            <button type="button" class="btn btn-outline-primary px-5"
                                                                data-bs-dismiss="modal">{{'gis.policy.no_im_not' |
                                                                translate}}</button>
                                                        </div>


                                                        <!-- <div class="row mt-4 mb-2 d-flex justify-content-center">
                                          <button type="button" class="btn btn-outline-primary "
                                                  data-bs-dismiss="modal">Cancel</button>
                                          <div class="col-6 ">
                                              <button type="button" class="btn btn-outline-primary "
                                                  data-bs-dismiss="modal">Cancel</button>
                                          </div>
                                          <div class="col-6 d-flex justify-content-end">
                                              <button type="button" class="btn btn-primary" id="save"
                                                  data-bs-dismiss="modal" (click)="deleteCoinsurance" >Delete</button>
                        
                                          </div>
                                          <div class="row">
                                              <button type="button" class="btn btn-primary" id="save"
                                                  data-bs-dismiss="modal" (click)="deleteCoinsurance" >Delete</button>
                                          </div>
                                      </div> -->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <!-- PREMIUM ITEMS -->
                    <div class="card mt-2 mb-2 riskDetailsCards">
                        <div class="card-body">
                            <div class="row ">
                                <!-- Toggle Button Row -->
                                <div>
                                    <div class="row">
                                        <div class="col-sm-3">
                                            <p class="subheading">{{'gis.policy.premium_items' |
                                                translate}}</p>
                                        </div>
                                        <div class="col-sm-9 d-flex justify-content-end">
                                            <div class="row mb-2">
                                                <div class="col-3" *ngIf="isPremiumDetailOpen">
                                                    <button type="button" id="icon" class="btn btn-success"
                                                        data-bs-toggle="modal" data-bs-target="#addPremiumItem"
                                                        title="Add">
                                                        <i class="fa-solid fa-plus"></i>
                                                    </button>
                                                </div>
                                                <div class="col-3" *ngIf="isPremiumDetailOpen">
                                                    <button type="button" id="icon" class="btn btn-primary" title="Edit"
                                                        data-bs-toggle="modal" data-bs-target="#editPremiumItem">
                                                        <i class="fa-solid fa-pencil"></i>
                                                    </button>
                                                </div>
                                                <div class="col-3" *ngIf="isPremiumDetailOpen">

                                                    <button type="button" id="icon" class="btn btn-primary"
                                                        data-bs-toggle="modal" id="openModalPremiumButtonDelete"
                                                        [hidden]="true" data-bs-target="#deletePremiumItem"
                                                        title="Delete">
                                                    </button>
                                                    <button type="button" id="icon" class="btn btn-primary"
                                                        title="Delete">
                                                        <i class="fa-solid fa-trash-can"
                                                            (click)="openPremiumDeleteModal()"></i>
                                                    </button>
                                                </div>
                                                <div class="col-3">
                                                    <button type="button" id="icon" class="btn btn-primary"
                                                        (click)="togglePremiumDetails()">
                                                        <i class="fa-solid fa-chevron-down"></i>
                                                    </button>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Collapse Content -->
                                <div class="collapse mt-4" id="premiumItems" [class.show]="isPremiumDetailOpen">
                                    <!-- Content inside the collapse -->
                                    <p-table #dt1 [value]="sectionsDetails" dataKey="code" editMode="row"
                                        selectionMode="single" [(selection)]="selectedPremiumItem"
                                        [tableStyle]="{'min-width': '50rem'}" styleClass="p-datatable-sm"
                                        responsiveLayout="scroll" class="ui-datatable" [autoLayout]="true">

                                        <ng-template pTemplate="header">
                                            <tr>
                                                <th>{{'gis.policy.group' |
                                                    translate}}</th>
                                                <th>{{'gis.policy.row_no' |
                                                    translate}}.</th>
                                                <th>{{'gis.policy.short_desc' |
                                                    translate}}</th>
                                                <th>{{'gis.policy.description' |
                                                    translate}}</th>
                                                <th> {{'gis.policy.limit_amount' |
                                                    translate}}</th>
                                                <th> {{'gis.policy.premium_rate' |
                                                    translate}}</th>
                                                <th> {{'gis.policy.div_factor' |
                                                    translate}}</th>
                                                <th>{{'gis.policy.premium' |
                                                    translate}}</th>
                                            </tr>
                                        </ng-template>

                                        <ng-template pTemplate="body" let-data let-ri="rowIndex">
                                            <tr [pSelectableRow]="data"
                                                [class.p-highlight]="data === selectedPremiumItem"
                                                (click)="onEditRiskSectiion(selectedPremiumItem)">
                                                <td></td>
                                                <td></td>
                                                <td>{{data.sectionShortDesc}}</td>
                                                <td>{{data.sectionDesc}}</td>
                                                <td>{{data.limitAmount}}</td>
                                                <td>{{data.pilPremRate}}</td>
                                                <td>{{data.divFactor}}</td>
                                                <td>{{data.premium}}</td>
                                            </tr>
                                        </ng-template>
                                    </p-table>

                                    <!-- Add Premium Item Modal -->
                                    <div class="modal fade" id="addPremiumItem" tabindex="-1" role="dialog"
                                        aria-labelledby="addPremiumItemLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered " role="document">
                                            <div class="modal-content" id="addPremiumItemModal">
                                                <div class="modal-body">
                                                    <h5 class="modal-title mt-2" id="riskOtherDetailsLabel">
                                                        {{'gis.policy.risk_sections' |
                                                        translate}}
                                                    </h5>
                                                    <div class="search-container mb-3">
                                                        <span class="search-icon"><i class="fa fa-search"></i></span>
                                                        <input type="text" placeholder="Search"
                                                            id="search-input-Rsection" [(ngModel)]="searchText" />
                                                    </div>
                                                    <!-- <div class="scrollable-list">
                        <div *ngFor="let section of filteredAllMatchingSections">
                          <div class="form-check" *ngIf="matchesSearch(section.description)">
                            <input class="form-check-input" type="checkbox" [id]="'checkbox-' + section.code" (change)="onCheckboxChange(section)" />
                            <label class="form-check-label" [for]="'checkbox-' + section.code">
                              {{ section.description }}
                            </label>
                          </div>
                          
                        </div>
                        
                      </div> -->
                                                    <div class="scrollable-list">
                                                        <div *ngFor="let section of filteredAllMatchingSections">
                                                            <div class="form-check"
                                                                *ngIf="matchesSearch(section.description)">
                                                                <input class="form-check-input" type="checkbox"
                                                                    [id]="'checkbox-' + section.code"
                                                                    [checked]="isSelected(section)"
                                                                    (change)="onCheckboxChange(section)" />
                                                                <label class="form-check-label section-label"
                                                                    [for]="'checkbox-' + section.code">
                                                                    {{ section.description }}
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>



                                                    <div class="mt-4 d-flex justify-content-end">
                                                        <button type="button" class="btn btn-primary " id="saveDetails"
                                                            data-bs-dismiss="modal" (click)="createRiskSection()">
                                                            {{'gis.policy.save_details' |
                                                            translate}}</button>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                    <!-- Edit Premium Item Modal -->
                                    <div class="modal fade" id="editPremiumItem" tabindex="-1" role="dialog"
                                        aria-labelledby="editPremiumItem" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                            <div class="modal-content" id="editPremiumItem">
                                                <div class="modal-body ">
                                                    <button type="button" class="btn-close ms-auto py-2 px-2 float-end"
                                                        data-bs-dismiss="modal" aria-label="Close" id="close"></button>
                                                    <h5 class="modal-title mt-2" id="editScheduleLabel">Edit risk
                                                        section
                                                        details{{'gis.policy.premium_items' | translate}}</h5>
                                                    <form [formGroup]="scheduleDetailsForm">
                                                        <!-- **ROW 1** -->
                                                        <div class="row" id="sectionRows">
                                                            <div class="col-xl-6">
                                                                <div class="mb-3 row">
                                                                    <label for="minmax-buttons"
                                                                        class="col-5 col-form-label required"
                                                                        id="sectionLabel">{{'gis.policy.id' |
                                                                        translate}}</label>
                                                                    <div class="col-7">
                                                                        <input type="text" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1">

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-xl-6">
                                                                <div class="mb-3 row">
                                                                    <label for="minmax-buttons"
                                                                        class="col-5 col-form-label required"
                                                                        id="sectionLabel">{{'gis.policy.rate_type' |
                                                                        translate}}</label>
                                                                    <div class="col-7">
                                                                        <input type="text" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- **ROW 2** -->
                                                        <div class="row" id="sectionRows">
                                                            <div class="col-xl-6">
                                                                <div class="mb-3 row">
                                                                    <label for="minmax-buttons"
                                                                        class="col-5 col-form-label required"
                                                                        id="sectionLabel">{{'gis.policy.description' |
                                                                        translate}}</label>
                                                                    <div class="col-7">
                                                                        <input type="text" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1">

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-xl-6">
                                                                <div class="mb-3 row">
                                                                    <label for="minmax-buttons"
                                                                        class="col-5 col-form-label required"
                                                                        id="sectionLabel"> {{'gis.policy.premium_type' |
                                                                        translate}}</label>
                                                                    <div class="col-7">
                                                                        <input type="text" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1">

                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                        <!-- **ROW 3** -->
                                                        <div class="row" id="sectionRows">
                                                            <div class="col-xl-6">
                                                                <div class="mb-3 row">
                                                                    <label for="minmax-buttons"
                                                                        class="col-5 col-form-label required"
                                                                        id="sectionLabel">{{'gis.policy.group' |
                                                                        translate}}</label>
                                                                    <div class="col-7">
                                                                        <input type="number" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1">

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-xl-6">
                                                                <div class="mb-3 row">
                                                                    <label for="minmax-buttons"
                                                                        class="col-5 col-form-label " id="sectionLabel">
                                                                        {{'gis.policy.limit_amount' |
                                                                        translate}}</label>
                                                                    <div class="col-7">
                                                                        <input type="number" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- **ROW 4** -->
                                                        <div class="row" id="sectionRows">
                                                            <div class="col-xl-6">
                                                                <div class="mb-3 row">
                                                                    <label for="minmax-buttons"
                                                                        class="col-5 col-form-label required"
                                                                        id="sectionLabel">{{'gis.policy.free_limit' |
                                                                        translate}}</label>
                                                                    <div class="col-7">
                                                                        <input type="number" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1">

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-xl-6">
                                                                <div class="mb-3 row">
                                                                    <label for="minmax-buttons"
                                                                        class="col-5 col-form-label required "
                                                                        id="sectionLabel"> {{'gis.policy.premium_rate' |
                                                                        translate}}</label>
                                                                    <div class="col-7">
                                                                        <input type="number" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- **ROW 5** -->
                                                        <div class="row" id="sectionRows">
                                                            <div class="col-xl-6">
                                                                <div class="mb-3 row">
                                                                    <label for="minmax-buttons"
                                                                        class="col-5 col-form-label " id="sectionLabel">
                                                                        {{'gis.policy.div_by' | translate}}</label>
                                                                    <div class="col-7">
                                                                        <input type="number" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1">

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-xl-6">
                                                                <div class="mb-3 row">
                                                                    <label for="minmax-buttons"
                                                                        class="col-5 col-form-label  "
                                                                        id="sectionLabel">
                                                                        {{'gis.policy.multi_rate' | translate}}</label>
                                                                    <div class="col-7">
                                                                        <input type="number" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- **ROW 6** -->
                                                        <div class="row" id="sectionRows">
                                                            <div class="col-xl-6">
                                                                <div class="mb-3 row">
                                                                    <label for="minmax-buttons"
                                                                        class="col-5 col-form-label " id="sectionLabel">
                                                                        {{'gis.quotation.div_multi_by' |
                                                                        translate}}</label>
                                                                    <div class="col-7">
                                                                        <input type="number" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1">

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-xl-6">
                                                                <div class="mb-3 row">
                                                                    <label for="minmax-buttons"
                                                                        class="col-5 col-form-label  "
                                                                        id="sectionLabel">
                                                                        {{'gis.policy.premium' | translate}}</label>
                                                                    <div class="col-7">
                                                                        <input type="number" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- **ROW 7** -->
                                                        <div class="row" id="sectionRows">
                                                            <div class="col-xl-6">
                                                                <div class="mb-3 row">
                                                                    <label for="minmax-buttons"
                                                                        class="col-5 col-form-label " id="sectionLabel">
                                                                        {{'gis.policy.min_premium' | translate}}</label>
                                                                    <div class="col-7">
                                                                        <input type="number" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1">

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-xl-6">
                                                                <div class="mb-3 row">
                                                                    <label for="minmax-buttons"
                                                                        class="col-5 col-form-label  "
                                                                        id="sectionLabel">
                                                                        {{'gis.policy.accumulation' |
                                                                        translate}}</label>
                                                                    <div class="col-7">
                                                                        <input type="number" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- **ROW 8** -->
                                                        <div class="row" id="sectionRows">
                                                            <div class="col-xl-6">
                                                                <div class="mb-3 row">
                                                                    <label for="minmax-buttons"
                                                                        class="col-5 col-form-label "
                                                                        id="sectionLabel">{{'gis.policy.remarks' |
                                                                        translate}}</label>
                                                                    <div class="col-7">
                                                                        <input type="text" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1">

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-xl-6">
                                                                <div class="mb-3 row">
                                                                    <label for="minmax-buttons"
                                                                        class="col-5 col-form-label  "
                                                                        id="sectionLabel">
                                                                        {{'gis.policy.declaration' | translate}}</label>
                                                                    <div class="col-7">
                                                                        <input type="text" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- **ROW 9** -->
                                                        <div class="row" id="sectionRows">
                                                            <div class="col-xl-6">
                                                                <div class="mb-3 row">
                                                                    <label for="minmax-buttons"
                                                                        class="col-5 col-form-label  "
                                                                        id="sectionLabel">
                                                                        {{'gis.policy.compute' | translate}}</label>
                                                                    <div class="col-7">
                                                                        <input class="form-check-input " type="checkbox"
                                                                            id="compute">
                                                                        <label for="minmax-buttons"
                                                                            class="col-5 col-form-label ms-3"
                                                                            id="sectionLabel"> {{'gis.policy.dual_basis'
                                                                            |
                                                                            translate}}</label>
                                                                        <input class="form-check-input " type="checkbox"
                                                                            id="compute">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-xl-6">
                                                                <div class="mb-3 row">
                                                                    <label for="minmax-buttons"
                                                                        class="col-5 col-form-label  "
                                                                        id="sectionLabel">
                                                                        {{'gis.policy.indemnity_period_units' |
                                                                        translate}}</label>
                                                                    <div class="col-7">

                                                                        <select
                                                                            class="form-select form-control-sm selectInput"
                                                                            id="modelYear" formControlName="modelYear">
                                                                            <option value="">Days
                                                                                {{'gis.policy.premium_items' |
                                                                                translate}}
                                                                            </option>
                                                                            <option value="">
                                                                                Weeks{{'gis.policy.premium_items' |
                                                                                translate}}</option>
                                                                            <option value="">
                                                                                Months{{'gis.policy.premium_items' |
                                                                                translate}}</option>


                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- **ROW 10** -->
                                                        <div class="row" id="sectionRows">
                                                            <div class="col-xl-6">
                                                                <div class="mb-3 row">
                                                                    <label for="minmax-buttons"
                                                                        class="col-5 col-form-label "
                                                                        id="sectionLabel">{{'gis.policy.first_indemnity'
                                                                        |
                                                                        translate}}%</label>
                                                                    <div class="col-7">
                                                                        <input type="text" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1">

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-xl-6">
                                                                <div class="mb-3 row">
                                                                    <label for="minmax-buttons"
                                                                        class="col-5 col-form-label  "
                                                                        id="sectionLabel">{{'gis.policy.indemnity_remainder_period'
                                                                        | translate}}</label>
                                                                    <div class="col-7">
                                                                        <input type="text" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- **ROW 11** -->
                                                        <div class="row" id="sectionRows">
                                                            <div class="col-xl-6">
                                                                <div class="mb-3 row">
                                                                    <label for="minmax-buttons"
                                                                        class="col-5 col-form-label " id="sectionLabel">
                                                                        {{'gis.policy.email_pct' | translate}}</label>
                                                                    <div class="col-7">
                                                                        <input type="text" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1">

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-xl-6">
                                                                <div class="mb-3 row">
                                                                    <label for="minmax-buttons"
                                                                        class="col-5 col-form-label  "
                                                                        id="sectionLabel">{{'gis.policy.loc_division_factor'
                                                                        | translate}}</label>
                                                                    <div class="col-7">
                                                                        <input type="text" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- **ROW 12** -->
                                                        <div class="row" id="sectionRows">
                                                            <div class="col-xl-6">
                                                                <div class="mb-3 row">
                                                                    <label for="minmax-buttons"
                                                                        class="col-5 col-form-label "
                                                                        id="sectionLabel">{{'gis.policy.top_loc_rate' |
                                                                        translate}}</label>
                                                                    <div class="col-7">
                                                                        <input type="text" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1">

                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-xl-6">

                                                            </div>
                                                        </div>
                                                    </form>
                                                    <div class="row mt-3 mb-2 mx-3">
                                                        <div class="col-6 ">
                                                            <button type="button"
                                                                class="btn btn-primary">{{'gis.policy.clear' |
                                                                translate}}</button>

                                                        </div>
                                                        <div class="col-6 d-flex justify-content-end">
                                                            <button type="button" class="btn btn-outline-primary " id="
                               " data-bs-dismiss="modal">{{'gis.policy.save_details' | translate}}</button>
                                                        </div>
                                                    </div>


                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Delete Premium Item  Modal -->
                                    <div class="modal fade" id="deletePremiumItem" tabindex="-1" role="dialog"
                                        aria-labelledby="deletePremiumItem" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered" role="document">
                                            <div class="modal-content" id="deletePremiumItem">
                                                <div class="modal-body ">
                                                    <p class="deleteMessage mt-4 mb-4">
                                                        {{'gis.policy.are_you_sure_you_want_to_delete' | translate}}</p>
                                                    <div class="d-flex justify-content-center mb-3">
                                                        <button type="button" class="btn btn-primary px-5" id="delete"
                                                            data-bs-dismiss="modal"
                                                            (click)="deletePremiumItem()">{{'gis.policy.yes_delete' |
                                                            translate}} </button>
                                                    </div>
                                                    <div class="d-flex justify-content-center mb-2">
                                                        <button type="button" class="btn btn-outline-primary px-5"
                                                            data-bs-dismiss="modal">{{'gis.policy.no_im_not' |
                                                            translate}}</button>
                                                    </div>



                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- RISK CLAUSE DETAILS -->
                    <div class="card mt-2 mb-2 riskDetailsCards">
                        <div class="card-body">
                            <div class="row">
                                <div>
                                    <div>
                                        <div class="row">
                                            <div class="col-3">
                                                <!-- <strong>{{'gis.quotation.risk_clauses' | translate}}</strong> -->
                                                <p class="subheading">{{'gis.quotation.risk_clauses' | translate}}</p>

                                            </div>

                                            <div class="col-sm-9 d-flex justify-content-end">
                                                <div class="row  mb-2">

                                                    <!-- <div class="col-sm-3"></div> -->

                                                    <div class="col-3" *ngIf="isRiskClauseDetailsOpen">
                                                        <button type="button" id="icon" class="btn btn-primary"
                                                            data-bs-toggle="modal" data-bs-target="#riskClausesModal"
                                                            title="Add">
                                                            <i class="fa-solid fa-plus"></i>
                                                        </button>
                                                    </div>
                                                    <div class="col-3" *ngIf="isRiskClauseDetailsOpen">
                                                        <button type="button" id="icon" class="btn btn-primary"
                                                            data-bs-toggle="modal" data-bs-target="#editSection"
                                                            title="Edit">
                                                            <i class="fa-solid fa-pencil"></i>
                                                        </button>
                                                    </div>
                                                    <div class="col-3" *ngIf="isRiskClauseDetailsOpen">
                                                        <button type="button" id="icon" class="btn btn-primary"
                                                            data-bs-toggle="modal" id="openRiskClauseModalButtonDelete"
                                                            [hidden]="true" data-bs-target="#deleteRiskClause"
                                                            title="Delete">
                                                        </button>
                                                        <button type="button" id="icon" class="btn btn-primary"
                                                            title="Delete">
                                                            <i class="fa-solid fa-trash-can"
                                                                (click)="openRiskClauseDeleteModal()"></i>
                                                        </button>
                                                    </div>
                                                    <div class="col-3">
                                                        <button type="button" id="icon" class="btn btn-primary"
                                                            data-bs-toggle="collapse" data-bs-target="#riskClauses"
                                                            aria-expanded="false" aria-controls="riskClauses"
                                                            [attr.aria-expanded]="!isRiskClauseDetailsOpen"
                                                            (click)="toggleRiskClauseDetails()">
                                                            <i class="fa-solid fa-chevron-down"></i>
                                                        </button>
                                                    </div>


                                                </div>

                                            </div>
                                        </div>

                                    </div>
                                    <div class="collapse" id="riskClauses">


                                        <p-table [value]="selectedSubClauseList" dataKey="code" selectionMode="single"
                                            editMode="row" [tableStyle]="{'min-width': '50rem'}"
                                            [(selection)]="selectedClause" responsiveLayout="scroll" [autoLayout]="true"
                                            [paginator]="true" [rows]="5" [showCurrentPageReport]="true"
                                            currentPageReportTemplate=" {first} - {last} of {totalRecords}">

                                            <ng-template pTemplate="header">
                                                <tr>
                                                    <!-- <th style="width: 5%;padding-right: 50px;">{{'gis.quotation.select' | translate}}</th> -->
                                                    <th>Header</th>
                                                    <th>Clause</th>
                                                    <th></th>

                                                    <th>{{'gis.quotation.editable' | translate}}</th>

                                                </tr>
                                            </ng-template>
                                            <ng-template pTemplate="body" let-selectedClauseList let-editing="editing"
                                                let-ri="rowIndex">
                                                <tr (click)="onSelectRiskClauses(selectedClauseList)"
                                                    [pEditableRow]="selectedClauseList"
                                                    [pSelectableRow]="selectedClauseList"
                                                    [class.p-highlight]="selectedClauseList === selectedClause">
                                                    <!-- <td>
                                              <p-tableCheckbox [value]="selectedClauseList"></p-tableCheckbox>
                                          </td> -->

                                                    <td style=" white-space: nowrap;
                                              overflow: hidden;
                                              text-overflow: ellipsis;
                                              overflow-y: auto;
                                              max-width: 250px;" pTooltip="{{selectedClauseList.heading }}"
                                                        tooltipPosition="top">
                                                        <p-cellEditor>
                                                            <ng-template pTemplate="input">
                                                                <input pInputText type="text"
                                                                    [(ngModel)]="selectedClauseList.heading"
                                                                    class="form-control form-control-sm"
                                                                    [ngModelOptions]="{standalone: true}">
                                                            </ng-template>
                                                            <ng-template pTemplate="output">
                                                                {{selectedClauseList.heading}}
                                                            </ng-template>
                                                        </p-cellEditor>
                                                    </td>
                                                    <td
                                                        style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width:300px; overflow-y: auto;">
                                                        <p-cellEditor>
                                                            <ng-template pTemplate="input">
                                                                <input pInputTextarea type="text" rows="5" cols="30"
                                                                    [(ngModel)]="selectedClauseList.clause"
                                                                    class="form-control form-control-sm"
                                                                    [ngModelOptions]="{standalone: true}">
                                                            </ng-template>
                                                            <ng-template pTemplate="output">
                                                                {{selectedClauseList.clause}}
                                                            </ng-template>
                                                            <!-- Helper icon added next to the wording column -->
                                                        </p-cellEditor>
                                                    </td>

                                                    <td>
                                                        <button pButton pRipple type="button"
                                                            (click)="openHelperModal(selectedClauseList)"
                                                            icon="pi pi-info-circle"
                                                            class="p-button-rounded p-button-text"></button>
                                                    </td>

                                                    <!-- <td *ngIf="selectedClauseList.is_editable  !== 'Y'"
                                                        style="padding-left: 24px;">
                                                        -- </td> -->
                                                    <td>
                                                        <div
                                                            class="flex align-items-center justify-content-center gap-2">
                                                            <button *ngIf="!editing" pButton pRipple type="button"
                                                                pInitEditableRow icon="pi pi-pencil"
                                                                class="p-button-rounded p-button-text"></button>
                                                            <button *ngIf="editing" pButton pRipple type="button"
                                                                pSaveEditableRow icon="pi pi-check"
                                                                class="p-button-rounded p-button-text p-button-success mr-2"></button>
                                                            <button *ngIf="editing" pButton pRipple type="button"
                                                                pCancelEditableRow icon="pi pi-times"
                                                                class="p-button-rounded p-button-text p-button-danger"></button>
                                                        </div>
                                                    </td>

                                                </tr>
                                                <!-- Modal for each row -->
                                                <p-dialog [(visible)]="selectedClauseList.showHelperModal"
                                                    [modal]="false" [style]="{ 'width': '700px'}">
                                                    <ng-container *ngIf="selectedClauseList">
                                                        <div pResizable
                                                            [ngStyle]="{'min-width.px': 200, 'min-height.px': 150}"
                                                            (onResize)="onResize($event)">
                                                            <p>{{ selectedClauseList.clause }}</p>
                                                        </div>
                                                    </ng-container>
                                                </p-dialog>
                                            </ng-template>
                                        </p-table>
                                        <!-- RISK CLAUSES MODAL -->

                                        <div class="modal fade" id="riskClausesModal" tabindex="-1"
                                            aria-labelledby="exampleModalLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered">
                                                <div class="modal-content">

                                                    <div class="modal-body">
                                                        <button type="button" #closebutton class="float-end btn-close"
                                                            data-bs-dismiss="modal" aria-label="Close"></button>
                                                        <p class="modalTitle" id="selectClient">
                                                            {{'gis.policy.select_risk_clauses'
                                                            | translate}}
                                                        </p>
                                                    </div>
                                                    <p-table [value]="selectedClauseList" dataKey="code" editMode="row"
                                                        styleClass="p-datatable-sm" responsiveLayout="scroll"
                                                        class='ui-datatable' [autoLayout]="true">
                                                        <ng-template pTemplate="header">
                                                            <tr>
                                                                <th><p-tableHeaderCheckbox /></th>
                                                                <th>ID</th>
                                                                <th>Description</th>



                                                            </tr>
                                                        </ng-template>
                                                        <ng-template pTemplate="body" let-selectedClauseList
                                                            let-editing="editing" let-ri="rowIndex">
                                                            <tr [pEditableRow]="selectedClauseList">
                                                                <td>
                                                                    <p-tableCheckbox [value]="selectedClauseList" />
                                                                </td>
                                                                <td>{{selectedClauseList.short_description}}</td>

                                                                <td style=" white-space: nowrap;
                                  overflow: hidden;
                                  text-overflow: ellipsis;
                                  overflow-y: auto;
                                  max-width: 250px;" pTooltip="{{selectedClauseList.heading }}" tooltipPosition="top">
                                                                    {{selectedClauseList.heading}}</td>






                                                            </tr>
                                                            <!-- Modal for each row -->
                                                            <p-dialog [(visible)]="selectedClauseList.showHelperModal"
                                                                [modal]="false" [style]="{ 'width': '700px'}">
                                                                <ng-container *ngIf="selectedClauseList">
                                                                    <div pResizable
                                                                        [ngStyle]="{'min-width.px': 200, 'min-height.px': 150}"
                                                                        (onResize)="onResize($event)">
                                                                        <p>{{ selectedClauseList.wording }}</p>
                                                                    </div>
                                                                </ng-container>
                                                            </p-dialog>
                                                        </ng-template>
                                                    </p-table>

                                                    <div class="d-flex justify-content-end mt-4 mb-4">
                                                        <button type="button" class="btn btn-primary"
                                                            data-bs-dismiss="modal">{{'crm.save_details' |
                                                            translate}}</button>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <!-- DELETE Risk Clause  Modal -->
                                        <div class="modal fade" id="deleteRiskClause" tabindex="-1" role="dialog"
                                            aria-labelledby="deleteRiskClause" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered" role="document">
                                                <div class="modal-content" id="deleteRiskClause">
                                                    <div class="modal-body ">
                                                        <p class="deleteMessage mt-4 mb-4">
                                                            {{'gis.policy.are_you_sure_you_want_to_delete' | translate}}
                                                        </p>
                                                        <div class="d-flex justify-content-center mb-3">
                                                            <button type="button" class="btn btn-primary px-5"
                                                                id="delete" data-bs-dismiss="modal"
                                                                (click)="deleteRiskClause()">{{'gis.policy.yes_delete' |
                                                                translate}} </button>
                                                        </div>
                                                        <div class="d-flex justify-content-center mb-2">
                                                            <button type="button" class="btn btn-outline-primary px-5"
                                                                data-bs-dismiss="modal">{{'gis.policy.no_im_not' |
                                                                translate}}</button>
                                                        </div>



                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- RISK PERILS -->
                    <div class="card  mt-2 mb-2">
                        <div class="card-body">
                            <div class="row ">
                                <div>
                                    <div>
                                        <div class="row ">
                                            <div class="col-sm-3">
                                                <p class="subheading">Risk Perils</p>

                                            </div>
                                            <div class="col-sm-9 d-flex justify-content-end">
                                                <div class="row  mb-2">

                                                    <!-- <div class="col-sm-3"></div> -->
                                                    <div class="col-3" *ngIf="riskPerils">
                                                        <button type="button" id="icon" class="btn btn-success"
                                                            title="add" data-bs-toggle="modal"
                                                            data-bs-target="#addRiskPerilModal">
                                                            <i class="fa-solid fa-plus"></i>
                                                        </button>
                                                    </div>
                                                    <div class="col-3" *ngIf="riskPerils">
                                                        <button type="button" id="icon" class="btn btn-primary"
                                                            data-bs-toggle="modal" id="openRiskModalButtonEdit"
                                                            [hidden]="true" data-bs-target="#editSchedule" title="Edit">
                                                        </button>
                                                        <button type="button" id="icon" class="btn btn-primary"
                                                            title="Edit">
                                                            <i class="fa-solid fa-pencil"
                                                                (click)="openRiskEditModal()"></i>
                                                        </button>

                                                    </div>
                                                    <div class="col-3" *ngIf="riskPerils">
                                                        <button type="button" id="icon" class="btn btn-primary"
                                                            data-bs-toggle="modal" id="openRiskPerilModalButtonDelete"
                                                            [hidden]="true" data-bs-target="#deleteRiskPeril"
                                                            title="Delete">
                                                        </button>
                                                        <button type="button" id="icon" class="btn btn-primary"
                                                            title="Delete">
                                                            <i class="fa-solid fa-trash-can"
                                                                (click)="openRiskPerilDeleteModal()"></i>
                                                        </button>

                                                    </div>
                                                    <div class="col-3">
                                                        <button type="button" id="icon" class="btn btn-primary"
                                                            data-bs-toggle="collapse" data-bs-target="#riskPerils"
                                                            aria-expanded="false" aria-controls="riskPerils"
                                                            [attr.aria-expanded]="riskPerils"
                                                            (click)="toggleRiskPerils()">
                                                            <i class="fa-solid fa-chevron-down"></i>
                                                        </button>
                                                    </div>

                                                </div>

                                            </div>

                                        </div>
                                    </div>
                                    <div class="collapse" id="riskPerils">

                                        <p-table #dt2 [value]="policyRiskPeril" dataKey="code" selectionMode="single"
                                            [(selection)]="selectedRiskPeril" [tableStyle]="{'min-width': '50rem'}"
                                            responsiveLayout="scroll" [autoLayout]="true">


                                            <ng-template pTemplate="header">
                                                <tr>
                                                    <th>{{'gis.policy.peril_id' |translate}}</th>
                                                    <th>{{'gis.policy.peril' |translate}}</th>
                                                    <th>{{'gis.policy.type' |translate}}</th>
                                                    <th style="width: 8px;">{{'gis.policy.limit_description'
                                                        |translate}}</th>
                                                    <th style="width: 8px;">{{'gis.policy.person_limit' |translate}}
                                                    </th>
                                                    <th style="width: 8px;">{{'gis.policy.limit_amount' |translate}}
                                                    </th>
                                                    <th style="width: 8px;">{{'gis.policy.claim_amount' |translate}}
                                                    </th>
                                                    <th style="width: 8px;">{{'gis.policy.excess_type' |translate}}</th>


                                                </tr>
                                            </ng-template>

                                            <ng-template pTemplate="body" let-data let-ri="rowIndex">
                                                <tr [pSelectableRow]="data">
                                                    <td>{{data.perilDescription}}</td>
                                                    <td>{{data.description}}</td>
                                                    <td>{{data.perilType}}</td>
                                                    <td>{{data.sumInsuredOrLimit}}</td>
                                                    <td>{{data.personLimit}}</td>
                                                    <td>{{data.perilLimit}}</td>
                                                    <td>{{data.claimLimit}}</td>
                                                    <td>{{data.excessType}}</td>


                                                </tr>
                                            </ng-template>
                                        </p-table>

                                        <!-- ADD RISK PERIL MODAL -->
                                        <div class="modal fade" id="addRiskPerilModal" tabindex="-1"
                                            aria-labelledby="exampleModalLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered">
                                                <div class="modal-content">

                                                    <div class="modal-body">
                                                        <button type="button" #closebutton class="float-end btn-close"
                                                            data-bs-dismiss="modal" aria-label="Close"></button>
                                                        <p class="modalTitle">
                                                            {{'gis.policy.select_risk_peril'
                                                            | translate}}
                                                        </p>
                                                    </div>
                                                    <p-table [value]="subclassPerilList" dataKey="code"
                                                        selectionMode="single" [(selection)]="selectedPeril"
                                                        styleClass="p-datatable-sm" responsiveLayout="scroll"
                                                        class='ui-datatable' [autoLayout]="true">
                                                        <ng-template pTemplate="header">
                                                            <tr class="mb-4">

                                                                <th>Short Description</th>
                                                                <th>Description</th>
                                                                <th>Peril Type</th>
                                                            </tr>
                                                        </ng-template>
                                                        <ng-template pTemplate="body" let-data let-ri="rowIndex">
                                                            <tr [pSelectableRow]="data" (click)="getSingleRiskPeril()">
                                                                <td>{{data.shortDescription}}</td>
                                                                <td>{{data.fullDescription}}</td>
                                                                <td>{{data.perilType}}</td>
                                                            </tr>

                                                        </ng-template>
                                                    </p-table>

                                                    <div class="d-flex justify-content-end mt-4 mb-4">
                                                        <button type="button" class="btn btn-primary"
                                                            data-bs-dismiss="modal">{{'crm.save_details' |
                                                            translate}}</button>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <!--Edit Schedule Modal -->
                                        <div class="modal fade" id="editSchedule" tabindex="-1" role="dialog"
                                            aria-labelledby="editScheduleLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                <div class="modal-content">




                                                    <div class="modal-body">
                                                        <button type="button"
                                                            class="btn-close ms-auto py-2 px-2 float-end"
                                                            data-bs-dismiss="modal" aria-label="Close"
                                                            id="close"></button>
                                                        <h5 class="modal-title mt-2" id="editScheduleLabel">Edit Motor
                                                            Private Details</h5>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Delete Risk Peril  Modal -->
                                        <div class="modal fade" id="deleteRiskPeril" tabindex="-1" role="dialog"
                                            aria-labelledby="deleteRiskPeril" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered" role="document">
                                                <div class="modal-content" id="deleteRiskPeril">
                                                    <div class="modal-body ">
                                                        <p class="deleteMessage mt-4 mb-4">
                                                            {{'gis.policy.are_you_sure_you_want_to_delete' | translate}}
                                                        </p>
                                                        <div class="d-flex justify-content-center mb-3">
                                                            <button type="button" class="btn btn-primary px-5"
                                                                id="delete" data-bs-dismiss="modal"
                                                                (click)="deleteRiskPeril()">{{'gis.policy.yes_delete' |
                                                                translate}} </button>
                                                        </div>
                                                        <div class="d-flex justify-content-center mb-2">
                                                            <button type="button" class="btn btn-outline-primary px-5"
                                                                data-bs-dismiss="modal">{{'gis.policy.no_im_not' |
                                                                translate}}</button>
                                                        </div>



                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <!-- REQUIRED DOCUMENT DETAILS -->
                    <div class="card mt-2 mb-2 riskDetailsCards">
                        <div class="card-body">
                            <div class="row ">
                                <div>
                                    <div>
                                        <div class="row ">
                                            <div class="col-sm-3">
                                                <p class="subheading">{{'gis.policy.required_documents' |
                                                    translate}}</p>

                                            </div>
                                            <div class="col-sm-9 d-flex justify-content-end">
                                                <div class="row  mb-2">


                                                    <div class="col-6" *ngIf="isRequiredDocDetailOpen">
                                                        <button class="btn btn-primary import-button"
                                                            (click)="populateRequiredDocument()"
                                                            style="min-width: 141px;font-size:smaller;">Populate
                                                            mandatory documents</button>
                                                    </div>
                                                    <div class="col-6">
                                                        <div class="row">
                                                            <div class="col-3" *ngIf="isRequiredDocDetailOpen">
                                                                <button type="button" id="icon" class="btn btn-success"
                                                                    title="add" data-bs-toggle="modal"
                                                                    data-bs-target="#addrequiredDoc">
                                                                    <i class="fa-solid fa-plus"></i>
                                                                </button>
                                                            </div>
                                                            <div class="col-3" *ngIf="isRequiredDocDetailOpen">
                                                                <button type="button" id="icon" class="btn btn-primary"
                                                                    data-bs-toggle="modal"
                                                                    data-bs-target="#editrequiredDoc" title="Edit">
                                                                    <i class="fa-solid fa-pencil"></i>
                                                                </button>
                                                                <!-- <button type="button" id="icon" class="btn btn-primary"
                                                                        data-bs-toggle="modal" id="openRiskModalButtonEdit"
                                                                        [hidden]="true" data-bs-target="#editrequiredDoc" title="Edit">
                                                                    </button>
                                                                    <button type="button" id="icon" class="btn btn-primary"
                                                                        title="Edit">
                                                                        <i class="fa-solid fa-pencil" (click)="openRiskEditModal()"></i>
                                                                    </button> -->

                                                            </div>
                                                            <div class="col-3" *ngIf="isRequiredDocDetailOpen">
                                                                <button type="button" id="icon" class="btn btn-primary"
                                                                    data-bs-toggle="modal"
                                                                    id="openRequiredDocModalButtonDelete"
                                                                    [hidden]="true"
                                                                    data-bs-target="#deleteRequiredDocument"
                                                                    title="Delete">
                                                                </button>
                                                                <button type="button" id="icon" class="btn btn-primary"
                                                                    title="Delete">
                                                                    <i class="fa-solid fa-trash-can"
                                                                        (click)="openRequiredDocDeleteModal()"></i>
                                                                </button>

                                                            </div>
                                                            <div class="col-3">
                                                                <button type="button" id="icon" class="btn btn-primary"
                                                                    data-bs-toggle="collapse"
                                                                    data-bs-target="#requiredDocDetails"
                                                                    aria-expanded="false"
                                                                    aria-controls="requiredDocDetails"
                                                                    [attr.aria-expanded]="!isRequiredDocDetailOpen"
                                                                    (click)="toggleRequiredDocDetails()">
                                                                    <i class="fa-solid fa-chevron-down"></i>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- <div class="col-1"></div> -->

                                                </div>

                                            </div>

                                        </div>
                                    </div>
                                    <div class="collapse" id="requiredDocDetails">

                                        <p-table #dt2 [value]="riskDetails" dataKey="code" selectionMode="single"
                                            [(selection)]="selectedSchedule" [tableStyle]="{'min-width': '50rem'}"
                                            responsiveLayout="scroll" [autoLayout]="true" class='ui-datatable'>


                                            <ng-template pTemplate="header">
                                                <tr>
                                                    <th> {{'gis.policy.description' | translate}}</th>
                                                    <th> {{'gis.policy.submitted' | translate}}</th>
                                                    <th> {{'gis.policy.date_submitted' | translate}}</th>
                                                    <th> {{'gis.policy.remarks' | translate}}</th>
                                                    <th> {{'gis.policy.ref_no' | translate}}</th>


                                                </tr>
                                            </ng-template>

                                            <ng-template pTemplate="body" let-riskDetails let-ri="rowIndex">
                                                <tr [pSelectableRow]="riskDetails"
                                                    [class.p-highlight]="riskDetails === selectedRisk">
                                                    <td class="flexible-header"></td>
                                                    <td class="flexible-header"></td>
                                                    <td class="flexible-header"></td>
                                                    <td class="flexible-header"></td>
                                                    <td class="flexible-header"></td>


                                                </tr>
                                            </ng-template>
                                        </p-table>
                                        <!-- View Required Document Modal -->
                                        <div class="modal fade" id="addrequiredDoc" tabindex="-1" role="dialog"
                                            aria-labelledby="addrequiredDocLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered " role="document">
                                                <div class="modal-content" id="addrequiredDocItemModal">
                                                    <div class="modal-body">
                                                        <button type="button"
                                                            class="btn-close ms-auto py-2 px-2 float-end"
                                                            data-bs-dismiss="modal" aria-label="Close"
                                                            id="close"></button>
                                                        <h5 class="modal-title mt-2 mb-2" id="riskOtherDetailsLabel">
                                                            {{'gis.policy.select_required_documents' | translate}}
                                                        </h5>
                                                        <!-- <div class="search-container mb-3">
                                                                <span class="search-icon"><i class="fa fa-search"></i></span>
                                                                <input type="text" placeholder="Search"
                                                                    id="search-input-Rsection" [(ngModel)]="searchText" />
                                                            </div> -->

                                                        <!-- <div class="scrollable-list">
                                                                <div *ngFor="let document of filteredRequiredDocs">
                                                                    <div class="form-check"
                                                                        *ngIf="matchesSearch(document.description)">
                                                                        <input class="form-check-input" type="checkbox"
                                                                            [id]="'checkbox-' + document.code"
                                                                            [checked]="isSelected(document)"
                                                                            (change)="onCheckboxChange(document)" />
                                                                        <label class="form-check-label section-label"
                                                                            [for]="'checkbox-' + document.code">
                                                                            {{ document.shortDescription }}
                                                                        </label>
                                                                        <label class="form-check-label section-label"
                                                                            [for]="'checkbox-' + document.code">
                                                                            {{ document.description }}
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                            </div> -->
                                                        <p-table #dt4 [value]="requiredDocs"
                                                            [(selection)]="selectedDocument" selectionMode="single"
                                                            dataKey="code" [paginator]="true" [rows]="10"
                                                            [scrollable]="true" scrollDirection="horizontal"
                                                            [showCurrentPageReport]="true"
                                                            currentPageReportTemplate=" {first} - {last} of {totalRecords}">
                                                            <ng-template pTemplate="header">
                                                                <tr>


                                                                    <th> {{'gis.policy.short_description' | translate}}
                                                                    </th>
                                                                    <th> {{'gis.policy.description' | translate}}</th>

                                                                </tr>
                                                            </ng-template>
                                                            <ng-template pTemplate="body" let-document
                                                                let-ri="rowIndex">
                                                                <tr [pSelectableRow]="document"
                                                                    [class.p-highlight]="document === selectedDocument">

                                                                    <td>{{document.shortDescription}}</td>
                                                                    <td>{{document.description}}</td>
                                                                </tr>
                                                            </ng-template>
                                                        </p-table>



                                                        <div class="mt-4 d-flex justify-content-end">
                                                            <button type="button" class="btn btn-primary "
                                                                id="saveDetails" data-bs-dismiss="modal"
                                                                data-bs-toggle="modal"
                                                                data-bs-target="#editrequiredDoc">
                                                                {{'gis.policy.save_details' | translate}}</button>

                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>

                                        <!--Add or Edit Required Document Modal -->
                                        <div class="modal fade" #editrequiredDoc id="editrequiredDoc" tabindex="-1"
                                            role="dialog" aria-labelledby="editrequiredDocLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered " role="document">
                                                <div class="modal-content">
                                                    <div class="modal-body">
                                                        <button type="button"
                                                            class="btn-close ms-auto py-2 px-2 float-end"
                                                            data-bs-dismiss="modal" aria-label="Close"
                                                            id="close"></button>
                                                        <h5 class="modal-title mt-2 mb-3 ms-4" id="editrequiredDoc">
                                                            {{'gis.policy.edit_required_documents' | translate}}</h5>
                                                        <form [formGroup]="requiredDocumentsForm">
                                                            <!-- **ROW 1** -->
                                                            <div class="row mb-1" id="sectionRows">
                                                                <div class="col-xl-5">
                                                                    <div class="mb-1  row">
                                                                        <label for="minmax-buttons" class=""
                                                                            id="sectionLabel"> {{'gis.policy.code' |
                                                                            translate}}</label>
                                                                    </div>
                                                                    <div class="row">
                                                                        <input type="text" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1 ms-2"
                                                                            formControlName="code">
                                                                    </div>
                                                                </div>
                                                                <div class="col-xl-2"></div>
                                                                <div class="col-xl-5">
                                                                    <div class="mb-1  row">
                                                                        <label for="minmax-buttons" class=""
                                                                            id="sectionLabel">
                                                                            {{'gis.policy.description' |
                                                                            translate}}</label>
                                                                    </div>
                                                                    <div class="row">
                                                                        <input type="text" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1 ms-2"
                                                                            formControlName="description">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <!-- **ROW 2** -->
                                                            <div class="row mb-1" id="sectionRows">
                                                                <div class="col-xl-5">
                                                                    <div class="mb-1  row">
                                                                        <label for="minmax-buttons" class=""
                                                                            id="sectionLabel">{{'gis.policy.submitted' |
                                                                            translate}}</label>
                                                                    </div>
                                                                    <div class="row">
                                                                        <select
                                                                            class="form-select form-control-sm mb-1 ms-2"
                                                                            id="selectedInput"
                                                                            formControlName="isSubmitted">
                                                                            <option>Yes</option>
                                                                            <option>No</option>
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                                <div class="col-xl-2"></div>
                                                                <div class="col-xl-5">
                                                                    <div class="mb-1  row">
                                                                        <label for="minmax-buttons" class=""
                                                                            id="sectionLabel">
                                                                            {{'gis.policy.date_submitted' |
                                                                            translate}}</label>
                                                                    </div>
                                                                    <div class="row">
                                                                        <input type="date" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1 ms-2"
                                                                            formControlName="submissionDate">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <!-- **ROW 3** -->
                                                            <div class="row " id="sectionRows">
                                                                <div class="col-xl-5">
                                                                    <div class="mb-1  row">
                                                                        <label for="minmax-buttons" class=""
                                                                            id="sectionLabel"> {{'gis.policy.remarks' |
                                                                            translate}}</label>
                                                                    </div>
                                                                    <div class="row">
                                                                        <input type="text" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1 ms-2"
                                                                            formControlName="remark">
                                                                    </div>
                                                                </div>
                                                                <div class="col-xl-2"></div>
                                                                <div class="col-xl-5">
                                                                    <div class="mb-1  row">
                                                                        <label for="minmax-buttons" class=""
                                                                            id="sectionLabel"> {{'gis.policy.ref_no' |
                                                                            translate}}.</label>
                                                                    </div>
                                                                    <div class="row">
                                                                        <input type="text" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1 ms-2"
                                                                            formControlName="referenceNumber">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </form>
                                                        <div class="mt-4 d-flex justify-content-end">
                                                            <button type="button" class="btn btn-primary "
                                                                id="saveDetails"
                                                                data-bs-dismiss="modal">{{'gis.policy.save_details' |
                                                                translate}}</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Delete Risk  Modal -->
                                        <div class="modal fade" id="deleteRequiredDocument" tabindex="-1" role="dialog"
                                            aria-labelledby="deleteRisk" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered" role="document">
                                                <div class="modal-content" id="deleteRisk">
                                                    <div class="modal-body ">
                                                        <p class="deleteMessage mt-4 mb-4">
                                                            {{'gis.policy.are_you_sure_you_want_to_delete' | translate}}
                                                        </p>
                                                        <div class="d-flex justify-content-center mb-3">
                                                            <button type="button" class="btn btn-primary px-5"
                                                                id="delete" data-bs-dismiss="modal"
                                                                (click)="deleteRequiredDocuments()">{{'gis.policy.yes_delete'
                                                                |
                                                                translate}} </button>
                                                        </div>
                                                        <div class="d-flex justify-content-center mb-2">
                                                            <button type="button" class="btn btn-outline-primary px-5"
                                                                data-bs-dismiss="modal">{{'gis.policy.no_im_not' |
                                                                translate}}</button>
                                                        </div>



                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <!-- CERTIFICATES DETAILS -->
                    <div class="card mt-2 mb-2 riskDetailsCards">
                        <div class="card-body">
                            <div class="row">
                                <div>
                                    <div>
                                        <div class="row">
                                            <div class="col-sm-3">
                                                <p class="subheading"> {{'gis.policy.certificates' | translate}}</p>
                                            </div>
                                            <div class="col-sm-9 d-flex justify-content-end">
                                                <div class="row mb-2">
                                                    <!-- <div class="col-sm-3"></div> -->
                                                    <div class="col-4 d-flex align-items-center"
                                                        *ngIf="isCertificatesDetailOpen">
                                                        <input type="checkbox" id="selectCheckbox"
                                                            class="form-check-input me-2">
                                                        <label for="selectCheckbox" class="form-check-label"
                                                            id="certificateCheckboxLabel">{{'gis.policy.select_user_certifacte_iot'
                                                            | translate}}</label>
                                                    </div>
                                                    <div class="col-2" *ngIf="isCertificatesDetailOpen">
                                                        <button type="button" id="icon" class="btn btn-success"
                                                            title="add" data-bs-toggle="modal"
                                                            data-bs-target="#addCertificates">
                                                            <i class="fa-solid fa-plus"></i>
                                                        </button>
                                                    </div>
                                                    <div class="col-2" *ngIf="isCertificatesDetailOpen">
                                                        <button type="button" id="icon" class="btn btn-primary"
                                                            data-bs-toggle="modal" data-bs-target="#editCertificates"
                                                            title="Edit">
                                                            <i class="fa-solid fa-pencil"></i>
                                                        </button>
                                                    </div>
                                                    <div class="col-2" *ngIf="isCertificatesDetailOpen">
                                                        <button type="button" id="icon" class="btn btn-primary"
                                                            data-bs-toggle="modal" id="openCertificateModalButtonDelete"
                                                            [hidden]="true" data-bs-target="#deleteCertificates"
                                                            title="Delete"></button>
                                                        <button type="button" id="icon" class="btn btn-primary"
                                                            title="Delete">
                                                            <i class="fa-solid fa-trash-can"
                                                                (click)="openRequiredcertifcateDeleteModal()"></i>
                                                        </button>
                                                    </div>
                                                    <div class="col-2">
                                                        <button type="button" id="icon" class="btn btn-primary"
                                                            data-bs-toggle="collapse"
                                                            data-bs-target="#certificatesDetails" aria-expanded="false"
                                                            aria-controls="certificatesDetails"
                                                            [attr.aria-expanded]="!isCertificatesDetailOpen"
                                                            (click)="toggleCertificatesDetails()">
                                                            <i class="fa-solid fa-chevron-down"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="collapse" id="certificatesDetails">

                                        <p-table #dt2 [value]="riskDetails" dataKey="code" selectionMode="single"
                                            [(selection)]="selectedSchedule" [tableStyle]="{'min-width': '50rem'}"
                                            responsiveLayout="scroll" [autoLayout]="true" class='ui-datatable'>


                                            <ng-template pTemplate="header">
                                                <tr>
                                                    <th> {{'gis.policy.id' | translate}}</th>
                                                    <th> {{'gis.policy.cert_no' | translate}}.</th>
                                                    <th>{{'gis.policy.lot_id' | translate}}</th>
                                                    <th> {{'gis.policy.issue_date' | translate}}</th>
                                                    <th> {{'gis.policy.cert_year' | translate}}</th>
                                                    <th> {{'gis.policy.status' | translate}}</th>
                                                    <th> {{'gis.policy.print_status' | translate}}</th>
                                                    <th> {{'gis.policy.print_date' | translate}}</th>
                                                    <th> {{'gis.policy.wef' | translate}}</th>


                                                </tr>
                                            </ng-template>

                                            <ng-template pTemplate="body" let-riskDetails let-ri="rowIndex">
                                                <tr [pSelectableRow]="riskDetails"
                                                    [class.p-highlight]="riskDetails === selectedRisk">
                                                    <td class="flexible-header"></td>
                                                    <td class="flexible-header"></td>
                                                    <td class="flexible-header"></td>
                                                    <td class="flexible-header"></td>
                                                    <td class="flexible-header"></td>
                                                    <td class="flexible-header"></td>
                                                    <td class="flexible-header"></td>
                                                    <td class="flexible-header"></td>
                                                    <td class="flexible-header"></td>



                                                </tr>
                                            </ng-template>
                                        </p-table>
                                        <!-- Add  Certificates Modal -->
                                        <div class="modal fade" id="addCertificates" tabindex="-1" role="dialog"
                                            aria-labelledby="addrequiredDocLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered " role="document">
                                                <div class="modal-content" id="addrequiredDocItemModal">
                                                    <div class="modal-body">
                                                        <button type="button"
                                                            class="btn-close ms-auto py-2 px-2 float-end"
                                                            data-bs-dismiss="modal" aria-label="Close"
                                                            id="close"></button>
                                                        <h5 class="modal-title mt-2 mb-2" id="riskOtherDetailsLabel">
                                                            {{'gis.policy.select_certifiactes' | translate}}</h5>
                                                        <!-- <div class="search-container mb-3">
                                                                <span class="search-icon"><i class="fa fa-search"></i></span>
                                                                <input type="text" placeholder="Search"
                                                                    id="search-input-Rsection" [(ngModel)]="searchText" />
                                                            </div> -->

                                                        <!-- <div class="scrollable-list">
                                                                <div *ngFor="let document of filteredRequiredDocs">
                                                                    <div class="form-check"
                                                                        *ngIf="matchesSearch(document.description)">
                                                                        <input class="form-check-input" type="checkbox"
                                                                            [id]="'checkbox-' + document.code"
                                                                            [checked]="isSelected(document)"
                                                                            (change)="onCheckboxChange(document)" />
                                                                        <label class="form-check-label section-label"
                                                                            [for]="'checkbox-' + document.code">
                                                                            {{ document.shortDescription }}
                                                                        </label>
                                                                        <label class="form-check-label section-label"
                                                                            [for]="'checkbox-' + document.code">
                                                                            {{ document.description }}
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                            </div> -->
                                                        <p-table #dt4 [value]="requiredDocs"
                                                            [(selection)]="selectedDocument" selectionMode="single"
                                                            dataKey="code" [paginator]="true" [rows]="10"
                                                            [scrollable]="true" scrollDirection="horizontal"
                                                            [showCurrentPageReport]="true"
                                                            currentPageReportTemplate=" {first} - {last} of {totalRecords}">
                                                            <ng-template pTemplate="header">
                                                                <tr>


                                                                    <th> {{'gis.policy.cert_type' | translate}}</th>
                                                                    <th> {{'gis.policy.lots_id' | translate}}</th>
                                                                    <th> {{'gis.policy.branch' | translate}}</th>

                                                                </tr>
                                                            </ng-template>
                                                            <ng-template pTemplate="body" let-document
                                                                let-ri="rowIndex">
                                                                <tr [pSelectableRow]="document"
                                                                    [class.p-highlight]="document === selectedDocument">

                                                                    <td></td>
                                                                    <td></td>
                                                                    <td></td>
                                                                </tr>
                                                            </ng-template>
                                                        </p-table>



                                                        <div class="mt-4 d-flex justify-content-end">
                                                            <button type="button" class="btn btn-primary "
                                                                id="saveDetails" data-bs-dismiss="modal"
                                                                (click)="createRiskSection()">
                                                                {{'gis.policy.save_details' | translate}}</button>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>

                                        <!--Add or Edit Certificates Modal -->
                                        <div class="modal fade" id="editCertificates" tabindex="-1" role="dialog"
                                            aria-labelledby="editrequiredDocLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered " role="document">
                                                <div class="modal-content">
                                                    <div class="modal-body">
                                                        <button type="button"
                                                            class="btn-close ms-auto py-2 px-2 float-end"
                                                            data-bs-dismiss="modal" aria-label="Close"
                                                            id="close"></button>
                                                        <h5 class="modal-title mt-2 mb-3 ms-4" id="editCertificates">
                                                            {{'gis.policy.certificate_details' | translate}}</h5>
                                                        <form [formGroup]="scheduleDetailsForm">
                                                            <!-- **ROW 1** -->
                                                            <div class="row mb-1" id="sectionRows">
                                                                <div class="col-xl-5">
                                                                    <div class="mb-1  row">
                                                                        <label for="minmax-buttons" class=""
                                                                            id="certificateLabel">
                                                                            {{'gis.policy.certificate' |
                                                                            translate}}</label>
                                                                    </div>
                                                                    <div class="row">
                                                                        <input type="text" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1 ms-2">
                                                                    </div>
                                                                </div>
                                                                <div class="col-xl-2"></div>
                                                                <div class="col-xl-5">
                                                                    <div class="mb-1  row">
                                                                        <label for="minmax-buttons" class=""
                                                                            id="certificateLabel"> {{'gis.policy.status'
                                                                            | translate}}</label>
                                                                    </div>
                                                                    <div class="row">
                                                                        <select
                                                                            class="form-select form-control-sm mb-1 ms-2"
                                                                            id="selectedInput">
                                                                            <option value=""></option>
                                                                            <option value=""> {{'gis.policy.active' |
                                                                                translate}}</option>
                                                                            <option value=""> {{'gis.policy.cancelled' |
                                                                                translate}}</option>
                                                                            <option value=""> {{'gis.policy.inactive' |
                                                                                translate}}</option>
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <!-- **ROW 2** -->
                                                            <div class="row mb-1" id="sectionRows">
                                                                <div class="col-xl-5">
                                                                    <div class="mb-1  row">
                                                                        <label for="minmax-buttons" class="required"
                                                                            id="certificateLabel">{{'gis.policy.wef' |
                                                                            translate}} </label>
                                                                    </div>
                                                                    <div class="row">
                                                                        <input type="date" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1 ms-2">
                                                                    </div>
                                                                </div>
                                                                <div class="col-xl-2"></div>
                                                                <div class="col-xl-5">
                                                                    <div class="mb-1  row">
                                                                        <label for="minmax-buttons" class="required"
                                                                            id="certificateLabel">{{'gis.policy.wet' |
                                                                            translate}}</label>
                                                                    </div>
                                                                    <div class="row">
                                                                        <input type="date" id="sectionInput"
                                                                            class="form-control form-control-sm mb-1 ms-2">
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </form>
                                                        <div class="mt-4 d-flex justify-content-end">
                                                            <button type="button" class="btn btn-primary "
                                                                id="saveDetails" data-bs-dismiss="modal">
                                                                {{'gis.policy.save_details' | translate}}</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Delete certificate  Modal -->
                                        <div class="modal fade" id="deleteCertificates" tabindex="-1" role="dialog"
                                            aria-labelledby="deleteRisk" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered" role="document">
                                                <div class="modal-content" id="deleteRisk">
                                                    <div class="modal-body ">
                                                        <p class="deleteMessage mt-4 mb-4">
                                                            {{'gis.policy.are_you_sure_you_want_to_delete' | translate}}
                                                        </p>
                                                        <div class="d-flex justify-content-center mb-3">
                                                            <button type="button" class="btn btn-primary px-5"
                                                                id="delete"
                                                                data-bs-dismiss="modal">{{'gis.policy.yes_delete' |
                                                                translate}} </button>
                                                        </div>
                                                        <div class="d-flex justify-content-center mb-2">
                                                            <button type="button" class="btn btn-outline-primary px-5"
                                                                data-bs-dismiss="modal">{{'gis.policy.no_im_not' |
                                                                translate}}</button>
                                                        </div>



                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <!-- REMARKS DETAILS -->
                    <div class="card mt-2 mb-2 riskDetailsCards">
                        <div class="card-body">
                            <div class="row ">
                                <div>
                                    <div>
                                        <div class="row">
                                            <div class="col-sm-3">
                                                <p class="subheading">{{'gis.policy.remarks' | translate}}</p>
                                            </div>
                                            <div class="col-sm-9 d-flex justify-content-end">
                                                <div class="row  mb-2">

                                                    <!-- <div class="col-sm-3"></div> -->

                                                    <div class="col-3" *ngIf="isRemarkDetailsOpen">
                                                        <button type="button" id="icon" class="btn btn-primary"
                                                            data-bs-toggle="modal" data-bs-target="#addRemark"
                                                            title="Add">
                                                            <i class="fa-solid fa-plus"></i>
                                                        </button>
                                                    </div>
                                                    <div class="col-3" *ngIf="isRemarkDetailsOpen">
                                                        <button type="button" id="icon" class="btn btn-primary"
                                                            data-bs-toggle="modal" data-bs-target="#editRemark"
                                                            title="Edit">
                                                            <i class="fa-solid fa-pencil"></i>
                                                        </button>
                                                    </div>
                                                    <div class="col-3" *ngIf="isRemarkDetailsOpen">
                                                        <button type="button" id="icon" class="btn btn-primary"
                                                            data-bs-toggle="modal" id="openModalRemarkButtonDelete"
                                                            [hidden]="true" data-bs-target="#deleteRemark"
                                                            title="Delete">
                                                        </button>
                                                        <button type="button" id="icon" class="btn btn-primary"
                                                            title="Delete">
                                                            <i class="fa-solid fa-trash-can"
                                                                (click)="openRemarkDeleteModal()"></i>
                                                        </button>
                                                    </div>
                                                    <div class="col-3">

                                                        <button type="button" id="icon" class="btn btn-primary"
                                                            (click)="toggleRemarksDetails()">
                                                            <i class="fa-solid fa-chevron-down"></i>
                                                        </button>
                                                    </div>


                                                </div>

                                            </div>
                                        </div>

                                    </div>
                                    <div class="collapse " id="remarksDetails" [class.show]="isRemarkDetailsOpen">


                                        <p-table #dt2 [value]="filteredRemarks" dataKey="code" selectionMode="single"
                                            [(selection)]="selectedRemark" [tableStyle]="{'min-width': '50rem'}"
                                            responsiveLayout="scroll" [autoLayout]="true">


                                            <ng-template pTemplate="header">
                                                <tr>
                                                    <th>{{'gis.policy.remark' | translate}}</th>
                                                    <th>{{'gis.policy.created_date' | translate}}</th>



                                                </tr>
                                            </ng-template>

                                            <ng-template pTemplate="body" let-filteredRemarks let-ri="rowIndex">
                                                <tr [pSelectableRow]="filteredRemarks"
                                                    [class.p-highlight]="filteredRemarks === selectedRemark"
                                                    (click)="onEditRemark(filteredRemarks)">
                                                    <td>{{filteredRemarks.schedule}}</td>
                                                    <td></td>




                                                </tr>
                                            </ng-template>
                                        </p-table>
                                        <!-- Add  Remarks Modal -->
                                        <div class="modal fade" id="addRemark" tabindex="-1" role="dialog"
                                            aria-labelledby="addRemarkLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered " role="document">
                                                <div class="modal-content" id="addRemarkItemModal">
                                                    <div class="modal-body">
                                                        <button type="button"
                                                            class="btn-close ms-auto py-2 px-2 float-end"
                                                            data-bs-dismiss="modal" aria-label="Close"
                                                            id="close"></button>
                                                        <form [formGroup]="remarkDetailsForm">

                                                            <h5 class="modal-title mt-2 mb-2 ms-2"
                                                                id="addRemarkDetailsLabel">{{'gis.policy.add_remarks' |
                                                                translate}}</h5>

                                                            <label for="remark" class="ms-2" id="remarkDescription">
                                                                {{'gis.policy.description' | translate}}</label>
                                                            <textarea class="row ms-2 " id="remark" rows="5" cols="50"
                                                                pInputTextarea formControlName="schedule">
                                                        </textarea>
                                                        </form>

                                                        <div class="mt-4 d-flex justify-content-end">
                                                            <button type="button" class="btn btn-primary "
                                                                id="saveDetails" data-bs-dismiss="modal"
                                                                (click)="addRemark()"> {{'gis.policy.save_details' |
                                                                translate}}</button>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <!-- Edit  Remarks Modal -->
                                        <div class="modal fade" id="editRemark" tabindex="-1" role="dialog"
                                            aria-labelledby="editRemarkLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered " role="document">
                                                <div class="modal-content" id="editRemarkItemModal">
                                                    <div class="modal-body">
                                                        <button type="button"
                                                            class="btn-close ms-auto py-2 px-2 float-end"
                                                            data-bs-dismiss="modal" aria-label="Close"
                                                            id="close"></button>
                                                        <form [formGroup]="remarkDetailsForm">

                                                            <h5 class="modal-title mt-2 mb-2 ms-2"
                                                                id="editRemarkDetailsLabel">{{'gis.policy.edit_remarks'
                                                                |
                                                                translate}} </h5>

                                                            <label for="remark" class="ms-2" id="remarkDescription">
                                                                {{'gis.policy.description' | translate}}</label>
                                                            <textarea class="row ms-2 " id="remark" rows="5" cols="50"
                                                                pInputTextarea formControlName="schedule">
                                                        </textarea>
                                                        </form>

                                                        <div class="mt-4 d-flex justify-content-end">
                                                            <button type="button" class="btn btn-primary "
                                                                id="saveDetails" data-bs-dismiss="modal"
                                                                (click)="editRemark()">
                                                                {{'gis.policy.save_details' | translate}}</button>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>


                                        <!-- Delete certificate  Modal -->
                                        <div class="modal fade" id="deleteRemark" tabindex="-1" role="dialog"
                                            aria-labelledby="deleteRisk" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered" role="document">
                                                <div class="modal-content" id="deleteRisk">
                                                    <div class="modal-body ">
                                                        <p class="deleteMessage mt-4 mb-4">
                                                            {{'gis.policy.are_you_sure_you_want_to_delete' | translate}}
                                                        </p>
                                                        <div class="d-flex justify-content-center mb-3">
                                                            <button type="button" class="btn btn-primary px-5"
                                                                id="delete" data-bs-dismiss="modal"
                                                                (click)="deleteRemark()">{{'gis.policy.yes_delete' |
                                                                translate}} </button>
                                                        </div>
                                                        <div class="d-flex justify-content-center mb-2">
                                                            <button type="button" class="btn btn-outline-primary px-5"
                                                                data-bs-dismiss="modal">{{'gis.policy.no_im_not' |
                                                                translate}}</button>
                                                        </div>



                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <!-- RELATED RISK DETAILS -->
                    <div class="card mt-2 mb-2 riskDetailsCards">
                        <div class="card-body">
                            <div class="row ">
                                <div>
                                    <div>
                                        <div class="row">
                                            <div class="col-sm-3">
                                                <p class="subheading"> {{'gis.policy.related_risks' | translate}}</p>
                                            </div>
                                            <div class="col-sm-9 d-flex justify-content-end">
                                                <div class="row  mb-2">

                                                    <!-- <div class="col-sm-3"></div> -->

                                                    <!-- <div class="col-3" *ngIf="isRelatedRiskDetailsOpen">
                                                        
                                                    </div>
                                                    <div class="col-3" *ngIf="isRelatedRiskDetailsOpen">
                                                        
                                                    </div>
                                                    <div class="col-3" *ngIf="isRelatedRiskDetailsOpen">
                                                      
                                                    </div> -->
                                                    <div class="col-3">
                                                        <button type="button" id="icon" class="btn btn-primary"
                                                            data-bs-toggle="collapse"
                                                            data-bs-target="#relatedRiskDetails" aria-expanded="false"
                                                            aria-controls="relatedRiskDetails"
                                                            [attr.aria-expanded]="!isRelatedRiskDetailsOpen"
                                                            (click)="toggleRelatedRiskDetails()">
                                                            <i class="fa-solid fa-chevron-down"></i>
                                                        </button>
                                                    </div>


                                                </div>

                                            </div>
                                        </div>

                                    </div>
                                    <div class="collapse" id="relatedRiskDetails">

                                        <p-table #dt2 [value]="relatedRiskList" dataKey="code" selectionMode="single"
                                            [(selection)]="selectedSchedule" [tableStyle]="{'min-width': '50rem'}"
                                            responsiveLayout="scroll" [autoLayout]="true">


                                            <ng-template pTemplate="header">
                                                <tr>
                                                    <th> {{'gis.policy.property_id' | translate}}</th>
                                                    <th> {{'gis.policy.value' | translate}}</th>
                                                    <th> {{'gis.policy.wef' | translate}}</th>
                                                    <th> {{'gis.policy.wet' | translate}}</th>
                                                    <th> {{'gis.policy.policy_no' | translate}}.</th>
                                                    <th> {{'gis.policy.premium' | translate}}</th>



                                                </tr>
                                            </ng-template>

                                            <ng-template pTemplate="body" let-relatedRiskList let-ri="rowIndex">
                                                <tr [pSelectableRow]="relatedRiskList"
                                                    [class.p-highlight]="relatedRiskList === selectedRelatedRisk">
                                                    <td>{{relatedRiskList.propertyId}}</td>
                                                    <td>{{relatedRiskList.value}}</td>
                                                    <td>{{relatedRiskList.withEffectFrom}}</td>
                                                    <td>{{relatedRiskList.withEffectTo}}</td>
                                                    <td>{{relatedRiskList.policyNumber}}</td>
                                                    <td></td>




                                                </tr>
                                            </ng-template>
                                        </p-table>

                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <!-- RISK CLAIMS REPORT DETAILS -->
                    <div class="card mt-2 mb-2 riskDetailsCards">
                        <div class="card-body">
                            <div class="row ">
                                <div>
                                    <div>
                                        <div class="row">
                                            <div class="col-sm-3">
                                                <p class="subheading"> Risk claims report</p>
                                            </div>
                                            <div class="col-sm-9 d-flex justify-content-end">
                                                <div class="row  mb-2">

                                                    <!-- <div class="col-sm-3"></div> -->

                                                    <!-- <div class="col-3" *ngIf="isRelatedRiskDetailsOpen">
                                                        
                                                    </div>
                                                    <div class="col-3" *ngIf="isRelatedRiskDetailsOpen">
                                                        
                                                    </div>
                                                    <div class="col-3" *ngIf="isRelatedRiskDetailsOpen">
                                                      
                                                    </div> -->
                                                    <div class="col-3">
                                                        <button type="button" id="icon" class="btn btn-primary"
                                                            data-bs-toggle="collapse"
                                                            data-bs-target="#riskClaimsReportDetails"
                                                            aria-expanded="false"
                                                            aria-controls="riskClaimsReportDetails"
                                                            [attr.aria-expanded]="!isRiskClaimsReportDetailsOpen"
                                                            (click)="toggleRiskClaimReportDetails()">
                                                            <i class="fa-solid fa-chevron-down"></i>
                                                        </button>
                                                    </div>


                                                </div>

                                            </div>
                                        </div>

                                    </div>
                                    <div class="collapse" id="riskClaimsReportDetails">


                                        <p class="printClaimLabel" (click)="printClaimReport()"> Print Claims Experience
                                        </p>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <!-- COMMISSION TRANSACTION DETAILS -->
                    <div class="card mt-2 mb-2 riskDetailsCards">
                        <div class="card-body">
                            <div class="row ">
                                <div class="col-sm-4">
                                    <p class="subheading">{{'gis.policy.commission_transaction' | translate}}</p>

                                </div>
                                <div class="col-sm-8 d-flex justify-content-end">
                                    <div class="row  mb-2">

                                        <!-- <div class="col-sm-3"></div> -->
                                        <div class="col-sm-3" *ngIf="isCommissionTranscDetailsOpen">
                                            <!-- <button type="button" id="icon" class="btn btn-primary" (click)="editRisk()"
                                                title="Edit">
                                                <i class="fa-solid fa-pencil"></i>
                                            </button> -->

                                        </div>
                                        <div class="col-sm-3 " *ngIf="isCommissionTranscDetailsOpen">
                                            <button type="button" id="icon" class="btn btn-primary"
                                                data-bs-toggle="modal" data-bs-target="#addCommissionTransc"
                                                title="Add">
                                                <i class="fa-solid fa-plus"></i>
                                            </button>
                                        </div>


                                        <div class="col-sm-3" *ngIf="isCommissionTranscDetailsOpen">
                                            <button type="button" id="icon" class="btn btn-primary"
                                                data-bs-toggle="modal" id="openCommissionModalButtonDelete"
                                                [hidden]="true" data-bs-target="#deleteCommissionTransc" title="Delete">
                                            </button>
                                            <button type="button" id="icon" class="btn btn-primary" title="Delete">
                                                <i class="fa-solid fa-trash-can"
                                                    (click)="openCommissionTranscDeleteModal()"></i>
                                            </button>

                                        </div>
                                        <!-- <div class="col-3">
                                            <button type="button" id="icon" class="btn btn-primary"
                                                data-bs-toggle="collapse" data-bs-target="#commissionTranscDetails"
                                                aria-expanded="false" aria-controls="commissionTranscDetails"
                                                [attr.aria-expanded]="!isCommissionTranscDetailsOpen" (click)="toggleCommissionTranscDetails()">
                                                <i class="fa-solid fa-chevron-down"></i>
                                            </button>
                                        </div> -->
                                        <div class="col-3">
                                            <button type="button" id="icon" class="btn btn-primary"
                                                (click)="toggleCommissionTranscDetails()">
                                                <i class="fa-solid fa-chevron-down"></i>
                                            </button>

                                        </div>
                                    </div>

                                </div>
                            </div>
                            <!-- <div class="collapse" id="commissionTranscDetails"> -->
                            <div class="collapse mt-4" id="commissionTranscDetails"
                                [class.show]="isCommissionTranscDetailsOpen">


                                <p-table #dt2 [value]="riskDetails" dataKey="code" selectionMode="single"
                                    [(selection)]="selectedTransaction" [tableStyle]="{'min-width': '50rem'}"
                                    styleClass="p-datatable-sm" responsiveLayout="scroll" class='ui-datatable'
                                    responsiveLayout="scroll" [autoLayout]="true" [globalFilterFields]="['propertyId']">


                                    <!-- <ng-template pTemplate="caption">
                            <div class="flex">
                                <span class="p-input-icon-left ml-auto">
                                    <i class="pi pi-search search-icon"></i>
                                </span>
                                <input class="search-input-Risk" pInputText type="text"
                                    (input)="applyFilterGlobalRisk($event, 'contains')"
                                    placeholder="Search" />

                            </div>
                        </ng-template> -->
                                    <ng-template pTemplate="header">
                                        <tr>
                                            <th> {{'gis.policy.group' | translate}}</th>
                                            <th> {{'gis.policy.agent_name' | translate}}</th>
                                            <th>{{'gis.policy.account_type' | translate}}</th>
                                            <th>{{'gis.policy.setup_rate' | translate}}</th>
                                            <th>{{'gis.policy.used_rate' | translate}}</th>
                                            <th> {{'gis.policy.commission_amount' | translate}}</th>
                                            <th> {{'gis.policy.withholding_rate' | translate}}</th>

                                        </tr>
                                    </ng-template>

                                    <ng-template pTemplate="body" let-riskDetails let-ri="rowIndex">
                                        <tr [pSelectableRow]="riskDetails"
                                            [class.p-highlight]="riskDetails === selectedTransaction"
                                            (click)="togglePremiumDetails();getRiskClauses()">
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>



                                        </tr>
                                    </ng-template>
                                </p-table>
                                <!-- Add Commission Transaction  Modal -->
                                <div class="modal fade" id="addCommissionTransc" tabindex="-1"
                                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered">
                                        <div class="modal-content">

                                            <div class="modal-body">
                                                <button type="button" #closebutton class="float-end btn-close"
                                                    data-bs-dismiss="modal" aria-label="Close"></button>
                                                <p class="text-start" id="applicableCommissionLabel">Applicable
                                                    commission
                                                </p>

                                                <p-table #dt1 [value]="clientData" [tableStyle]="{'max-width': '465px'}"
                                                    selectionMode="single" [resizableColumns]="true"
                                                    styleClass="p-datatable-sm" responsiveLayout="scroll"
                                                    class='ui-datatable' [autoLayout]="true" [paginator]="true"
                                                    [rows]="5" [scrollable]="true" scrollDirection="horizontal"
                                                    [showCurrentPageReport]="true"
                                                    currentPageReportTemplate=" {first} - {last} of {totalRecords}"
                                                    [globalFilterFields]="['idNumber', 'emailAddress','lastName','emailAddress']">

                                                    <ng-template pTemplate="header">

                                                        <tr id="product">
                                                            <th>Description</th>
                                                            <th>Type</th>
                                                            <th>Trntcode</th>

                                                        </tr>
                                                    </ng-template>

                                                    <ng-template let-clientData pTemplate="body">
                                                        <tr id="productData" [pSelectableRow]=""
                                                            (click)="loadClientDetails(clientData.id);">

                                                            <td> </td>
                                                            <td> </td>
                                                            <td></td>
                                                        </tr>
                                                    </ng-template>

                                                </p-table>
                                                <br>
                                                <!-- <button class="btn btn-primary float-end" data-bs-dismiss="modal" (click)="saveclient()">Save Details</button> -->
                                            </div>



                                        </div>
                                    </div>
                                </div>
                                <!-- Delete Commission Transc  Modal -->
                                <div class="modal fade" id="deleteCommissionTransc" tabindex="-1" role="dialog"
                                    aria-labelledby="deleteCommissionTransc" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered" role="document">
                                        <div class="modal-content" id="deleteRisk">
                                            <div class="modal-body ">
                                                <p class="deleteMessage mt-4 mb-4">
                                                    {{'gis.policy.are_you_sure_you_want_to_delete' | translate}}</p>
                                                <div class="d-flex justify-content-center mb-3">
                                                    <button type="button" class="btn btn-primary px-5" id="delete"
                                                        data-bs-dismiss="modal">{{'gis.policy.yes_delete' |
                                                        translate}} </button>
                                                </div>
                                                <div class="d-flex justify-content-center mb-2">
                                                    <button type="button" class="btn btn-outline-primary px-5"
                                                        data-bs-dismiss="modal">{{'gis.policy.no_im_not' |
                                                        translate}}</button>
                                                </div>



                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- RISK SERVICE LIST  -->
                    <div class="card mt-2 mb-2 riskDetailsCards">
                        <div class="card-body">
                            <div class="row ">
                                <div class="col-sm-4">
                                    <p class="subheading">{{'gis.policy.risk_service_list' | translate}}</p>

                                </div>
                                <div class="col-sm-8 d-flex justify-content-end">
                                    <div class="row  mb-2">

                                        <div class="col-sm-3" *ngIf="isRiskServiceListOpen">


                                        </div>
                                        <div class="col-sm-3 " *ngIf="isRiskServiceListOpen">
                                            <button type="button" id="icon" class="btn btn-primary"
                                                data-bs-toggle="modal" data-bs-target="#addRiskServiceList" title="Add">
                                                <i class="fa-solid fa-plus"></i>
                                            </button>
                                        </div>


                                        <div class="col-sm-3" *ngIf="isRiskServiceListOpen">
                                            <button type="button" id="icon" class="btn btn-primary"
                                                data-bs-toggle="modal" id="openRiskServiceListModalButtonDelete"
                                                [hidden]="true" data-bs-target="#deleteRiskServiceList" title="Delete">
                                            </button>
                                            <button type="button" id="icon" class="btn btn-primary" title="Delete">
                                                <i class="fa-solid fa-trash-can"
                                                    (click)="openRiskServiceListDeleteModal()"></i>
                                            </button>

                                        </div>

                                        <div class="col-3">
                                            <button type="button" id="icon" class="btn btn-primary"
                                                (click)="toggleRiskServiceList()">
                                                <i class="fa-solid fa-chevron-down"></i>
                                            </button>

                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="collapse mt-4" id="commissionTranscDetails"
                                [class.show]="isRiskServiceListOpen">


                                <p-table #dt2 [value]="riskDetails" dataKey="code" selectionMode="single"
                                    [(selection)]="selectedTransaction" [tableStyle]="{'min-width': '50rem'}"
                                    styleClass="p-datatable-sm" responsiveLayout="scroll" class='ui-datatable'
                                    responsiveLayout="scroll" [autoLayout]="true" [globalFilterFields]="['propertyId']">



                                    <ng-template pTemplate="header">
                                        <tr>
                                            <th> {{'gis.policy.group' | translate}}</th>
                                            <th> {{'gis.policy.agent_name' | translate}}</th>
                                            <th>{{'gis.policy.account_type' | translate}}</th>
                                            <th>{{'gis.policy.setup_rate' | translate}}</th>
                                            <th>{{'gis.policy.used_rate' | translate}}</th>
                                            <th> {{'gis.policy.commission_amount' | translate}}</th>
                                            <th> {{'gis.policy.withholding_rate' | translate}}</th>

                                        </tr>
                                    </ng-template>

                                    <ng-template pTemplate="body" let-riskDetails let-ri="rowIndex">
                                        <tr [pSelectableRow]="riskDetails"
                                            [class.p-highlight]="riskDetails === selectedTransaction"
                                            (click)="togglePremiumDetails();getRiskClauses()">
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>



                                        </tr>
                                    </ng-template>
                                </p-table>
                                <!-- Add Risk Service Lisk Modal -->
                                <div class="modal fade" id="addRiskServiceList" tabindex="-1"
                                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered">
                                        <div class="modal-content">

                                            <div class="modal-body">
                                                <button type="button" #closebutton class="float-end btn-close"
                                                    data-bs-dismiss="modal" aria-label="Close"></button>
                                                <p class="text-start" id="riskServiceListLabel">Service </p>

                                                <div class="flex mb-4 w-50">
                                                    <span class="p-input-icon-left ml-auto">
                                                        <i class="pi pi-search search-icon"></i>
                                                    </span>
                                                    <input class="search-input" pInputText type="text"
                                                        (input)="applyFilterGlobal($event, 'contains')"
                                                        placeholder="Search" />

                                                </div>
                                                <p-table #dt1 [value]="" [tableStyle]="{'max-width': '465px'}"
                                                    selectionMode="single" [resizableColumns]="true"
                                                    styleClass="p-datatable-sm" responsiveLayout="scroll"
                                                    class='ui-datatable' [autoLayout]="true" [paginator]="true"
                                                    [rows]="5" [scrollable]="true" scrollDirection="horizontal"
                                                    [showCurrentPageReport]="true"
                                                    currentPageReportTemplate=" {first} - {last} of {totalRecords}"
                                                    [globalFilterFields]="['idNumber', 'emailAddress','lastName','emailAddress']">

                                                    <ng-template pTemplate="header">

                                                        <tr id="product">
                                                            <th>Service</th>


                                                        </tr>
                                                    </ng-template>

                                                    <ng-template let-clientData pTemplate="body">
                                                        <tr id="productData" [pSelectableRow]=""
                                                            (click)="loadClientDetails(clientData.id);">

                                                            <td> </td>
                                                            <td> </td>
                                                            <td></td>
                                                        </tr>
                                                    </ng-template>

                                                </p-table>
                                                <br>
                                                <!-- <button class="btn btn-primary float-end" data-bs-dismiss="modal" (click)="saveclient()">Save Details</button> -->
                                            </div>



                                        </div>
                                    </div>
                                </div>
                                <!-- Delete  Risk Service Lisk  Modal -->
                                <div class="modal fade" id="deleteRiskServiceList" tabindex="-1" role="dialog"
                                    aria-labelledby="deleteRiskServiceList" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered" role="document">
                                        <div class="modal-content" id="deleteRisk">
                                            <div class="modal-body ">
                                                <p class="deleteMessage mt-4 mb-4">
                                                    {{'gis.policy.are_you_sure_you_want_to_delete' | translate}}</p>
                                                <div class="d-flex justify-content-center mb-3">
                                                    <button type="button" class="btn btn-primary px-5" id="delete"
                                                        data-bs-dismiss="modal">{{'gis.policy.yes_delete' |
                                                        translate}} </button>
                                                </div>
                                                <div class="d-flex justify-content-center mb-2">
                                                    <button type="button" class="btn btn-outline-primary px-5"
                                                        data-bs-dismiss="modal">{{'gis.policy.no_im_not' |
                                                        translate}}</button>
                                                </div>



                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>




                </ng-container>
                <ng-container *ngIf="selectedItem === 2">
                    <h5> {{'gis.policy.client_dd_details' | translate}}</h5>
                    <p>Details about Client DD...</p>
                </ng-container>
                <ng-container *ngIf="selectedItem === 3">
                    <!-- POLICY TAXES DETAILS -->

                    <div class="card riskDetailsCards">
                        <div class="card-body">
                            <div class="row ">
                                <div class="col-sm-3">
                                    <p class="subheading"> Policy taxes</p>

                                </div>
                               
                                <div class="col-sm-9 d-flex justify-content-end">
                                    <div class="row  mb-2">


                                        <div class="col-6" >
                                            <button class="btn btn-primary import-button"
                                                (click)="populatePolicyTaxes()"
                                                style="min-width: 141px;font-size:smaller;">Populate
                                                taxes</button>
                                        </div>
                                        <div class="col-6">
                                            <div class="row">
                                                <div class="col-3" >
                                                    <button type="button" id="icon" class="btn btn-success"
                                                data-bs-toggle="modal" data-bs-target="#clientModal" title="add">
                                                <i class="fa-solid fa-plus"></i>
                                            </button>
                                                </div>
                                                <div class="col-3">
                                                    <button type="button" id="icon" class="btn btn-primary"
                                                    data-bs-toggle="modal" data-bs-target="#editThirdDetails" title="Edit">
                                                    <i class="fa-solid fa-pencil"></i>
                                                </button>
                                                  

                                                </div>
                                                <div class="col-3" >
                                                    <button type="button" id="icon" class="btn btn-primary"
                                                    data-bs-toggle="modal" id="openModalTaxButtonDelete" [hidden]="true"
                                                    data-bs-target="#deleteTax" title="Delete">
                                                </button>
                                                <button type="button" id="icon" class="btn btn-primary" title="Delete">
                                                    <i class="fa-solid fa-trash-can" (click)="openPolicyTaxDeleteModal()"></i>
                                                </button>

                                                </div>
                                              
                                            </div>
                                        </div>

                                        <!-- <div class="col-1"></div> -->

                                    </div>

                                </div>
                            </div>
                            <p-table #dt1 [value]="filteredPolicyTaxes" dataKey="code" editMode="row"
                                selectionMode="single" [(selection)]="selectedPolicyTax"
                                [tableStyle]="{'min-width': '50rem'}" styleClass="p-datatable-sm"
                                responsiveLayout="scroll" class='ui-datatable' [autoLayout]="true">


                                <ng-template pTemplate="header">
                                    <tr>
                                        <th class="flexible-header">Description</th>
                                        <th class="flexible-header">Code</th>
                                        <th class="flexible-header">Rate</th>
                                        <th class="flexible-header">Amount </th>
                                        <th class="flexible-header">Level code </th>
                                        <th class="flexible-header">Rate type</th>
                                        <th class="flexible-header">Type</th>
                                        <th class="flexible-header">Policy level</th>
                                        <th class="flexible-header">Category</th>

                                    </tr>
                                </ng-template>

                                <ng-template pTemplate="body" let-filteredPolicyTaxes let-editing="editing"
                                    let-ri="rowIndex">
                                    <tr [pEditableRow]="filteredPolicyTaxes" [pSelectableRow]="filteredPolicyTaxes"
                                        [class.p-highlight]="filteredPolicyTaxes === selectedPolicyTax">
                                        <td>{{filteredPolicyTaxes.description}}</td>
                                        <td></td>
                                        <td>{{filteredPolicyTaxes.rate}}</td>
                                        <td>{{filteredPolicyTaxes.amount}}</td>
                                        <td></td>
                                        <td>{{filteredPolicyTaxes.rateType}}</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>



                                    </tr>
                                </ng-template>
                            </p-table>
                            <!-- Add    Policy Taxes  Modal -->
                            <div class="modal fade" id="clientModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                                aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content">

                                        <div class="modal-body">
                                            <button type="button" #closebutton class="float-end btn-close"
                                                data-bs-dismiss="modal" aria-label="Close"></button>
                                            <p class="text-start" id="selectClient">{{'gis.policy.select_client'
                                                | translate}}
                                            </p>

                                            <p-table #dt1 [value]="clientData" [tableStyle]="{'max-width': '465px'}"
                                                selectionMode="single" [resizableColumns]="true"
                                                styleClass="p-datatable-sm" responsiveLayout="scroll"
                                                class='ui-datatable' [autoLayout]="true" [paginator]="true" [rows]="5"
                                                [scrollable]="true" scrollDirection="horizontal"
                                                [showCurrentPageReport]="true"
                                                currentPageReportTemplate=" {first} - {last} of {totalRecords}"
                                                [globalFilterFields]="['idNumber', 'emailAddress','lastName','emailAddress']">
                                                <ng-template pTemplate="caption">
                                                    <div class="flex">
                                                        <span class="p-input-icon-left ml-auto">
                                                            <i class="pi pi-search search-icon"></i>
                                                        </span>
                                                        <input class="search-input" pInputText type="text"
                                                            (input)="applyFilterGlobal($event, 'contains')"
                                                            placeholder="Search" />

                                                    </div>
                                                </ng-template>
                                                <ng-template pTemplate="header">

                                                    <tr id="product">
                                                        <th>{{'gis.policy.id_no' | translate}}</th>
                                                        <th>{{'gis.policy.name' | translate}}</th>
                                                        <th>{{'gis.policy.email' | translate}}</th>

                                                    </tr>
                                                </ng-template>

                                                <ng-template let-clientData pTemplate="body">
                                                    <tr id="productData" [pSelectableRow]=""
                                                        (click)="loadClientDetails(clientData.id);">

                                                        <td>
                                                            {{clientData.idNumber}}
                                                        </td>
                                                        <td>
                                                            {{clientData.firstName+" "+clientData.lastName}}
                                                        </td>
                                                        <td>
                                                            {{clientData.emailAddress}}
                                                        </td>
                                                    </tr>
                                                </ng-template>

                                            </p-table>
                                            <br>
                                            <!-- <button class="btn btn-primary float-end" data-bs-dismiss="modal" (click)="saveclient()">Save Details</button> -->
                                        </div>



                                    </div>
                                </div>
                            </div>
                            <!-- Delete Policy Taxes Modal -->
                            <div class="modal fade" id="deleteTax" tabindex="-1" role="dialog"
                                aria-labelledby="deleteTax" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered" role="document">
                                    <div class="modal-content" id="deleteTax">
                                        <div class="modal-body ">
                                            <p class="deleteMessage mt-4 mb-4">
                                                {{'gis.policy.are_you_sure_you_want_to_delete' | translate}}</p>
                                            <div class="d-flex justify-content-center mb-3">
                                                <button type="button" class="btn btn-primary px-5" id="delete"
                                                    data-bs-dismiss="modal"
                                                    (click)="deletePolicyTaxes()">{{'gis.policy.yes_delete' |
                                                    translate}}</button>
                                            </div>
                                            <div class="d-flex justify-content-center mb-2">
                                                <button type="button" class="btn btn-outline-primary px-5"
                                                    data-bs-dismiss="modal">{{'gis.policy.no_im_not' |
                                                    translate}}</button>
                                            </div>



                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </ng-container>
                <ng-container *ngIf="selectedItem === 4">
                    <h5>{{'gis.policy.policy_clauses' | translate}}</h5>
                    <p>Details about Policy clauses...</p>
                </ng-container>
                <ng-container *ngIf="selectedItem === 5">
                    <h5>{{'gis.policy.policy_subclasses_clauses' | translate}}</h5>
                    <p>Details about Policy subclasses clauses...</p>
                </ng-container>
                <ng-container *ngIf="selectedItem === 6">
                    <h5> {{'gis.policy.policy_level_perils' | translate}}</h5>
                    <p>Details about Policy level perils...</p>
                </ng-container>
                <ng-container *ngIf="selectedItem === 7">
                    <h5>{{'gis.policy.policy_remarks' | translate}}</h5>
                    <p>Details about Policy remarks...</p>
                </ng-container>
                <ng-container *ngIf="selectedItem === 8">
                    <h5>{{'gis.policy.limits_of_liability' | translate}}</h5>
                    <p>Details about Limits of liability...</p>
                </ng-container>
                <ng-container *ngIf="selectedItem === 9">
                    <h5> {{'gis.policy.external_claim_exp' | translate}}..</h5>
                    <p>Details about External claims exp...</p>
                </ng-container>
                <ng-container *ngIf="selectedItem === 10">
                    <h5>{{'gis.policy.internal_claim_exp' | translate}}..</h5>
                    <p>Details about Internal claims exp...</p>
                </ng-container>
                <ng-container *ngIf="selectedItem === 11">
                    <h5> {{'gis.policy.service_providers' | translate}}</h5>
                    <p>Details about Service providers...</p>
                </ng-container>
                <ng-container *ngIf="selectedItem === 12">
                    <h5> {{'gis.policy.reasons_for_pending' | translate}}</h5>
                    <p>Details about Reasons for pending...</p>
                </ng-container>
            </div>
        </div>

    </div>
</div>