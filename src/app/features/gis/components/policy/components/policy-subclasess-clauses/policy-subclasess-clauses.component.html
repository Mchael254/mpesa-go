<div class="card riskDetailsCards">
    <div class="card-body">
        <div class="row ">
            <div class="col-sm-4">
                <p class="subheading"> Policy subclasses clauses</p>

            </div>

            <div class="col-sm-8 d-flex justify-content-end">
                <div class="row  mb-2">
                    <div class="col-3"></div>

                    <div class="col-8">
                        <div class="row">
                            <div class="col-4">
                                <button type="button" id="icon" class="btn btn-success" data-bs-toggle="modal"
                                    data-bs-target="#addPolicySubclassClauses" title="add">
                                    <i class="fa-solid fa-plus"></i>
                                </button>
                            </div>
                            <div class="col-4">
                                <button type="button" id="icon" class="btn btn-primary" data-bs-toggle="modal"
                                    data-bs-target="#editPolicySubclassClauses" title="Edit">
                                    <i class="fa-solid fa-pencil"></i>
                                </button>


                            </div>
                            <div class="col-4">
                                <button type="button" id="icon" class="btn btn-primary" data-bs-toggle="modal"
                                    id="openModalPolicySubclassesClauseButtonDelete" [hidden]="true"
                                    data-bs-target="#deletePolicySubclassClauses" title="Delete">
                                </button>
                                <button type="button" id="icon" class="btn btn-primary" title="Delete">
                                    <i class="fa-solid fa-trash-can" (click)="openPolicySubclassesVlauseDeleteModal()"></i>
                                </button>

                            </div>

                        </div>
                    </div>

                    <!-- <div class="col-1"></div> -->

                </div>

            </div>
        </div>
        <p-table dataKey="code" selectionMode="single" editMode="row" [tableStyle]="{'min-width': '50rem'}"
            responsiveLayout="scroll" [autoLayout]="true" [paginator]="true" [rows]="5" [showCurrentPageReport]="true"
            class='ui-datatable' currentPageReportTemplate=" {first} - {last} of {totalRecords}">

            <ng-template pTemplate="header">
                <tr>
                    <!-- <th style="width: 5%;padding-right: 50px;">{{'gis.quotation.select' | translate}}</th> -->
                    <th>Header</th>
                    <th>Wording</th>
                    <th>Condition type</th>
                    <th>New</th>
                    <th>{{'gis.quotation.editable' | translate}}</th>
                    <th>Subclass</th>
                    <th></th>

                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-productClauseList let-editing="editing" let-ri="rowIndex">

                <tr>
                    <!-- <td>
          <p-tableCheckbox [value]="selectedClauseList"></p-tableCheckbox>
      </td> -->

                    <td class="flexible-header" style=" white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
          overflow-y: auto;
          max-width: 250px;" pTooltip="{{productClauseList.heading }}" tooltipPosition="top">
                        <p-cellEditor>
                            <ng-template pTemplate="input">
                                <input pInputText type="text" [(ngModel)]="productClauseList.heading"
                                    class="form-control form-control-sm" [ngModelOptions]="{standalone: true}">
                            </ng-template>
                            <ng-template pTemplate="output">
                                {{productClauseList.heading}}
                            </ng-template>
                        </p-cellEditor>
                    </td>
                    <td class="flexible-header"
                        style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width:300px; overflow-y: auto;">
                        <p-cellEditor>
                            <ng-template pTemplate="input">
                                <input pInputTextarea type="text" rows="5" cols="30"
                                    [(ngModel)]="productClauseList.wording" class="form-control form-control-sm"
                                    [ngModelOptions]="{standalone: true}">
                            </ng-template>
                            <ng-template pTemplate="output">
                                {{productClauseList.wording}}
                            </ng-template>
                            <!-- Helper icon added next to the wording column -->
                        </p-cellEditor>
                    </td>
                    <td class="flexible-header"></td>
                    <td class="flexible-header"></td>
                    <td class="flexible-header"></td>
                    <td class="flexible-header">

                        <button pButton pRipple type="button" (click)="openHelperModal(productClauseList)"
                            icon="pi pi-info-circle" class="p-button-rounded p-button-text">
                        </button>
                    </td>

                    <!-- <td *ngIf="selectedClauseList.is_editable  !== 'Y'"
                    style="padding-left: 24px;">
                    -- </td> -->
                    <td class="flexible-header">
                        <div class="flex align-items-center justify-content-center gap-2">
                            <button *ngIf="!editing" pButton pRipple type="button" pInitEditableRow icon="pi pi-pencil"
                                class="p-button-rounded p-button-text"></button>

                            <button *ngIf="editing" pButton pRipple type="button" pSaveEditableRow icon="pi pi-check"
                                class="p-button-rounded p-button-text p-button-success mr-2"></button>
                            <button *ngIf="editing" pButton pRipple type="button" pCancelEditableRow icon="pi pi-times"
                                class="p-button-rounded p-button-text p-button-danger"></button>
                        </div>
                    </td>

                </tr>
                <!-- Modal for each row -->
                <p-dialog [(visible)]="selectedPolicyClause.showHelperModal" [modal]="false"
                    [style]="{ 'width': '700px'}">
                    <ng-container *ngIf="selectedPolicyClause">
                        <div pResizable [ngStyle]="{'min-width.px': 200, 'min-height.px': 150}"
                            (onResize)="onResize($event)">
                            <p>{{ selectedPolicyClause.wording }}</p>
                        </div>
                    </ng-container>
                </p-dialog>
            </ng-template>
        </p-table>


        <!-- Add Policy Clauses  Modal -->
        <div class="modal fade" id="addPolicySubclassClauses" tabindex="-1" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">

                    <div class="modal-body">
                        <button type="button" #closebutton class="float-end btn-close" data-bs-dismiss="modal"
                            aria-label="Close"></button>
                        <p class="modalTitle" id="selectClient">
                            Select a clause
                        </p>
                        <p-table #dt1 [value]="productClauseList" [tableStyle]="{'max-width': '465px'}"
                            [(selection)]="selectedPolicyClause" [resizableColumns]="true" styleClass="p-datatable-sm"
                            responsiveLayout="scroll" class='ui-datatable' [autoLayout]="true" [paginator]="true"
                            [rows]="5" [scrollable]="true" scrollDirection="horizontal" [showCurrentPageReport]="true"
                            currentPageReportTemplate=" {first} - {last} of {totalRecords}"
                            [globalFilterFields]="['idNumber', 'emailAddress','lastName','emailAddress']">

                            <ng-template pTemplate="header">

                                <tr id="product">
                                    <!-- <th></th> -->
                                    <th>Select</th>
                                    <th>Short desc</th>
                                    <th>Heading</th>
                                    <th>Subclass</th>

                                </tr>
                            </ng-template>


                            <ng-template pTemplate="body" let-productClauseList>
                                <tr>

                                    <td>
                                        <p-tableCheckbox [value]="productClauseList" />
                                    </td>
                                    <td>{{productClauseList.shortDescription}} </td>
                                    <td>{{productClauseList.heading}}</td>
                                    <td></td>
                                </tr>
                            </ng-template>

                        </p-table>

                    </div>


                    <div class="d-flex justify-content-end mt-4 mb-4">
                        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">{{'crm.save_details' |
                            translate}}</button>
                    </div>

                </div>
            </div>
        </div>
        <!-- Edit Policy Clauses  Modal -->
        <div class="modal fade" id="editPolicySubclassClauses" tabindex="-1" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content">

                    <div class="modal-body">
                        <button type="button" #closebutton class="float-end btn-close" data-bs-dismiss="modal"
                            aria-label="Close"></button>
                        <p class="modalTitle ms-2" id="selectClient">
                            Edit clause
                        </p>
                       
                    <form [formGroup]="editPolicySubclassesClausesDetailsForm">

                        <!-- <h5 class="modal-title mt-2 mb-2 ms-2"
                            id="editRemarkDetailsLabel">{{'gis.policy.edit_remarks'
                            |
                            translate}} </h5> -->

                        <label for="remark" class="ms-2" id="remarkDescription">
                           Clause</label>
                           <input type="text"
                           id="scheduleInput"
                           class="form-control form-control-sm ms-2"
                           formControlName="registrationNumber">
                   
                    <label for="remark" class="ms-2" id="remarkDescription">
                       Wording</label>
                     <textarea class="row ms-2 " id="remark" rows="5" 
                     style="width: 100%;" pInputTextarea formControlName="schedule">
                 </textarea>
                    </form>

                    </div>


                    <div class="d-flex justify-content-end mt-4 mb-4">
                        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">{{'crm.save_details' |
                            translate}}</button>
                            <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cancel</button>
                    </div>

                </div>
            </div>
        </div>
        <!-- Delete Policy clauses Modal -->
        <div class="modal fade" id="deletePolicySubclassClauses" tabindex="-1" role="dialog" aria-labelledby="deleteTax"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content" id="deleteTax">
                    <div class="modal-body ">
                        <p class="deleteMessage mt-4 mb-4">
                            {{'gis.policy.are_you_sure_you_want_to_delete' | translate}}</p>
                        <div class="d-flex justify-content-center mb-3">
                            <button type="button" class="btn btn-primary px-5" id="delete"
                                data-bs-dismiss="modal">{{'gis.policy.yes_delete' |
                                translate}}</button>
                        </div>
                        <div class="d-flex justify-content-center mb-2">
                            <button type="button" class="btn btn-outline-primary px-5"
                                data-bs-dismiss="modal">{{'gis.policy.no_im_not' |
                                translate}}</button>
                        </div>



                    </div>
                </div>
            </div>
        </div>
    </div>
</div>