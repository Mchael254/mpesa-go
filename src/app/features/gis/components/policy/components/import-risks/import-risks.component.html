<div class="container ">
    <p class="titleMain mt-3">Underwriting:Import risks</p>
    <div class="container mx-2 mt-n1">
        <div class="card mb-3 px-2" style=" position: relative;">
            <div class="card-body">
                <p class="subheading">Import risks</p>
                <div class="row mb-2">
                    <div class=" mb-1 col-sm-4 col-12">
                        <div class="row">

                            <div class="col-6">
                                <p class="summary-label">Policy number</p>
                            </div>
                            <div class="col-6" id="value">
                                <p class="summary-value ">{{policyNumber}}</p>
                            </div>
                        </div>
                    </div>
                    <div class=" mb-1 col-sm-4 col-12">
                        <div class="row">

                            <div class="col-6">
                                <p class="summary-label">Client</p>
                            </div>
                            <div class="col-6" id="value">
                                <p class="summary-value ">{{client}}</p>
                            </div>
                        </div>
                    </div>
                    <div class=" mb-1 col-sm-4 col-12">
                        <div class="row">

                            <div class="col-6">
                                <p class="summary-label">Cover from</p>
                            </div>
                            <div class="col-6" id="value">
                                <p class="summary-value ">{{coverFrom}}</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mb-4">
                    <div class=" mb-1 col-sm-4 col-12">
                        <div class="row">

                            <div class="col-6">
                                <p class="summary-label">Cover To</p>
                            </div>
                            <div class="col-6" id="value">
                                <p class="summary-value ">{{coverTo}}</p>
                            </div>
                        </div>
                    </div>
                    <div class=" mb-1 col-sm-4 col-12">
                        <div class="row">

                            <div class="col-4">
                                <p class="summary-label">Subclass</p>
                            </div>
                            <div class="col-8" id="value">
                                <p-dropdown [options]="allMatchingSubclasses" optionValue="code" (onChange)="onSubclassSelected($event.value)"
                                    optionLabel="description" formControlName="subClassCode" 
                                    [filterBy]="'description'" [filter]="true"></p-dropdown>
                            </div>
                        </div>
                    </div>
                    <div class=" mb-1 col-sm-4 col-12">

                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-3">


                    </div>
                    <div class="col-sm-9 d-flex justify-content-end">
                        <div class="row  mb-2">

                            <div class="col-sm-3 me-4 ms-3">
                                <button type="button" class="btn btn-primary" id="templateButton"
                                    (click)="downloadCSVTemplate()">{{'gis.policy.export_template' |
                                    translate}}</button>
                            </div>
                            <div class="col-sm-3 ms-4 me-4">
                                <!-- <button type="button" class="btn btn-primary" id="templateButton" >{{'gis.policy.upload_template' |
                                    translate}}</button> -->
                                <!-- Hidden file input -->
                                <input type="file" id="fileInput" accept=".csv" style="display:none;"
                                    (change)="onFileSelected($event)">

                                <!-- Button to trigger file input -->
                                <button type="button" class="btn btn-primary" id="templateButton"
                                    onclick="document.getElementById('fileInput').click()">
                                    {{'gis.policy.upload_template' | translate}}
                                </button>


                                <!-- <label for="fileInput" class="custom-file-upload ">{{'gis.policy.upload_template'
                                    |translate}}</label>

                                <input type="file" id="fileInput" accept=".csv" (change)="onFileSelected($event)"> -->
                            </div>
                            <div class="col-sm-3" style="width:auto">
                                <button type="button" id="icon" class="btn btn-success" data-bs-toggle="modal"
                                    data-bs-target="#editPolicyRisk" title="add" style="margin-left: 77%;">
                                    <i class="fa-solid fa-pencil"></i>
                                </button>
                            </div>
                            <!-- <div class="col-sm-1">
                                <button type="button" id="icon" class="btn btn-primary" data-bs-toggle="modal"
                                    data-bs-target="#editThirdDetails" title="Edit">
                                    <i class="fa-solid fa-pencil"></i>
                                </button>
                            </div> -->
                            <div class="col-sm-3" style="width:auto">
                                <button type="button" id="icon" class="btn btn-danger" data-bs-toggle="modal"
                                    data-bs-target="#deletePolicyRisk" title="Delete" style="margin-left: 77%;">
                                    <i class="fa-solid fa-trash-can"></i>
                                </button>
                            </div>


                        </div>

                    </div>
                </div>
                <p-table [value]="importedRisk" [tableStyle]="{ 'min-width': '300px' }" [(selection)]="selectedRisks" 
                    [paginator]="true"  styleClass="p-datatable-sm" responsiveLayout="scroll"
                    class='ui-datatable' [autoLayout]="true" [rows]="10">
                    <ng-template pTemplate="header">
                        <tr>
                            <th style="width: 4rem"><p-tableHeaderCheckbox /></th>
                            <th>Client ID</th>
                            <th>Client name</th>
                            <th>WEF</th>
                            <th>WET</th>
                            <th>Risk duplicated</th>
                            <th>Class</th>
                            <th>Cover type</th>
                            <th>Premium</th>
                            <th>Taxes</th>

                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-data>
                        <tr>
                            <td>
                                <p-tableCheckbox [value]="data" />
                            </td>
                            <td>{{data.INSURED_ID}}</td>
                            <td>{{data.INSURED_NAME}}</td>
                            <td>{{data.EFF_DATE}}</td>
                            <td>{{data.EXP_DATE}}</td>
                            <td></td>
                            <td></td>
                            <td>{{data.COVER_TYPE}}</td>
                            <td>{{data.BUT_CHARGE_PREMIUM}}</td>
                            <td></td>

                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage">
                        <tr>
                            <td colspan="9" style="padding: 20px; text-align:center " id="empty">
                                {{'gis.policy.no_data_to_display' | translate}}</td>
                        </tr>
                    </ng-template>
                </p-table>
                <div class="d-flex mt-4">
                    <button type="button" class="btn btn-outline-primary me-3" (click)="clear()">Clear</button>
                    <button type="button" class="btn btn-primary" (click)="addPolicyRisk()">Load</button>
                </div>
            </div>
        </div>
        <div class="d-flex justify-content-end mt-4">
            <button type="button" class="btn btn-outline-primary me-3" (click)="previous()">{{'gis.policy.previous' |
                translate}}</button>
            <button type="button" class="btn btn-primary" (click)="next()">{{'gis.policy.next' |
                translate}}</button>
        </div>
    </div>
</div>