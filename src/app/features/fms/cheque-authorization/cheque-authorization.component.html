<div class="base-content-section">
  <div class="me-4">
    <div class="card mb-3">
      <div class="card-header bg-transparent border-bottom-0">
        <span class="justify-content-center mt-3 text-primary">Cheque authorization</span>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-sm-4">
            <label for="paymentType" class="form-label text-black">Please select the payment type</label>
            <p-dropdown
              [options]=""
              optionLabel="name"
              optionValue="id"
              id="paymentType"
              [filter]="true"
              filterBy="name"
              [showClear]="true"
              [style]="{ width: '100%', height: '45%' }"
              placeholder="Select payment type"
            >
            </p-dropdown>
          </div>
        </div>
        <div class="row mb-3">
          <div class="row col-sm-12 col-lg-8">
            <div class="col-sm-6 col-lg-2 position-relative" style="top: 8px">
              <span>Filter by</span>
            </div>
            <div class="col-sm-6 col-lg-3">
              <select class="form-select">
                <option value="">Sorting Options</option>
                <option value="refno">Ref no</option>
                <option value="date">Date</option>
                <option value="amt">Amount</option>
              </select>
            </div>
            <div class="col-sm-6 col-lg-3">
              <select class="form-select">
                <option value="">Sorting Options</option>
                <option value="asc">greater than</option>
                <option value="desc">equals</option>
              </select>
            </div>
            <div class="col-sm-6 col-lg-3">
              <input
                type="text"
                class="form-control"
                placeholder="Enter value"
                aria-label="search"
                aria-describedby="search"

              />
            </div>

          </div>
          <div class="row col-sm-6 col-lg-4">
            <div class="float-lg-end">
              <input
                type="text"
                class="form-control float-end w-75"
                placeholder="Search"
                aria-label="search"
                aria-describedby="search"

              />
              <!--<button class="btn btn-outline-primary ms-4" (click)="showColumnSelect()">
                <i class="fa fa-angle-down"></i>
              </button>-->
            </div>
          </div>

          <div
            class="columnSelect-dialogue float-end bg-white"
            [ngStyle]="{'visibility': (shouldShowColumnSelect === true) ? 'visible' : 'hidden' }"
          >
            <div style="display: block; width: auto">
              <form [formGroup]="columnsForm">

                <div class="form-check">
                  <input class="form-check-input" formControlName="refNo" type="checkbox" [checked]="columns.refNo">
                  <label class="form-check-label">
                    Ref No
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" formControlName="date" type="checkbox" [value]="columns.date">
                  <label class="form-check-label">
                    Date
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" formControlName="requestDate" type="checkbox" [checked]="columns.requestDate">
                  <label class="form-check-label">
                    Request date
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" formControlName="type" type="checkbox" [checked]="columns.type">
                  <label class="form-check-label">
                    Type
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" formControlName="paymentMethod" type="checkbox" [checked]="columns.paymentMethod">
                  <label class="form-check-label">
                    Payment method
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" formControlName="narrative" type="checkbox" [checked]="columns.narrative">
                  <label class="form-check-label">
                    Narrative
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" formControlName="bankAccount" type="checkbox" [checked]="columns.bankAccount">
                  <label class="form-check-label">
                    Bank account
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" formControlName="chequeNumber" type="checkbox" [checked]="columns.chequeNumber">
                  <label class="form-check-label">
                    Cheque number
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" formControlName="amount" type="checkbox" [checked]="columns.amount">
                  <label class="form-check-label">
                    Amount
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" formControlName="payee" type="checkbox" [checked]="columns.payee">
                  <label class="form-check-label">
                    Payee
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" formControlName="remarks" type="checkbox" [checked]="columns.remarks">
                  <label class="form-check-label">
                    Remarks
                  </label>
                </div>

                <button class="btn btn-outline-primary" (click)="closeColumnSelect()">Cancel</button>
                <button class="btn btn-primary ms-2" (click)="showSelectedColumns()">Done</button>
              </form>
            </div>
          </div>
        </div>
        <div >
          <ngx-spinner type="ball-clip-rotate-multiple" [fullScreen]="false" color="#00529B" size="medium" bdColor = "rgba(255, 255, 255, 0.966)"></ngx-spinner>
          <p-table
            #chequeAuthTable
            [autoLayout]="true"
            [rowHover]="true"
            [resizableColumns]="true"
            [showCurrentPageReport]="true"
            [rows]="pageSize || 5"
            [totalRecords]=""
            [value]=""
            [rowsPerPageOptions]="[5, 10, 20, 30, 50, 100]"
            responsiveLayout="stack"
            [scrollable]="true"

            selectionMode="single"
            dataKey="code"
            scrollHeight="400px"
            currentPageReportTemplate="{first} - {last} of {totalRecords}"
            [globalFilterFields]="['description', 'code']"
          >

            <ng-template pTemplate="header">
              <tr>
                <th style="width:0.5rem;">
                  <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                </th>
                <th *ngIf="columns.refNo">Ref No</th>
                <th *ngIf="columns.date">Date</th>
                <th *ngIf="columns.requestDate">Request date</th>
                <th *ngIf="columns.type">Type</th>
                <th *ngIf="columns.paymentMethod">Payment method</th>
                <th *ngIf="columns.narrative">Narrative</th>
                <th *ngIf="columns.bankAccount">Bank account</th>
                <th *ngIf="columns.chequeNumber">Cheque number</th>
                <th *ngIf="columns.amount">Amount</th>
                <th *ngIf="columns.payee">Payee</th>
                <th *ngIf="columns.remarks">Remarks</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-chequeAuth>
              <tr>
                <td>
                  <p-tableCheckbox [value]="chequeAuth"></p-tableCheckbox>
                </td>
                <td *ngIf="columns.refNo">{{chequeAuth.exceptions_remark_code}}</td>
                <td *ngIf="columns.date">
                  {{chequeAuth?.description?.substring(0,10) | titlecase }}
                </td>
                <td *ngIf="columns.requestDate">
                  {{chequeAuth?.underwriting_decision?.substring(0,20) | titlecase }}
                </td>
                <td *ngIf="columns.type">{{chequeAuth?.set_standard}}</td>
                <td *ngIf="columns.paymentMethod">{{chequeAuth?.used_standard}}</td>
                <td *ngIf="columns.narrative">{{chequeAuth?.is_authorized}}</td>
                <td *ngIf="columns.bankAccount">{{chequeAuth?.transactions_date}}</td>
                <td *ngIf="columns.chequeNumber">{{chequeAuth?.authorized_by}}</td>
                <td *ngIf="columns.amount">{{chequeAuth?.authorized_date}}</td>
                <td *ngIf="columns.payee">{{chequeAuth?.exception_by}}</td>
              </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage">
              <tr>
                <td colspan="11">No Cheque Authorization Detail(s) Found.</td>
              </tr>
            </ng-template>
          </p-table>
        </div>
        <!--<div>
          <table class="table">
            <thead>
            <tr>
              <th>Select</th>
              <th *ngIf="columns.refNo">Ref No</th>
              <th *ngIf="columns.date">Date</th>
              <th *ngIf="columns.requestDate">Request date</th>
              <th *ngIf="columns.type">Type</th>
              <th *ngIf="columns.paymentMethod">Payment method</th>
              <th *ngIf="columns.narrative">Narrative</th>
              <th *ngIf="columns.bankAccount">Bank account</th>
              <th *ngIf="columns.chequeNumber">Cheque number</th>
              <th *ngIf="columns.amount">Amount</th>
              <th *ngIf="columns.payee">Payee</th>
              <th *ngIf="columns.remarks">Remarks</th>
            </tr>
            </thead>
            <tbody>
            <tr>
              <td scope="row"><input type="checkbox" ></td>
              <td *ngIf="columns.refNo">Mark</td>
              <td *ngIf="columns.date">Otto</td>
              <td *ngIf="columns.requestDate">@mdo</td>
              <td *ngIf="columns.type">Type</td>
              <td *ngIf="columns.paymentMethod">Payment method</td>
              <td *ngIf="columns.narrative">Narrative</td>
              <td *ngIf="columns.bankAccount">Bank account</td>
              <td *ngIf="columns.chequeNumber">Cheque number</td>
              <td *ngIf="columns.amount">Amount</td>
              <td *ngIf="columns.payee">Payee</td>
              <td *ngIf="columns.remarks">Remarks</td>
            </tr>
            </tbody>
          </table>
        </div>-->
      </div>
    </div>
  </div>
</div>
