<!--{{ partyAccountDetails | json }}-->

<!--<div *ngIf="dynamicDisplay" class="entity-container">
  <ng-container *ngFor="let display of dynamicDisplay">
    <ng-container >
      <ul class="nav nav-underline">
        <li class="nav-item" *ngFor="let tab of display?.tabs">
          <a class="nav-link active" aria-current="page" href="#">
            {{ tab.label[language] | titlecase }}
          </a>
        </li>
      </ul>
    </ng-container>
  </ng-container>
</div>-->

<div *ngIf="dynamicDisplay" class="entity-container">
  <ng-container *ngFor="let display of dynamicDisplay">
    <p-tabView>
      <ng-container *ngFor="let tab of display?.tabs">
        <p-tabPanel>
          <ng-template pTemplate="header" >
            <span
              class="m-2 tab-title" (click)="selectTab(tab)"
              [ngClass]="{
                'text-primary': tab.title === selectedTab || tab.title === selectedSubTab,
                'text-dark': tab.title !== selectedTab || tab.title !== selectedSubTab
                }"
            >
              {{ tab.label[language] | titlecase }}
            </span>
            <span
              id="edit-tab-btn"
              *ngIf="(tab.title === selectedTab || tab.title === selectedSubTab) && tab.title !== 'wealth_aml'"
              class="m-2"
              (click)="openEditModal(tab.title)"
            >
              <i class="fa fa-pencil"></i>
            </span>
          </ng-template>
          <ng-container
            *ngIf="
            entityPartyIdDetails &&
            entityAccountIdDetails &&
            clientDetails &&
            unAssignedPartyTypes &&
            clientDetails &&
            tab.title === 'overview'
          "
          >
            <app-entity-basic-info
              [unAssignedPartyTypes]="unAssignedPartyTypes"
              [partyAccountDetails]="partyAccountDetails"
              [entityAccountIdDetails]="entityAccountIdDetails"
              [entityPartyIdDetails]="entityPartyIdDetails"
              [clientDetails]="clientDetails"
              (assignRole)="onAssignRole($event)"
              (partyTypeRole)="selectPartyTypeRole($event)"
              [overviewConfig]="tab"
            ></app-entity-basic-info>
          </ng-container>

          <ng-container *ngIf="
            clientDetails &&
            tab.title==='prime_identity';"
          >
            <app-prime-identity
              #primeIdentityRef
              [partyAccountDetails]="partyAccountDetails"
              [clientDetails]="clientDetails"
              [primeDetailsConfig]="tab"
              [formFieldsConfig]="editPrimeDetailsFormConfig"
            >
            </app-prime-identity>
          </ng-container>
          <ng-container *ngIf="
            clientDetails &&
            editContactFormConfig?.fields.length > 0 &&
            tab.title==='contact'"
          >
            <app-contact
              #contactRef
              [contactDetails]="clientDetails?.contactDetails"
              [accountCode]="clientDetails.clientCode"
              [contactDetailsConfig]="tab"
              [formFieldsConfig]="editContactFormConfig"
            ></app-contact>
          </ng-container>

          <ng-container *ngIf="
            clientDetails &&
            tab.title==='address';"
          >
            <app-address
              #addressRef
              [addressDetails]="clientDetails.address"
              [accountCode]="clientDetails.clientCode"
              [addressDetailsConfig]="tab"
              [formFieldsConfig]="editAddressFormConfig"
            ></app-address>
          </ng-container>

          <ng-container *ngIf="
            clientDetails &&
            tab.title==='financial'"
          >
            <app-financial
              #financialRef
              [financialDetails]="clientDetails.paymentDetails"
              [accountCode]="clientDetails.clientCode"
              [financialDetailsConfig]="tab"
              [formFieldsConfig]="editFinancialFormConfig"
              [countryId]="clientDetails?.address?.countryId"
            >
            </app-financial>
          </ng-container>

          <ng-container *ngIf="
            clientDetails &&
            tab.title==='wealth_aml'"
          >
            <app-wealth-aml
              #wealthAmlRef
              [wealthAmlDetails]="clientDetails.wealthAmlDetails"
              [accountCode]="clientDetails.clientCode"
              [wealthAmlDetailsConfig]="tab"
              [formFieldsConfig]="editWealthAmlFormConfig"
            ></app-wealth-aml>
          </ng-container>

        </p-tabPanel>
      </ng-container>
    </p-tabView>
  </ng-container>
</div>


<!--
<div class="entity-container">
  <ngx-spinner
    type="ball-clip-rotate-multiple"
    [fullScreen]="false"
    color="#00529B"
    size="medium"
    bdColor="rgba(255, 255, 255, 0.966)"
  ></ngx-spinner>
  <div class="p-2">
    <p-tabView>
      <p-tabPanel header="Overview">
        <ng-container
          *ngIf="
            entityPartyIdDetails &&
            entityAccountIdDetails &&
            partyAccountDetails &&
            unAssignedPartyTypes
          "
        >
          <app-entity-basic-info
            [unAssignedPartyTypes]="unAssignedPartyTypes"
            [partyAccountDetails]="partyAccountDetails"
            [entityAccountIdDetails]="entityAccountIdDetails"
            [entityPartyIdDetails]="entityPartyIdDetails"
            (assignRole)="onAssignRole($event)"
            (partyTypeRole)="selectPartyTypeRole($event)"
          ></app-entity-basic-info>
        </ng-container>

        <ng-container *ngIf="partyAccountDetails">
          <app-entity-other-details
            [countries]="countries"
            [partyAccountDetails]="partyAccountDetails"
            [bankDetails]="bankDetails"
            [bankBranch]="bankBranchDetails"
            [wealthAmlDetails]="wealthAmlDetails"
            [nokList]="nokDetails"
            [states]="states"
            [entityPartyIdDetails]="entityPartyIdDetails"
            (refreshData)="refreshData()"
          ></app-entity-other-details>
        </ng-container>
      </p-tabPanel>
      <p-tabPanel header="Transactions">
        <app-entity-transactions
          [clientName]="entityPartyIdDetails?.name"
        ></app-entity-transactions>
      </p-tabPanel>
    </p-tabView>
  </div>
</div>
-->
