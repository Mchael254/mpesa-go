
<ng-container *ngIf="subGroups?.length > 0">
  <ng-container *ngFor="let subGroup of subGroups">
    <div class="my-3">
      <ng-container *ngIf="!(subGroup.subGroupId.includes(cr12SearchSubString))">
        <app-overview-table
          [subGroup]="subGroup"
          [table]="subGroup.table"
          [language]="language"
          (rowClicked)="handleCr12Display($event)"
          (deleteBtnClicked)="handleWealthAmlDelete($event, subGroup)"
        >
        </app-overview-table>
      </ng-container>
      <ng-container *ngIf="(subGroup.subGroupId.includes(cr12SearchSubString)) && shouldShowCr12Details">
        <app-overview-table
          [subGroup]="subGroup"
          [table]="subGroup.table"
          [language]="language"
          (deleteBtnClicked)="handleCr12Delete($event, subGroup)"
        >
        </app-overview-table>
      </ng-container>
  </div>
    <!--<button class="btn btn-danger" (click)="addWealthAml()">Add AML</button>-->
  </ng-container>



<!--<div class="row">
  <div class="col-sm-2 offset-sm-10 text-end mb-3">
    <button
      class="btn btn-primary btn-primary"
      style="font-size: 0.8em"
      (click)="openEditWealthAmlDialog(true, null)"
    >
      + AML Details
    </button>
      <span class="p-1 me-5 caret" (click)="columnDialogVisible = true">
        <i class="fa fa-caret-down text-primary"></i>
      </span>
  </div>
</div>-->

<!--<p-dialog [header]="''" [(visible)]="columnDialogVisible" [modal]="true" [style]="{width: '600px'}">
  <div class="row">
    <ng-container *ngFor="let col of columns">
      <div class="col-sm-6">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" value="" id="checkChecked" [checked]="col.visible" [(ngModel)]="col.visible">
          <label class="form-check-label" for="checkChecked">
            {{ col.header | titlecase }}
          </label>
        </div>
      </div>
    </ng-container>
  </div>
</p-dialog>-->

<!--<ng-container *ngIf="wealthAmlDetails?.length >= 0">
  <p-table
    [autoLayout]="true"
    [lazy]="true"
    [paginator]="true"
    [rowHover]="true"
    [resizableColumns]="true"
    [showCurrentPageReport]="true"
    [rows]="pageSize || 5"
    [totalRecords]="totalRecords"
    [value]="wealthAmlDetails"
    [rowsPerPageOptions]="[5, 10, 20, 30, 50, 100]"
    responsiveLayout="stack"
    [scrollable]="true"
    scrollHeight="400px"
    currentPageReportTemplate="{first} - {last} of {totalRecords}"
    [globalFilterFields]=globalFilterFields
  >

    <ng-template pTemplate="header">
      <tr>
        <ng-container *ngFor="let col of columns">
          <th *ngIf="col.visible">
            {{ col.header | titlecase }}
            <p-sortIcon [field]="col.field"></p-sortIcon>
          </th>
        </ng-container>
        <th>
          &lt;!&ndash;{{ actionLabel[language] }}&ndash;&gt;
        </th>
      </tr>
      &lt;!&ndash;<tr>
        <ng-container *ngFor="let col of columns">
          <th *ngIf="col.visible">
            <input type="text" class="form-control w-75" (keyup.enter)="filter($event, 0, 5, col.field)" (input)="processInput($event, col.field)">
          </th>
        </ng-container>
        <th></th>
      </tr>&ndash;&gt;
    </ng-template>
    <ng-template pTemplate="body" let-rowData>
      <tr [pSelectableRow]="rowData">
        <ng-container *ngFor="let col of columns">
          <td *ngIf="col.visible">
            <span *ngIf="!rowData[col.field]?.id">
              {{ (rowData[col.field] | titlecase) || (rowData[col.field]) }}
            </span>
            <span *ngIf="rowData[col.field]?.id">
              {{ (rowData[col.field]?.name | titlecase) || (rowData[col.field]?.name)  }}
            </span>
          </td>
        </ng-container>

        <td *ngIf="columns?.length > 0">
          <div class="actions">
            <button type="button" class="btn btn-link text-primary" (click)="openEditWealthAmlDialog(true, rowData)">
              Edit
            </button>
            <button
              type="button"
              class="btn btn-link text-primary"
              data-bs-toggle="modal"
              data-bs-target="#deleteWealthAmlModal"
              (click)="selectItemToDelete(rowData)"
            >
              Delete
            </button>
          </div>
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="8">No Wealth/AML details Found.</td>
      </tr>
    </ng-template>
  </p-table>
</ng-container>-->




<!--edit prime details modal-->
<button #editButton type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#editWealthAmlModal" hidden>
  Open Edit Wealth AML Modal
</button>

<!-- Modal -->
<div class="modal fade" id="editWealthAmlModal" tabindex="-1" aria-labelledby="editWealthAmlModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-4 text-primary" id="editWealthAmlModalLabel">
<!--          {{ formFieldsConfig?.label[language] || '-&#45;&#45;' | titlecase }}-->
        </h1>
        <button #closeButton type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <ng-container *ngIf="shouldShowEditForm; else showMessage">
        <div class="modal-body">
          <ng-container *ngIf=" editForm; else loadingForm">
            <form [formGroup]="editForm">
              <div class="row g-3">
                <ng-container *ngFor="let field of formGroupsAndFieldConfig.fields">
                  <div class="col-md-6">
                    <label [for]="field.fieldId" class="form-label">
                      {{ field?.label[language] || '---' | titlecase }}
                    </label>
                    <!-- Text input -->
                    <input
                      *ngIf="field.type === 'text' || field.type === 'email'"
                      [formControlName]="field.fieldId"
                      [placeholder]="field?.placeholder[language] || ''"
                      [id]="field.fieldId"
                      type="text"
                      class="form-control"
                    />

                    <!--select input-->
                    <select
                      *ngIf="field.type === 'select'"
                      [formControlName]="field.fieldId"
                      [id]="field.fieldId"
                      class="form-select"
                    >
                      <option *ngFor="let opt of field.options" [value]="(opt.id ? opt.id : opt.value) || opt.code">
                        {{ opt.name || opt.description || opt.label | titlecase }}
                      </option>
                    </select>
                  </div>
                </ng-container>
              </div>
            </form>
          </ng-container>
          <ng-template #loadingForm>
            <div class="text-center">
              <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
              </div>
            </div>
          </ng-template>
        </div>
        <div class="modal-footer">
          <!--<button type="button" class="btn btn-outline-primary" data-bs-dismiss="modal">
            {{ formGroupsAndFieldConfig?.buttons?.cancel?.label[language] || '-&#45;&#45;' | titlecase }}
          </button>
          <button type="button" class="btn btn-primary" (click)="editWealthAmlDetails()">
            {{ formFieldsConfig?.buttons?.save?.label[language] || '-&#45;&#45;' | titlecase }}
          </button>-->
        </div>
      </ng-container>
      <ng-template #showMessage>
        <p class="lead text-center text-danger my-5">Select a record to edit.</p>
      </ng-template>
    </div>
  </div>
</div>


<!-- Delete wealth/aml modal-->
<button style="display: none" type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#deleteWealthAmlModal">
  Launch delete modal
</button>

<!-- Modal -->
<div class="modal fade" id="deleteWealthAmlModal" tabindex="-1" aria-labelledby="deleteWealthAmlModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header border-0">
        <h1 class="modal-title fs-5" id="deleteWealthAmlModalLabel">Delete Wealth/AML Record</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p class="text-center lead">Are you sure you want to delete?</p>
      </div>
      <div class="modal-footer border-0">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" #closeDeleteDialogButton>Close</button>
        <button type="button" class="btn btn-danger" (click)="deleteAmlRecord()">Confirm</button>
      </div>
    </div>
  </div>
</div>
