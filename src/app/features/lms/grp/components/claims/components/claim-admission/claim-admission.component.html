<div class="main">
  <div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
      <app-stepper [currentStep]="2" [stepperData]="steps"></app-stepper>
    </div>
  </div>
  <ngx-spinner name="download_view" type="ball-clip-rotate-multiple" [fullScreen]="true" color="#00529B" size="medium"
    bdColor="rgba(255, 255, 255, 0.9)"></ngx-spinner>
  <div class="container">
    <div><span class="title">{{ "lms.grp.claims.claim_information" | translate }}</span></div>
    <div class="row col-12" style="color: black;">
      <div class="col-md-4 col-xs-12 col-sm-12">
        <table style="width: 100%;">
          <tr>
            <td style="width: 50%; align-items: left; color: grey;">{{ "lms.grp.claims.product" | translate }}: </td>
            <td style="width: 50%; align-items: right;">{{ claimDetails }}</td>
          </tr>
          <tr>
            <td style="width: 50%; align-items: left; color: grey;">{{ "lms.grp.claims.cause_type" | translate }}: </td>
            <td style="width: 50%; align-items: right;">{{ claimDetails[0]?.cause_type | titlecase }}</td>
          </tr>
          <tr>
            <td style="width: 50%; align-items: left; color: grey;">{{ "lms.grp.claims.incident_location" | translate }}: </td>
            <td style="width: 50%; align-items: right;">{{ claimDetails[0]?.death_location | titlecase }}</td>
          </tr>
        </table>
      </div>
      <div class="col-md-4 col-xs-12 col-sm-12">
        <table style="width: 100%;">
          <tr>
            <td style="width: 50%; align-items: left; color: grey;">{{ "lms.grp.claims.policy" | translate }}: </td>
            <td style="width: 50%; align-items: right;">{{ claimDetails }}</td>
          </tr>
          <tr>
            <td style="width: 50%; align-items: left; color: grey;">{{ "lms.grp.claims.causation_cause" | translate }}: </td>
            <td style="width: 50%; align-items: right;">{{ claimDetails[0]?.cause_description | titlecase }}</td>
          </tr>
          <tr>
            <td style="width: 50%; align-items: left; color: grey;">{{ "lms.grp.claims.claim_report_date" | translate }}: </td>
            <td style="width: 50%; align-items: right;">{{ claimDetails[0]?.date_reported | date: 'yyyy-MM-dd' }}</td>
          </tr>
        </table>
      </div>
      <div class="col-md-4 col-xs-12 col-sm-12">
        <table style="width: 100%;">
          <tr>
            <td style="width: 50%; align-items: left; color: grey;">{{ "lms.grp.claims.policy_member" | translate }}: </td>
            <td style="width: 50%; align-items: right;">{{ claimDetails[0]?.member_name | titlecase }}</td>
          </tr>
          <tr>
            <td style="width: 50%; align-items: left; color: grey;">{{ "lms.grp.claims.death_date" | translate }}: </td>
            <td style="width: 50%; align-items: right;">{{ claimDetails[0]?.date_of_accident | date: 'yyyy-MM-dd' }}</td>
          </tr>
        </table>
      </div>
    </div>

    <!-- <div class="mt-3"><span class="title">{{ "lms.grp.claims.documents" | translate }}</span></div>

    <div class="doc-container">
      <div class="document" *ngFor="let doc of documents; let i = index">
        <div style="color: black;">{{ doc.label }}</div>
        <div class="document-row">
          <img src="assets/images/file-type-pdf.svg" class="pdf-icon">{{ doc.name }}
          <span class="icon-container">
            <a href="{{ doc.path }}" target="_blank" title="View">
              <i class="pi pi-eye" aria-hidden="true"></i>
            </a>

            <a href="{{ doc.path }}" download title="Download">
              <i class="pi pi-download" aria-hidden="true"></i>
            </a>
          </span>
        </div>
      </div>
    </div> -->

    <div class="title">{{ "lms.grp.claims.upload_documents" | translate }}</div>
    <div class="row">
      <div class="col-md-6 col-sm-12 docs" *ngFor="let document of documents; let i = index;">
        <div class="d-flex align-items-center flex-wrap">
          <label [for]="'document' + i" class="fixed-width-label" style="color: black; width: 200px;">
            {{ document.document_description | titlecase }}<span style="color: red;">*</span>
          </label>
          <div class="form-group">
            <input type="file" [id]="'document' + i" #fileInput style="display: none;" (change)="onFileSelected($event, i)">
            <button class="choose-file" (click)="fileInput.click()">
              <span class="file-text">{{ "lms.grp.claims.choose_file" | translate }}</span>
            </button>
          </div>
        </div>
        <div class="file-container" *ngIf="selectedFile[i]">
          <img src="assets/images/file-type-pdf.svg" class="pdf-icon">
          <div class="file-details">
            <div class="file-name-container">
              <span class="file-name">{{ selectedFile[i].name }}</span>
              <span class="completed" *ngIf="uploadProgress === 100">{{ "lms.grp.claims.completed" | translate }}</span>
            </div>
            <p-progressBar [value]="uploadProgress" class="progress-bar">
              <ng-template pTemplate="content" let-value>
                <span>{{ value }}%</span>
              </ng-template>
            </p-progressBar>
          </div>
          <i class="pi pi-trash delete-icon" (click)="removeFile(i)"></i>
        </div>
        
      </div>
    </div>
    

  </div>
  <div class="button-container" *ngIf="!isClaimAdmitted">
    <button class="admit-claim" (click)="onAdmitClaim()">{{ "lms.grp.claims.admit_claim" | translate }}</button>
  </div>

  <ng-container *ngIf="isClaimAdmitted">
    <div class="container" style="margin-top: 10px;">
      <div><span class="title">{{ "lms.grp.claims.acknowledgement_letter" | translate }}</span></div>

      <div class="download-link" style="display: flex; align-items: center; white-space: nowrap;">
        <a href="#">
          <img src="assets/images/file-type-pdf.svg" class="pdf-icon" style="vertical-align: middle;">
          <span class="download-link" style="vertical-align: middle;">
            {{ 'Claim acknowledgement letter' }}
          </span>
        </a>
      
        <span style="margin-left: 20px; vertical-align: middle;">
          <i class="pi pi-eye" aria-hidden="true" title="view"></i>
        </span>
        <span style="margin-left: 10px; vertical-align: middle;">
          <i class="pi pi-download" aria-hidden="true" title="Download"></i>
        </span>
      
        <span class="share-button-container">
          <button class="bottom-button-share" (click)="showShareAcknowledgmentModal()">
            <span class="text-share">{{ "lms.grp.claims.share" | translate }}</span>
          </button>
        </span>
      </div>
      
    </div>
  
    <div class="button-container">
      <button class="admit-claim" (click)="onProcessClaim()">{{ "lms.grp.claims.process_claim" | translate }}</button>
    </div>
  </ng-container>
</div>

<!-- modals begin -->
 <!-- Share acknowledgement -->
 <div class="modal fade" tabindex="-1" #memberSummaryModal id="shareAcknowledgementModal"
 aria-labelledby="shareAcknowledgementModal" aria-hidden="true">
 <div class="modal-dialog modal-dialog-centered modal-lg">
     <div class="modal-content">
         <div class="modal-header">
          <h5 class="modal-title" id="shareAcknowledgementModal">{{ "lms.grp.claims.acknowledgement_details" | translate }}</h5>
             <button type="button" class="custom-red-button ms-auto" data-bs-dismiss="modal"
                 aria-label="Close" (click)="closeShareAcknowledgmentModal()"></button>
         </div>
         <div class="modal-body">
             <!-- <div class="card"> -->
              <div class="row col-12" style="color: black;">
                <div class="col-md-6 col-xs-12 col-sm-12 col-xs-12">
                  <table style="width: 100%;">
                    <tr>
                      <td style="width: 50%; align-items: left; color: grey;">{{ "lms.grp.claims.product" | translate }}: </td>
                      <td style="width: 50%; align-items: right;">{{ claimDetails }}</td>
                    </tr>
                    <tr>
                      <td style="width: 50%; align-items: left; color: grey;">{{ "lms.grp.claims.policy" | translate }}: </td>
                      <td style="width: 50%; align-items: right;">{{ claimDetails }}</td>
                    </tr>
                    <tr>
                      <td style="width: 50%; align-items: left; color: grey;">{{ "lms.grp.claims.policy_member" | translate }}: </td>
                      <td style="width: 50%; align-items: right;">{{ claimDetails }}</td>
                    </tr>
                    <tr>
                      <td style="width: 50%; align-items: left; color: grey;">{{ "lms.grp.claims.cause_type" | translate }}: </td>
                      <td style="width: 50%; align-items: right;">{{ claimDetails }}</td>
                    </tr>
                  </table>
                </div>
                <div class="col-md-6 col-xs-12 col-sm-12 col-xs-12">
                  <table style="width: 100%;">
                    <tr>
                      <td style="width: 50%; align-items: left; color: grey;">{{ "lms.grp.claims.actual_cause" | translate }}: </td>
                      <td style="width: 50%; align-items: right;">{{ claimDetails }}</td>
                    </tr>
                    <tr>
                      <td style="width: 50%; align-items: left; color: grey;">{{ "lms.grp.claims.claim_initialization_date" | translate }}: </td>
                      <td style="width: 50%; align-items: right;">{{ claimDetails }}</td>
                    </tr>
                    <tr>
                      <td style="width: 50%; align-items: left; color: grey;">{{ "lms.grp.claims.incident_occurence_date" | translate }}: </td>
                      <td style="width: 50%; align-items: right;">{{ claimDetails }}</td>
                    </tr>
                  </table>
                </div>
              </div>
              <div class="black-text-form title mt-3">{{ "lms.grp.claims.share_acknowledgement_letter" | translate }}</div>
             <form [formGroup]="shareAcknowledgementForm" class="black-text-form">
              <div class="black-text-form mt-2">{{ "lms.grp.claims.select_sharing_method" | translate }}</div>
                 <div class="row col-lg-7 col-m-7 col-sm-12 col-xs-12">
                     <div class="col">
                         <div class="custom-radio-button-container">
                             <p-radioButton formControlName="communicationType" value="email" inputId="email"
                                 class="custom-radio-button"></p-radioButton>
                                 <!-- <input class="form-check-input" type="radio" value="email" formControlName="communicationType"
                              id="email" name="communicationType" /> -->
                             <label for="email" class="custom-label">{{ "lms.grp.claims.email" | translate }}</label>
                         </div>
                     </div>

                     <div class="col">
                         <div class="">
                             <p-radioButton formControlName="communicationType" value="sms"
                                 inputId="sms"></p-radioButton>
                             <label for="sms" class="custom-label">{{ "lms.grp.claims.sms" | translate }}</label>
                         </div>
                     </div>

                     <div class="col">
                         <div class="">
                             <p-radioButton formControlName="communicationType" value="whatsapp"
                                 inputId="whatsapp"></p-radioButton>
                             <label for="whatsapp" class="custom-label">{{ "lms.grp.claims.whatsapp" | translate }}</label>
                         </div>
                     </div>
                 </div>

                 <div *ngIf="shareAcknowledgementForm.get('communicationType').value === 'email'">
                     <div>
                         <label class="label" for="email">{{ "lms.grp.claims.enter_email_address" | translate }}<span
                                 class="required"></span></label>
                     </div>
                     <div class="form-group col-lg-6 col-m-6 col-sm-12 col-xs-12">
                         <input type="email" pInputText class="form-control" formControlName="email" />
                     </div>
                 </div>

                 <div *ngIf="shareAcknowledgementForm.get('communicationType').value === 'sms'">
                     <div>
                         <label class="label" for="sms">{{ "lms.grp.claims.enter_phone_number" | translate }}<span
                                 class="required"></span></label>
                     </div>
                     <div class="form-group col-lg-6 col-m-6 col-sm-12 col-xs-12">
                         <input type="text" pInputText class="form-control" formControlName="sms" />
                     </div>
                 </div>

                 <div *ngIf="shareAcknowledgementForm.get('communicationType').value === 'whatsapp'">
                     <div>
                         <label class="label" for="whatsapp">{{ "lms.grp.claims.enter_whatsapp_number" | translate }}<span
                                 class="required"></span></label>
                     </div>
                     <div class="form-group col-lg-6 col-m-6 col-sm-12 col-xs-12">
                         <input type="text" pInputText class="form-control" formControlName="whatsapp" />
                     </div>
                 </div>

             </form>

             <!-- </div> -->
         </div>
         <div class="modal-footer">
             <button type="button" class="btn btn-primary" data-bs-dismiss="modal">{{ "lms.grp.claims.share" | translate }}</button>
         </div>
     </div>
 </div>
</div>
<!-- Share acknowledgement end -->
 <!-- modals end -->