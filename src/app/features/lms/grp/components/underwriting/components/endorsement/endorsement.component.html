<div class="main">
    <div class="row stepper">
        <div class="col-md-12">
          <app-stepper [currentStep]="2" [stepperData]="steps"></app-stepper>
        </div>
      </div>
    <div class="container">
        <ngx-spinner
        name="download_view"
          type="ball-clip-rotate-multiple"
  
          [fullScreen]="true"
          color="#00529B"
          size="medium"
          bdColor="rgba(255, 255, 255, 0.9)"
        ></ngx-spinner>
        <p-confirmDialog></p-confirmDialog>  <!--confirm dialog, used more than once -->
        <div style="padding-left: 25px; padding-top: 20px;"><span class="quote-text">Policy details</span></div>
        <div class="row col-12 mt-1" style="color: black; padding-left: 25px;">
            <div class="col-md-4 col-xs-12">
                <table style="width: 100%; min-height: 100px;">
                    <tr>
                        <td style="width: 50%; align-items: left; color: grey;">Policy number: </td>
                        <td style="width: 50%; align-items: right;">{{ quoteSummary }}</td>
                    </tr>
                    <tr>
                        <td style="width: 50%; align-items: left; color: grey;">Quotation number: </td>
                        <td style="width: 50%; align-items: right;">{{ quoteSummary }}</td>
                    </tr>
                    <tr>
                        <td style="width: 50%; align-items: left; color: grey;">Client name: </td>
                        <td style="width: 50%; align-items: right;">{{ quoteSummary }}</td>
                    </tr>
                </table>
            </div>
            <div class="col-md-4 col-xs-12">
                <table style="width: 100%; min-height: 100px;">
                    <tr>
                        <td style="width: 50%; align-items: left; color: grey;">Frequency of payment: </td>
                        <td style="width: 50%; align-items: right;">{{ quoteSummary }}</td>
                    </tr>
                    <tr>
                        <td style="width: 50%; align-items: left; color: grey;">Policy status: </td>
                        <td style="width: 50%; align-items: right;">{{ quoteSummary }}</td>
                    </tr>
                    <tr>
                        <td style="width: 50%; align-items: left; color: grey;">Product description: </td>
                        <td style="width: 50%; align-items: right;">{{ quoteSummary }}</td>
                    </tr>
                </table>
            </div>
            <div class="col-md-4 col-xs-12">
                <table style="width: 100%; min-height: 100px;">
                    <tr>
                        <td style="width: 50%; align-items: left; color: grey;">Occupation: </td>
                        <td style="width: 50%; align-items: right;">{{ quoteSummary }}</td>
                    </tr>
                    <tr>
                        <td style="width: 50%; align-items: left; color: grey;">Policy effective date: </td>
                        <td style="width: 50%; align-items: right;">{{ quoteSummary }}</td>
                    </tr>
                    <tr>
                        <td style="width: 50%; align-items: left; color: grey;">Branch: </td>
                        <td style="width: 50%; align-items: right;">{{ quoteSummary }}</td>
                    </tr>
                </table>
            </div>
        </div>

        <div style="padding-left: 25px; padding-top: 20px;"><span class="quote-text">Endorsement details</span>&nbsp;
            <i class="pi pi-pencil" (click)="showEndorsementDetsModal()"></i>
        </div>
        <div class="row col-12 mt-1" style="color: black; padding-left: 25px; white-space: nowrap;">
            <div class="col-md-4 col-xs-12">
                <table style="width: 100%; min-height: 133px;">
                    <tr>
                        <td style="width: 50%; align-items: left; color: grey;">Endorsement number: </td>
                        <td style="width: 50%; align-items: right;">{{ endorsementDetails?.endr_no }}</td>
                    </tr>
                    <tr>
                        <td style="width: 50%; align-items: left; color: grey;">Mask: </td>
                        <td style="width: 50%; align-items: right;">{{ endorsementDetails?.mask_display | titlecase }}</td>
                    </tr>
                    <tr>
                        <td style="width: 50%; align-items: left; color: grey;">Status: </td>
                        <td style="width: 50%; align-items: right;">{{ endorsementDetails?.endr_status }}</td>
                    </tr>
                    <tr>
                        <td style="width: 50%; align-items: left; color: grey;">Date to: </td>
                        <td style="width: 50%; align-items: right;">{{ endorsementDetails?.endr_cover_to_date }}</td>
                    </tr>
                    <tr>
                        <td style="width: 50%; align-items: left; color: grey;">Facultative type: </td>
                        <td style="width: 50%; align-items: right;">{{ endorsementDetails?.endr_facultative_type }}</td>
                    </tr>
                </table>
            </div>
            <div class="col-md-4 col-xs-12">
                <table style="width: 100%; min-height: 100px;">
                    <tr>
                        <td style="width: 50%; align-items: left; color: grey;">Endorsement type: </td>
                        <td style="width: 50%; align-items: right;">{{ endorsementDetails?.endr_duration_type }}</td>
                    </tr>
                    <tr>
                        <td style="width: 50%; align-items: left; color: grey;">Duration: </td>
                        <td style="width: 50%; align-items: right;">{{ endorsementDetails?.endr_duration_term_type }}</td>
                    </tr>
                    <tr>
                        <td style="width: 50%; align-items: left; color: grey;">Effective date: </td>
                        <td style="width: 50%; align-items: right;">{{ endorsementDetails?.endr_effective_date }}</td>
                    </tr>
                    <tr>
                        <td style="width: 50%; align-items: left; color: grey;">Calc type: </td>
                        <td style="width: 50%; align-items: right;">{{ endorsementDetails?.endr_calc_type }}</td>
                    </tr>
                    <tr>
                        <td style="width: 50%; align-items: left; color: grey;">Investement type: </td>
                        <td style="width: 50%; align-items: right;">{{ endorsementDetails?.endr_investment_term }}</td>
                    </tr>
                </table>
            </div>
            <div class="col-md-4 col-xs-12">
                <table style="width: 100%; min-height: 100px;">
                    <tr>
                        <td style="width: 50%; align-items: left; color: grey;">Intermediary: </td>
                        <td style="width: 50%; align-items: right;">{{ endorsementDetails?.agent_display | titlecase }}</td>
                    </tr>
                    <tr>
                        <td style="width: 50%; align-items: left; color: grey;">payment frequency: </td>
                        <td style="width: 50%; align-items: right;">{{ endorsementDetails?.endr_freq_of_payment }}</td>
                    </tr>
                    <tr>
                        <td style="width: 50%; align-items: left; color: grey;">Date from: </td>
                        <td style="width: 50%; align-items: right;">{{ endorsementDetails?.endr_cover_from_date }}</td>
                    </tr>
                    <tr>
                        <td style="width: 50%; align-items: left; color: grey;">FCL calc type: </td>
                        <td style="width: 50%; align-items: right;">{{ endorsementDetails?.endr_fcl_calc_type }}</td>
                    </tr>
                    <tr>
                        <td style="width: 50%; align-items: left; color: grey;">Single/gross rates: </td>
                        <td style="width: 50%; align-items: right;">{{ endorsementDetails?.endr_single_gross_rate }}</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- tabView -->
        <p-tabView>
            <p-tabPanel header="Cover details" style="border: none; outline: none;">
                <div class="add-client-button-container">
                    <button class="btn btn-success m-1 rounded-circle"
                        (click)="showDetailedCoverDetailsModal()">&plus;</button>
                </div>
                <p-table [value]="coverTypes" [scrollable]="true" scrollHeight="400px" [tableStyle]="{'min-width': '50rem'}">
                    <ng-template pTemplate="header">
                        <tr>
                            <th>Cover type</th>
                            <th>Override premiums</th>
                            <th>Average ANB</th>
                            <th>No of members</th>
                            <th>Average earning per member</th>
                            <th>Sum assured</th>
                            <th>Dependant type</th>
                            <th class="action-column"></th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-cover>
                        <tr>
                            <td>{{ cover.pcvt_cvt_sht_desc | titlecase }}</td>
                            <td>{{ cover.pcvt_override_ret_limit }}</td>
                            <td>{{ cover.pcvt_avg_anb }}</td>
                            <td>{{ cover.pcvt_tot_members }}</td>
                            <td>{{ cover.pcvt_avg_mem_earn }}</td>
                            <td style="text-align: right;">{{ cover.pcvt_sa | number }}</td>
                            <td>{{ cover.cvt_depend_disp }}</td>
                            <td class="action-column">
                                <div class="flex justify-content-center">
                                    <p-overlayPanel #op>
                                        <div class="action-buttons">
                                            <!-- Edit button -->
                                            <div class="button-wrapper">
                                                <!-- <p-button label="Edit" icon="pi pi-pencil" (click)="showEditCoverDetailsModal(cover)" -->
                                                    <p-button label="Edit" icon="pi pi-pencil"
                                                    styleClass="p-button-rounded p-button-text" severity="warning"></p-button>
                                            </div>
                                        
                                            <!-- Delete button -->
                                            <div class="button-wrapper">
                                                <!-- <p-button label="Delete" icon="pi pi-trash" (click)="deleteCover(cover, $event)" -->
                                                    <p-button label="Delete" icon="pi pi-trash"
                                                    styleClass="p-button-rounded p-button-text" severity="danger"></p-button>
                                            </div>
                                        </div>
                                        
                                    </p-overlayPanel>
                                    <!-- Ellipsis container -->
                                    <div class="button-container">
                                        <button class="hover-button" (click)="op.toggle($event)">
                                            <i class="fas fa-ellipsis-v" (click)="op.toggle($event)"></i>
                                        </button>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>

            </p-tabPanel>
            <p-tabPanel header="Category">
                <div class="add-client-button-container" style="max-width: 50rem;">
                    <button class="btn btn-success m-1 rounded-circle"
                        (click)="showCategoryDetstModal()">&plus;</button>
                </div>
                <p-table [value]="categories" [scrollable]="true" scrollHeight="400px" [tableStyle]="{'max-width': '50rem'}">
                    <ng-template pTemplate="header">
                        <tr>
                            <th style="width: calc(100% / 4);">Short description</th>
                            <th style="width: calc(100% / 4);">Description</th>
                            <th style="width: calc(100% / 4);">Premium mask</th>
                            <th style="width: calc(100% / 4);">Multiple of earnings</th>
                            <th class="action-column"></th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-cats>
                        <tr>
                            <td>{{ cats.short_description }}</td>
                            <td>{{ cats.category_category  | titlecase }}</td>
                            <td>{{ cats.pmas_sht_desc }}</td>
                            <td>{{ cats.period }}</td>
                            <td class="action-column">
                                <div class="flex justify-content-center">
                                    <p-overlayPanel #op>
                                        <div class="action-buttons">
                                            <!-- Edit button -->
                                            <div class="button-wrapper">
                                                <!-- <p-button label="Edit" icon="pi pi-pencil" (click)="showEditCatDetailsModal(cats)" -->
                                                    <p-button label="Edit" icon="pi pi-pencil"
                                                    styleClass="p-button-rounded p-button-text" severity="warning" (click)="showEditCatDetailsModal(cats)"></p-button>
                                            </div>
                                        
                                            <!-- Delete button -->
                                            <div class="button-wrapper">
                                                    <p-button label="Delete" icon="pi pi-trash"
                                                    styleClass="p-button-rounded p-button-text" severity="danger" (click)="deleteCategory(cats, $event)"></p-button>
                                            </div>
                                        </div>
                                        
                                    </p-overlayPanel>
                                    <!-- Ellipsis container -->
                                    <div class="button-container">
                                        <button class="hover-button" (click)="op.toggle($event)">
                                            <i class="fas fa-ellipsis-v" (click)="op.toggle($event)"></i>
                                        </button>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </p-tabPanel>
            <p-tabPanel header="Members">
                <ng-container *ngIf="quotationCalcType === 'A'">
                    <h5 style="color: #000;">Aggregate member summary</h5>
                    <span>Number of members: 24</span>&nbsp;
                    <span>Average ANB: 38</span>&nbsp;
                    <span>Average earning per member: 38</span>&nbsp;
                    <div>
                        <span>Convert to a detailed policy</span>&nbsp;
                        <div class="col-12 policy-button-container">
                            <button class="policy-button float-left">
                                <span class="text">Convert</span>
                            </button>
                        </div>
                    </div>



                </ng-container>
                <ng-container *ngIf="quotationCalcType === 'D'">
                    <div>
                        <h6 style="color: black;">Add members</h6>
                        <h6 style="color: gray;">
                            Download member upload template
                            <a style="text-decoration: underline; cursor: pointer;"
                                (click)="downloadMemberUploadTemplate()" class="link">here</a>
                        </h6>
                        <div class="p-col-3">
                            <input type="file" #fileInput style="display: none;" accept=".csv">
                            <button class="choose-file" (click)="openFileInput()">
                                <span class="file-text">Choose file</span>
                            </button>
                        </div>
                    </div>
                    <div class="mt-2">
                        <div class="col-md-12 mb-1">

                            <!-- search in member details table -->

                            <form [formGroup]="searchFormMemberDets">
                                <div class="custom-row">
                                    <div class="col-md-11 col-lg-11 col-sm-12 col-xs-12">
                                        <div class="d-flex justify-content-end">
                                            <div class="scrollable-container">
                                                <div class="col-xs-12" style="display: inline-block; color: black;">
                                                    Filter
                                                    by</div>
                                                <div class="col-md-2 col-sm-12 form-groupp searchForm"
                                                    style="display: inline-block; padding-left: 5px;">
                                                    <p-dropdown id='filterby' [optionLabel]="'surname'"
                                                        [style]="{ width: '100%', height: '38px', 'line-height': '10px'}"
                                                        formControlName='filterby' placeholder="Select option">
                                                    </p-dropdown>
                                                </div>
                                                <div class="col-md-2 col-sm-12 searchForm"
                                                    style="display: inline-block; margin-left: 5px;">
                                                    <input type="text" pInputText class="form-control"
                                                        formControlName="greaterOrEqual" id="greaterOrEqual"
                                                        placeholder="greater than, equals...">
                                                </div>
                                                <div class="col-md-2 col-sm-12 searchForm"
                                                    style="display: inline-block; margin-left: 5px;">
                                                    <input type="text" pInputText class="form-control"
                                                        formControlName="valueEntered" id="valueEntered"
                                                        placeholder="Enter value">
                                                </div>
                                                <div class="col-md-2 col-sm-12 searchForm search">
                                                    <div class="box">
                                                        <i class="fa fa-search" aria-hidden="true"></i>
                                                        <input type="text" class="custom-form-control"
                                                            formControlName="searchMember" id="searchMember"
                                                            placeholder="Search..." [style]="{ height: '38px' }" />
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-1 col-lg-1 col-sm-12 col-xs-12 ">
                                        <div class="add-client-button-container">
                                            <button class="btn btn-success m-1 rounded-circle"
                                                (click)="addMemberDetailsModal()">&plus;</button>
                                        </div>
                                    </div>
                                </div>

                            </form>
                            <!-- end of search in member details table  -->

                            <div class="field-checkbox" style="padding-bottom: 5px;">
                                <p-table [value]="" [tableStyle]="{'max-width': '100%'}" [paginator]="true" [rows]="10"
                                    [showCurrentPageReport]="true"
                                    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                                    [rowsPerPageOptions]="[10,25,50]">
                                    <ng-template pTemplate="header">
                                        <tr>
                                            <th pSortableColumn="surname" style="width:auto">Surname <p-sortIcon
                                                    field="surname"></p-sortIcon></th>
                                            <th pSortableColumn="other_names" style="width:auto">Other name <p-sortIcon
                                                    field="other_names"></p-sortIcon></th>
                                            <th pSortableColumn="date_of_birth" style="width:auto">Date of birth
                                                <p-sortIcon field="date_of_birth"></p-sortIcon></th>
                                            <th pSortableColumn="gender" style="width:auto">Gender <p-sortIcon
                                                    field="gender"></p-sortIcon></th>
                                            <th pSortableColumn="member_number" style="width:auto">Payroll/Member no
                                                <p-sortIcon field="member_number"></p-sortIcon>
                                            </th>
                                            <th pSortableColumn="description" style="width:auto">Category <p-sortIcon
                                                    field="description"></p-sortIcon></th>
                                            <th pSortableColumn="dty_description" style="width:auto">Dependant type
                                                <p-sortIcon field="dty_description"></p-sortIcon>
                                            </th>
                                            <th pSortableColumn="monthly_earnings" style="width:auto">Monthly earnings
                                                <p-sortIcon field="monthly_earnings"></p-sortIcon>
                                            </th>
                                            <th pSortableColumn="date_joined" style="width:auto">Joining date<p-sortIcon
                                                    field="date_joined"></p-sortIcon></th>
                                            <th pSortableColumn="member_number" style="width:10%">Main member
                                                no<p-sortIcon field="member_number"></p-sortIcon></th>
                                            <th style="width:auto">Action</th>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="body">
                                        <tr>
                                            <td></td>
                                            <!-- <td><i class="fas fa-ellipsis-v"></i></td> -->
                                            <td style="text-align: center;">
                                                <!-- <button class="edit-button">
                                    <i class="fa fa-pencil" aria-hidden="true"></i>
                                </button> -->
                                                <button class="delete-button">
                                                    <i class="fa fa-trash" aria-hidden="true"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="emptymessage" let-columns>
                                        <tr>
                                            <td></td>
                                            <td></td>
                                            <!-- <td *ngIf="membersDetails && membersDetails.length === 0" colspan="5">
                                        No record captured. Click on + icon to add.
                                </td> -->
                                        </tr>
                                    </ng-template>

                                </p-table>
                            </div>
                        </div>
                    </div>
                </ng-container>
            </p-tabPanel>

            <p-tabPanel header="Co-insurance">

                <div class="add-client-button-container" style="max-width: 50rem;">
                    <button class="btn btn-success m-1 rounded-circle" (click)="showCoInsurerModal()">&plus;</button>
                </div>
                <p-table [value]="coinsuranceDetails" [scrollable]="true" scrollHeight="400px" [tableStyle]="{'max-width': '50rem'}">
                    <ng-template pTemplate="header">
                        <tr>
                            <th style="width: calc(100% / 4);">Co-insurer</th>
                            <th style="width: calc(100% / 4);">Leader/follower</th>
                            <th style="width: calc(100% / 4);">Co-insurer share</th>
                            <th style="width: calc(100% / 4);">Service charge</th>
                            <th class="action-column"></th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-coinsurance>
                        <tr>
                            <td>{{ coinsurance.coinsurer_display }}</td>
                            <td>{{ coinsurance.follower_leader }}</td>
                            <td>{{ coinsurance.pol_coinsure_leader_share }}</td>
                            <td>{{ coinsurance.pol_coin_srvce_fee }}</td>
                            <td class="action-column">
                                <div class="flex justify-content-center">
                                    <p-overlayPanel #op>
                                        <div class="action-buttons">
                                            <!-- Edit button -->
                                            <div class="button-wrapper">
                                                <!-- <p-button label="Edit" icon="pi pi-pencil" (click)="showEditCoinsuranceDetailsModal(coinsurance)" -->
                                                    <p-button label="Edit" icon="pi pi-pencil"
                                                    styleClass="p-button-rounded p-button-text" severity="warning"></p-button>
                                            </div>
                                        
                                            <!-- Delete button -->
                                            <div class="button-wrapper">
                                                <!-- <p-button label="Delete" icon="pi pi-trash" (click)="deleteCoinsurance(coinsurance, $event)" -->
                                                    <p-button label="Delete" icon="pi pi-trash"
                                                    styleClass="p-button-rounded p-button-text" severity="danger"></p-button>
                                            </div>
                                        </div>
                                        
                                    </p-overlayPanel>
                                    <!-- Ellipsis container -->
                                    <div class="button-container">
                                        <button class="hover-button" (click)="op.toggle($event)">
                                            <i class="fas fa-ellipsis-v" (click)="op.toggle($event)"></i>
                                        </button>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </p-tabPanel>
            <p-tabPanel header="Documents">
                <p-table [value]="policyDocuments" [scrollable]="true" scrollHeight="400px" [tableStyle]="{'max-width': '50rem'}">
                    <ng-template pTemplate="header">
                        <tr>
                            <th>Document</th>
                            <th>Exempted?</th>
                            <th>Upload</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-polDocs>
                        <tr>
                            <td>{{ polDocs.document_display | titlecase }}</td>
                            <td>{{ polDocs.gpd_is_doc_submitted }}</td>
                            <td>
                                <input type="file" #fileInput style="display: none;">
                                <button class="choose-file">
                                    <span class="file-text">Choose file</span>
                                </button>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </p-tabPanel>
        </p-tabView>
        <!-- modals -->
        <!-- modal to capture member details -->
        <div class="modal fade" tabindex="-1" #detailedModal id="addMemberModal" aria-labelledby="addMemberModalLabel"
            aria-hidden="true" style="color: #333;">
            <div class="modal-dialog modal-xl">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="addMemberModalLabel">Member details</h5>
                        <button type="button" class="custom-red-button" data-bs-dismiss="modal" aria-label="Close"
                            (click)="closeAddMemberDetailsModal()"></button>
                    </div>
                    <div class="modal-body">
                        <form [formGroup]="memberDetailsForm">
                            <div class="row">
                                <div class="col-md-4">

                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                        <label for="surname">Surname</label>
                                        <div class="form-group">
                                            <div>
                                                <input type="text" pInputText class="form-control"
                                                    id="surname" [style]="{ width: '100%' }"
                                                    formControlName="surname">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <div>
                                            <label for="gender">Gender</label>
                                        </div>
                                        <div class="form-group">
                                            <div>
                                                <input type="text" pInputText class="form-control"
                                                    id="gender" [style]="{ width: '100%' }"
                                                    formControlName="gender">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <div>
                                            <label for="dependantType">Dependant type</label>
                                        </div>
                                        <div>
                                            <input type="text" pInputText class="form-control" id="dependantType"
                                                [style]="{ width: '100%' }" formControlName="dependantType">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">

                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                        <label for="otherNames">Other name</label>
                                        <div class="form-group">
                                            <div>
                                                <input type="text" pInputText class="form-control"
                                                    id="otherNames" [style]="{ width: '100%' }"
                                                    formControlName="otherNames">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="mt-3">
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <label for="payrollNumber">Payroll/member no</label>
                                            <div class="form-group">
                                                <div>
                                                    <input type="text" pInputText class="form-control"
                                                        id="payrollNumber" [style]="{ width: '100%' }"
                                                        formControlName="payrollNumber">
                                                </div>
                                            </div>
                                        </div>

                                    </div>

                                    <div class="mt-3">
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <label for="monthlyEarning">Monthly earning</label>
                                            <div class="form-group">
                                                <div>
                                                    <input type="text" pInputText class="form-control"
                                                        id="monthlyEarning" [style]="{ width: '100%' }"
                                                        formControlName="monthlyEarning">
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                        <label for="dateOfBirth">Date of birth</label>
                                        <p-calendar formControlName="dateOfBirth"></p-calendar>
                                    </div>

                                    <div class="mt-3">
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <label for="category">Category</label>
                                            <div class="form-group">
                                                <div>
                                                    <input type="text" pInputText class="form-control"
                                                        id="category" [style]="{ width: '100%' }"
                                                        formControlName="category">
                                                </div>
                                            </div>
                                        </div>

                                    </div>

                                    <div class="mt-3">
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <label for="joiningDate">Joining date</label>
                                            <p-calendar formControlName="joiningDate"></p-calendar>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <div class="mt-3">
                                <div class="accordion" id="accordionExample">
                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="headingThree">
                                            <button class="accordion-button collapsed" type="button"
                                                data-bs-toggle="collapse" data-bs-target="#collapseThree"
                                                aria-expanded="false" aria-controls="collapseThree">
                                                Cover type loading
                                            </button>
                                        </h2>
                                        <div id="collapseThree" class="accordion-collapse collapse"
                                            aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                                            <div class="accordion-body">
                                                <div class="row col-md-12">

                                                    <div class="col-md-4 col-sm-12">
                                                        <label for="coverType">Cover type</label>
                                                        <div class="form-group">
                                                            <div>
                                                                <input type="text" pInputText class="form-control"
                                                                    id="coverType" [style]="{ width: '100%' }"
                                                                    formControlName="coverType">
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-md-4">
                                                        <div>
                                                            <label for="rate">Rate</label>
                                                        </div>
                                                        <div class="form-group">
                                                            <div>
                                                                <input type="number" pInputText class="form-control"
                                                                    id="rate"
                                                                    [style]="{ width: '100%' }"
                                                                    formControlName="rate">
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-md-4">
                                                        <div>
                                                            <label for="rateDivFactor">Rate division factor</label>
                                                        </div>
                                                        <div>
                                                            <input type="number" pInputText class="form-control"
                                                                id="rateDivFactor" [style]="{ width: '100%' }"
                                                                formControlName="rateDivFactor">
                                                        </div>
                                                    </div>

                                                </div>
                                                <div class="row col-12">
                                                    <div class="col-md-4 mt-2">
                                                        <label>Loading reason</label>
                                                        <textarea rows="5" cols="30" pInputTextarea formControlName="loadingReason"></textarea>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                            (click)="closeAddMemberDetailsModal()">Close</button>
                        <button type="submit" class="btn btn-primary">Save</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- end of modal to capture member details -->

        <!-- cover types -->
        <div class="modal fade" tabindex="-1" #detailedModal id="detailedModal" aria-labelledby="detailedModalLabel"
            aria-hidden="true" style="color: #333;">
            <div class="modal-dialog modal-xl">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="detailedModalLabel">Cover details</h5>
                        <button type="button" class="custom-red-button" data-bs-dismiss="modal" aria-label="Close"
                            (click)="closeDetailedModal()"></button>
                    </div>
                    <div class="modal-body">
                        <form [formGroup]="coverDetsForm">
                            <div class="row">
                                <div class="col-md-4">

                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                        <label for="coverType">Cover type</label>
                                        <div>
                                            <input type="text" pInputText class="form-control"
                                                id="coverType" [style]="{ width: '100%' }"
                                                formControlName="coverType">
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <div>
                                            <label for="noOfMembers">No of members</label>
                                        </div>
                                        <div class="form-group">
                                            <div>
                                                <input type="number" pInputText class="form-control"
                                                    id="noOfMembers" [style]="{ width: '100%' }"
                                                    formControlName="noOfMembers">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <div>
                                            <label for="dependantType">Dependant type</label>
                                        </div>
                                        <div>
                                            <input type="text" pInputText class="form-control" id="dependantType"
                                                [style]="{ width: '100%' }" formControlName="dependantType">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">

                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                        <label for="overridePremiums">Override premiums</label>
                                        <div>
                                            <input type="text" pInputText class="form-control"
                                                id="overridePremiums" [style]="{ width: '100%' }"
                                                formControlName="overridePremiums">
                                        </div>
                                    </div>

                                    <div class="mt-3">

                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <label for="averageEarning">Average earning per member</label>
                                            <div>
                                                <input type="text" pInputText class="form-control"
                                                    id="averageEarning" [style]="{ width: '100%' }"
                                                    formControlName="averageEarning">
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <div class="col-md-4">

                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                        <label for="averageAnb">Average ANB</label>
                                        <div>
                                            <input type="text" pInputText class="form-control"
                                                id="averageAnb" [style]="{ width: '100%' }"
                                                formControlName="averageAnb">
                                        </div>
                                    </div>

                                    <div class="mt-3">

                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <label for="sumAssured">Sum assured</label>
                                            <div>
                                                <input type="text" pInputText class="form-control"
                                                    id="sumAssured" [style]="{ width: '100%' }"
                                                    formControlName="sumAssured">
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <div class="mt-3">
                                <div class="accordion" id="accordionExample">
                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="headingThree">
                                            <button class="accordion-button collapsed" type="button"
                                                data-bs-toggle="collapse" data-bs-target="#collapseThree"
                                                aria-expanded="false" aria-controls="collapseThree">
                                                Cover type loading
                                            </button>
                                        </h2>
                                        <div id="collapseThree" class="accordion-collapse collapse"
                                            aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                                            <div class="accordion-body">
                                                <div class="row col-md-12">

                                                    <div class="col-md-4 col-sm-12">
                                                        <label for="loading">Loading</label>
                                                        <select class="form-select" [id]="'loading'"
                                                            formControlName="loading">
                                                            <ng-container *ngFor="let cover">
                                                                <option [value]="cover['cvt_desc']">{{ cover['cvt_desc']
                                                                    | titlecase }}</option>
                                                            </ng-container>
                                                        </select>
                                                    </div>

                                                    <div class="col-md-4">
                                                        <div>
                                                            <label for="rate">Rate</label>
                                                        </div>
                                                        <div class="form-group">
                                                            <div>
                                                                <input type="number" pInputText class="form-control"
                                                                    id="rate"
                                                                    [style]="{ width: '100%' }"
                                                                    formControlName="rate">
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-md-4">
                                                        <div>
                                                            <label for="rateDivFactor">Rate division factor</label>
                                                        </div>
                                                        <div>
                                                            <input type="text" pInputText class="form-control"
                                                                id="rateDivFactor" [style]="{ width: '100%' }"
                                                                formControlName="rateDivFactor">
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer pull-center">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="detailedModal"
                            (click)="closeDetailedModal()">Close</button>
                        <button type="button" class="btn btn-primary">Save</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- end of cover types modal -->


        <!-- category modal -->
        <div class="modal fade" tabindex="-1" #categoryDetsModal id="categoryDetsModal"
            aria-labelledby="categoryDetsModal" aria-hidden="true" style="color: #333;">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="categoryDetsModal">Capture category details</h5>
                        <button type="button" class="custom-red-button" data-bs-dismiss="modal" aria-label="Close"
                            (click)="closeCategoryDetstModal()"></button>
                    </div>
                    <div class="modal-body">
                        <form [formGroup]="categoryDetailForm">
                            <div class="row">
                                <div class="col-md-6">
                                    <!-- Content A (left side) -->
                                    <div>
                                        <div>
                                            <label class="label" for="shortDescription">Short description<span
                                                    class="required"></span></label>
                                        </div>
                                        <div class="form-group">
                                            <input type="text" pInputText class="form-control"
                                                formControlName="shortDescription" />
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <label class="label" for="premiumMask">Premium mask<span
                                                    class="required"></span></label>
                                                    <div class="form-group">
                                                        <input type="text" pInputText class="form-control"
                                                            formControlName="premiumMask" />
                                                    </div>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-md-6">
                                    <!-- Content B (right side) -->
                                    <div>
                                        <div>
                                            <label class="label" for="description">Description<span
                                                    class="required"></span></label>
                                        </div>
                                        <div class="form-group">
                                            <div class="form-group">
                                                <input type="text" pInputText class="form-control"
                                                    formControlName="description" />
                                            </div>
                                        </div>

                                    </div>
                                    <div class="mt-3">
                                        <div>
                                            <label class="label" for="multiplesOfEarnings">Multiple of earnings<span
                                                    class="required"></span></label>
                                        </div>
                                        <div class="form-group">
                                            <input type="number" pInputText class="form-control"
                                                formControlName="multiplesOfEarnings" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                            (click)="closeCategoryDetstModal()">Close</button>
                        <button type="button" class="btn btn-primary" (click)="isEditMode ? updateCategory() : onSaveCatDets()">Save</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- end of category modal -->

        <!-- co-insurance modal -->
        <div class="modal fade" tabindex="-1" #coInsurerModal id="coInsurerModal" aria-labelledby="coInsurerModal"
            aria-hidden="true" style="color: #333;">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="coInsurerModal">Co-insurer</h5>
                        <button type="button" class="custom-red-button" data-bs-dismiss="modal" aria-label="Close"
                            (click)="closeCoInsurerModal()"></button>
                    </div>
                    <div class="modal-body">
                        <form [formGroup]="coInsuranceForm">
                            <div class="row">
                                <div class="col-md-6">
                                    <!-- Content A (left side) -->
                                    <div>
                                        <div>
                                            <label class="label" for="conInsurer">Select co
                                                insurer<span></span></label>
                                        </div>
                                        <select class="form-select" id="conInsurer"
                                                formControlName="conInsurer">
                                                <ng-container *ngFor="let mask">
                                                    <option [value]="mask['pmas_code']">{{ mask['pmas_sht_desc'] |
                                                        titlecase }}</option>
                                                </ng-container>
                                            </select>
                                    </div>
                                    <div class="mt-3">
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <label class="label" for="coInsuranceShare">Co-insurance
                                                share<span></span></label>
                                                <div class="form-group">
                                                    <input type="text" pInputText class="form-control"
                                                        formControlName="coInsuranceShare" />
                                                </div>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-md-6">
                                    <!-- Content B (right side) -->
                                    <div>
                                        <div>
                                            <label class="label"
                                                for="multiplesOfEarnings">Leader/follower?<span></span></label>
                                        </div>
                                        <div class="mt-2" style="padding-top: 5px; white-space: nowrap;">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="leaderFollower"
                                                    id="leader" value="leader" formControlName="leaderFollower">
                                                <label class="form-check-label" for="leader">Leader</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="leaderFollower"
                                                    id="follower" value="follower" formControlName="leaderFollower">
                                                <label class="form-check-label" for="follower">Follower</label>
                                            </div>
                                        </div>


                                    </div>
                                    <div class="mt-3">
                                        <div>
                                            <label class="label" for="serviceCharge">Service
                                                charge<span></span></label>
                                        </div>
                                        <div class="form-group">
                                            <input type="text" pInputText class="form-control"
                                                formControlName="serviceCharge" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                            (click)="closeCoInsurerModal()">Close</button>
                        <!-- <button type="button" class="btn btn-primary" (click)="onSaveCatDets()">Save</button> -->
                        <button type="button" class="btn btn-primary">Save</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- end of co-insurance modal -->

        <!-- edit endorsement -->
        <div class="modal fade" tabindex="-1" #endorsementDetsModal id="endorsementDetsModal"
            aria-labelledby="endorsementDetsModal" aria-hidden="true" style="color: #333;">
            <div class="modal-dialog modal-xl">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="endorsementDetsModal">Edit endorsement details</h5>
                        <button type="button" class="custom-red-button" data-bs-dismiss="modal" aria-label="Close"
                            (click)="closeEndorsementDetsModalModal()"></button>
                    </div>
                    <div class="modal-body">
                        <form [formGroup]="endorsementDetailForm">
                            <div class="row">
                                <div class="col-md-6">
                                    <!-- Content A (left side) -->
                                    <div>
                                        <div>
                                            <label class="label" for="intermediary">Intermediary<span></span></label>
                                        </div>
                                        <select class="form-select" id="intermediary"
                                                formControlName="intermediary">
                                                <ng-container *ngFor="let mask">
                                                    <option [value]="mask['pmas_code']">{{ mask['pmas_sht_desc'] |
                                                        titlecase }}</option>
                                                </ng-container>
                                            </select>
                                    </div>
                                    <div class="mt-3">
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <label class="label" for="effctiveDate">Effective date<span></span></label>
                                            <p-calendar formControlName="effctiveDate"></p-calendar>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <label class="label" for="paymentFrequency">Payment
                                                ferquency<span></span></label>
                                            <select class="form-select" id="premium_mask_short_description"
                                                formControlName="paymentFrequency">
                                                <ng-container *ngFor="let mask">
                                                    <option [value]="mask['pmas_code']">{{ mask['pmas_sht_desc'] |
                                                        titlecase }}</option>
                                                </ng-container>
                                            </select>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-md-6">
                                    <!-- Content B (right side) -->
                                    <div>
                                        <div>
                                            <label class="label" for="mask">Mask<span></span></label>
                                        </div>
                                        <select class="form-select" id="mask"
                                                formControlName="mask">
                                                <ng-container *ngFor="let mask">
                                                    <option [value]="mask['pmas_code']">{{ mask['pmas_sht_desc'] |
                                                        titlecase }}</option>
                                                </ng-container>
                                            </select>

                                    </div>
                                    <div class="mt-3">
                                        <div>
                                            <label class="label" for="durationType">Duration
                                                type<span></span></label>
                                        </div>
                                        <select class="form-select" id="durationType"
                                                formControlName="durationType">
                                                <ng-container *ngFor="let mask">
                                                    <option [value]="mask['pmas_code']">{{ mask['pmas_sht_desc'] |
                                                        titlecase }}</option>
                                                </ng-container>
                                            </select>
                                    </div>
                                    <div class="mt-3">
                                        <div>
                                            <label class="label" for="facultativeType">Facultative
                                                type<span></span></label>
                                        </div>
                                        <select class="form-select" id="facultativeType"
                                                formControlName="facultativeType">
                                                <ng-container *ngFor="let mask">
                                                    <option [value]="mask['pmas_code']">{{ mask['pmas_sht_desc'] |
                                                        titlecase }}</option>
                                                </ng-container>
                                            </select>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary">Save</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- end of edit endorsement modal -->

        <!-- modals -->
    </div>
    <div class="col-12">
        <button type="button" class="btn btn-primary back-button" (click)="onBack()">Back
        </button>
        <div class="col-12 policy-button-container">
            <button class="policy-button" (click)="onProceed()">
                <span class="text">Proceed</span>
            </button>
        </div>
    </div>
</div>