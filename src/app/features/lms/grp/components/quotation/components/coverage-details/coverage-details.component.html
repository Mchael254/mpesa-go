<div class="container">
    <div class="container">
        <app-stepper></app-stepper>
      </div>
    <div id="container">
        <h5 class="mt-1">Cover details</h5>
        <!-- <div class="add-client-button-container">
            <button class="btn btn-success m-2 rounded-circle" (click)="showAggregateCoverDetailsModal()">&plus;</button>
          </div> -->
          <div class="add-client-button-container">
            <button class="btn btn-success m-1 rounded-circle" *ngIf="quatationCalType === 'D'" (click)="showDetailedCoverDetailsModal()">&plus;</button>
            <button class="btn btn-success m-1 rounded-circle" *ngIf="quatationCalType === 'A'" (click)="showAggregateCoverDetailsModal()">&plus;</button>
        </div>
              <!-- modal to capture detailed cover types details -->
              <div class="modal fade" tabindex="-1" #detailedModal id="detailedModal" aria-labelledby="detailedModalLabel" aria-hidden="true"
              style="color: #333;">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="detailedModalLabel">Capture detailed Cover type details</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="closeDetailedModal()"></button>
                    </div>
                    <div class="modal-body">
                    <form [formGroup]="detailedCovDetsForm">
                        <div class="row">
                            <div class="col-md-6">
                            
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <label for="clientType">Cover types</label>
                                    <select class="form-select" [id]="'detailedCoverType'" formControlName="detailedCoverType"
                                    (change)="onCoverTypeSelected($event)">
                                        <ng-container *ngFor="let cover of coverTypePerProd">
                                            <option [value]="cover['cvt_desc']">{{ cover['cvt_desc'] | titlecase }}</option>
                                        </ng-container>
                                    </select>
                                </div>
                                <!-- <div class="mt-3">
                                    <div>
                                        <label for="selectRate">Override premiums</label>
                                    </div>
                                    <div class="form-group">
                                        <div>
                                            <p-dropdown id='overridePremiums'
                                                        [options]=''
                                                        [optionLabel]="''"
                                                        [style]="{ width: '100%', height:'38px', 'line-height': '10px' }"
                                                        formControlName='overridePremiums'
                                                        >
                                            </p-dropdown>
                                        </div>
                                    </div>
                                </div> -->
                                <div class="mt-3">
                                    <div>
                                        <label for="premiumMask">% of Main/yr SA</label>
                                    </div>
                                    <div class="form-group">
                                        <div>
                                            <input 
                                                type="text"
                                                pInputText
                                                class="form-control"
                                                id="detailedPercentageMainYr" 
                                                [style]="{ width: '100%' }"
                                                formControlName="detailedPercentageMainYr">
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-3" *ngIf="selectedRateType === 'C' ">
                                    <div>
                                        <label for="rateDivFactor">Rate</label>
                                    </div>
                                    <div>
                                        <input 
                                            type="number"
                                            pInputText
                                            class="form-control"
                                            id="sumAssured" 
                                            [style]="{ width: '100%' }"
                                            formControlName="rate">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <label for="clientType">Select rate</label>
                                    <select class="form-select" [id]="'selectRate'" formControlName="selectRate">
                                        <ng-container *ngFor="let cover of SelectRateType">
                                            <option [value]="cover['name']">{{ cover['value'] | titlecase }}</option>
                                        </ng-container>
                                    </select>
                                </div>
                                
                                <div class="mt-3">
                                    
                                    <div class="col-lg-12 col-md-12 col-sm-12" *ngIf="selectedRateType !== 'C' ">
                                        <label for="overridePremiums">Premium mask</label>
                                        <select class="form-select" [id]="'premiumMask'" formControlName="premiumMask"
                                        (change)="getSelectedPmasCode($event)">
                                            <ng-container *ngFor="let mask of premiumMask">
                                                <option [value]="mask['pmas_sht_desc']">{{ mask['pmas_sht_desc'] | titlecase }}</option>
                                            </ng-container>
                                        </select>
                                    </div>
                                    
                                </div>
                                <div class="mt-3" *ngIf="selectedRateType === 'C' ">
                                    <div>
                                        <label for="rate">Rate division factor</label>
                                    </div>
                                    <div class="form-group">
                                        <div>
                                            <input 
                                                type="number"
                                                pInputText
                                                class="form-control"
                                                id="sumAssured" 
                                                [style]="{ width: '100%' }"
                                                formControlName="rateDivFactor">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                    </div>
                    <div class="modal-footer pull-center">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="detailedModal" (click)="closeDetailedModal()">Close</button>
                      <button type="button" class="btn btn-primary" (click)="isEditMode ? saveEditedCoverDetails() : saveCoverDetails()">Save</button>
                    </div>
                  </div>
                </div>
              </div>
              <!-- end of modal to capture detailed cover types details -->

              <!-- modal to capture aggregate cover types details -->
              <div class="modal fade" tabindex="-1" #addClientModal id="aggregateModal" aria-labelledby="aggregateModalLabel" aria-hidden="true"
              style="color: #333;">
                <div class="modal-dialog modal-xl">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="aggregateModalLabel">Capture Aggregate Cover type details</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                      (click)="closeAggregateCoverDetailsModal()"></button>
                    </div>
                    <div class="modal-body">
                    <form [formGroup]="aggregateForm">
                        <div class="row">
                            <div class="col-md-4">
                                
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <label for="aggregateMainCover">Cover types</label>
                                    <select class="form-select" [id]="'aggregateCoverType'" formControlName="aggregateCoverType"
                                    (change)="onCoverTypeSelected($event)">
                                        <ng-container *ngFor="let cover of coverTypePerProd">
                                            <option [value]="cover['cvt_desc']">{{ cover['cvt_desc'] | titlecase }}</option>
                                        </ng-container>
                                    </select>
                                </div>
                                
                                <div class="mt-3">
                                    
                                    <div class="col-lg-12 col-md-12 col-sm-12" *ngIf="selectedRateType !== 'C' ">
                                        <label for="aggregateOverridePremiums">Premium mask</label>
                                        <select class="form-select" [id]="'aggrgatePremiumMask'" formControlName="aggrgatePremiumMask"
                                        (change)="getSelectedPmasCode($event)">
                                            <ng-container *ngFor="let mask of premiumMask">
                                                <option [value]="mask['pmas_sht_desc']">{{ mask['pmas_sht_desc'] | titlecase }}</option>
                                            </ng-container>
                                        </select>
                                    </div>
                                    
                                </div>
                                <div class="mt-3">
                                    <div>
                                        <label for="aggregateRateDivFactor">% of Main/yr SA</label>
                                    </div>
                                    <div class="form-group">
                                        <div>
                                            <input 
                                                type="text"
                                                pInputText
                                                class="form-control"
                                                id="aggregatePercentageMainYr" 
                                                [style]="{ width: '100%' }"
                                                formControlName="aggregatePercentageMainYr">
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-3" *ngIf="selectedRateType === 'C' ">
                                    <div>
                                        <label for="aggregatePremiumMask">Rate</label>
                                    </div>
                                    <div class="form-group">
                                        <div class="form-group">
                                            <input 
                                            type="number"
                                            pInputText
                                            class="form-control"
                                            id="rate" 
                                            [style]="{ width: '100%' }" 
                                            formControlName="rate" 
                                           >
                                        </div>
                                    </div>
                                </div>
                                <!-- <div class="mt-3">
                                    <div>
                                        <label for="sumAssured">Category</label>
                                    </div>
                                    <div class="form-group">
                                        <div>
                                            <input 
                                                type="text"
                                                pInputText
                                                class="form-control"
                                                id="category" 
                                                [style]="{ width: '100%' }"
                                                formControlName="category">
                                        </div>
                                    </div>
                                </div> -->
                            </div>
                            <div class="col-md-4">
                               
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <label for="aggregateCoverTypes">Select rate</label>
                                    <select class="form-select" [id]="'aggregateSelectRate'" formControlName="aggregateSelectRate">
                                        <ng-container *ngFor="let rate of SelectRateType">
                                            <option [value]="rate['name']">{{ rate['value'] | titlecase }}</option>
                                        </ng-container>
                                    </select>
                                </div>
                                <div class="mt-3">
                                    <!-- <div class="col-lg-12 col-md-12 col-sm-12">
                                        <label for="aggregatePercentageMainYr">Dependant type</label>
                                        <select class="form-select" [id]="'dependantType'" formControlName="dependantType">
                                            <ng-container *ngFor="let item of currency">
                                                <option [value]="item['label']">{{ item['label'] | titlecase }}</option>
                                            </ng-container>
                                        </select>
                                    </div> -->
                                    
                                </div>
                                <div class="mt-3">
                                    <div>
                                        <label for="noOfMembers">Average earning per member</label>
                                    </div>
                                    <div class="form-group">
                                        <input 
                                        type="number"
                                        pInputText
                                        class="form-control"
                                        id="averageEarningPerMember" 
                                        [style]="{ width: '100%' }" 
                                        formControlName="averageEarningPerMember">
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <div>
                                        <label for="averageAnb">No of members</label>
                                    </div>
                                    <div class="form-group">
                                        <div>
                                            <input 
                                                type="number"
                                                pInputText
                                                class="form-control"
                                                id="noOfMembers" 
                                                [style]="{ width: '100%' }"
                                                formControlName="noOfMembers">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div>
                                    <div>
                                        <label for="aggregateSelectRate">Override premium</label>
                                    </div>
                                    <div class="form-group">
                                            <div>
                                                <input 
                                                    type="text"
                                                    pInputText
                                                    class="form-control"
                                                    id="overridePremiums" 
                                                    [style]="{ width: '100%' }"
                                                    formControlName="overridePremiums">
                                            </div>
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <div>
                                        <label for="dependantType">Average ANB</label>
                                    </div>
                                    <div class="form-group">
                                        <div>
                                            <div class="form-group">
                                                <input 
                                                type="number"
                                                pInputText
                                                class="form-control"
                                                id="averageAnb" 
                                                [style]="{ width: '100%' }" 
                                                formControlName="averageAnb" 
                                               >
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-3" *ngIf="selectedRateType === 'C' ">
                                    <div>
                                        <label for="rate">Rate division factor</label>
                                    </div>
                                    <div class="form-group">
                                        <div class="form-group">
                                            <input 
                                            type="number"
                                            pInputText
                                            class="form-control"
                                            id="rateDivFactor" 
                                            [style]="{ width: '100%' }" 
                                            formControlName="rateDivFactor" 
                                           >
                                        </div>
                                    </div>
                                </div>
                                <!-- <div class="mt-3">
                                    <div>
                                        <label for="sumAssured">Sum assured</label>
                                    </div>
                                    <div class="form-group">
                                        <input 
                                        type="number"
                                        pInputText
                                        class="form-control"
                                        id="sumAssured" 
                                        [style]="{ width: '100%' }" 
                                        formControlName="sumAssured" 
                                       >
                                    </div>

                                </div> -->
                            </div>
                        </div>
                    </form>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="closeAggregateCoverDetailsModal()">Close</button>
                      <button type="button" class="btn btn-primary" (click)="isEditMode ? saveEditedCoverDetails() : saveCoverDetails()">Save</button>
                    </div>
                  </div>
                </div>
              </div>
              <!-- end of modal to capture aggregate cover types details -->

<!-- detailed -->
<div *ngIf="quatationCalType === 'D'">
    <p-table [value]="coverTypes" [tableStyle]="{ 'min-width': '50rem' }">
        <ng-template pTemplate="header">
          <tr>
            <th>Cover type</th>
            <th>Dependant type</th>
            <th>Select Rate</th>
            <th>Premium mask</th>
            <th>Rate</th>
            <th>Rate division factor</th>
            <th>% of main/yr SA</th>
            <th>Action</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-coverTypes >
          <tr>
            <td style="text-align: left; width: 14.5%;" id="tdStyle">{{ coverTypes.cvt_desc | titlecase }} </td>
            <td style="text-align: left; width: 10.5%;" id="tdStyle">{{ coverTypes.dty_description | titlecase }}</td>
            <td style="text-align: left; width: 14.5%;" id="tdStyle">{{ getUseCvrRateDescription(coverTypes.use_cvr_rate) }}</td>
            <td style="text-align: left; width: 12.5%;" id="tdStyle">{{ coverTypes.premium_mask_short_description }}</td>
            <td style="text-align: center; width: 10.5%;" id="tdStyle">{{ coverTypes.premium_rate }} </td>
            <td style="text-align: right; width: 12.5%;" id="tdStyle">{{ coverTypes.rate_division_factor | number }}</td>
            <td style="text-align: right; width: 12.5%;" id="tdStyle">{{ coverTypes.main_sumassured_percentage }}</td>
            <td style="text-align: left; width: 12.5%;">
                <button class="edit-button" (click)="showEditDetailedCoverDetailsModal(coverTypes)">
                    <i class="fa fa-pencil" aria-hidden="true"></i>
                </button>
                <button class="delete-button" (click)="deleteCoverType(coverTypes)">
                    <i class="fa fa-trash" aria-hidden="true"></i>
                </button>
              </td>
          </tr>
        </ng-template>
      </p-table> 
    </div>
<!-- detailed -->


<!-- aggregate -->
<div *ngIf="quatationCalType === 'A'">
    <p-table
      [value]="coverTypes"
      [paginator]="false"
      [rows]="10"
      [showCurrentPageReport]="true"
      [tableStyle]="{'min-width': '50rem'}"
      currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
      [rowsPerPageOptions]="[10, 25, 50]"
    >
      <ng-template pTemplate="header">
        <tr>
          <th>Cover type</th>
          <th>Dependant type</th>
          <!-- <th>Rate type</th> -->
          <th>Select Rate</th>
          <th>Premium mask</th>
          <th>Premium rate</th>
          <th>Rate div factor</th>
          <th>% of main/yr SA</th>
          <th>No of Members</th>
          <th>Average Earnings per member</th>
          <th>Total member earnings</th>
          <th>Average ANB</th>
          <th>Override Premium</th>
          <th>Sum Assured</th>
          <th>Action</th>
        </tr>
      </ng-template>
  
      <ng-template pTemplate="body" let-coverTypes>
        <tr>
            <td class="odd-column" style="text-align: left; width: 13.5%">{{ coverTypes.cvt_desc | titlecase }}</td>
            <td class="even-column" style="text-align: left; width: 6.5%">{{ coverTypes.dty_description | titlecase }}</td>
            <!-- <td style="text-align: right;">{{ coverTypes.cvt_rate_type }}</td> -->
            <td class="odd-column" style="text-align: left; width: 12.5%">{{ getUseCvrRateDescription(coverTypes.use_cvr_rate) }}</td>
           
            <td class="even-column" style="text-align: left; width: 7.5%" id="tdStyle">{{ coverTypes.premium_mask_short_description }}</td>
            <td class="odd-column" style="text-align: center; width: 4.5%" id="tdStyle">{{ coverTypes.premium_rate }}</td>
            <td class="even-column" style="text-align: right; width: 5.5%" id="tdStyle">{{ coverTypes.rate_division_factor | number }}</td>
            <td class="odd-column" style="text-align: right; width: 7%" id="tdStyle">{{ coverTypes.main_sumassured_percentage }}</td>
            <td class="even-column" style="text-align: right; width: 7.5%" id="tdStyle">{{ coverTypes.total_members }} </td>
            <td class="odd-column" class="odd-column" style="text-align: right; width: 7.5%" id="tdStyle">{{ coverTypes.average_earning_per_member | number }}</td>
            <td class="even-column" style="text-align: right; width: 9.5%" id="tdStyle">{{ coverTypes.total_member_earnings | number }}</td>
            <td class="odd-column" class="odd-column" style="text-align: center; width: 4.5%" id="tdStyle">{{ coverTypes.average_anb }} </td>
            <td class="even-column" style="text-align: right; width: 6.5%" id="tdStyle">{{ coverTypes.but_charge_premium | number}} </td>
            <td class="odd-column" style="text-align: right; width: 7.5%" id="tdStyle">{{ coverTypes.sum_assured | number }}</td>
            <td style="text-align: right;">
                <button class="edit-button" (click)="showEditAggregateCoverDetailsModal(coverTypes)">
                    <i class="fa fa-pencil" aria-hidden="true"></i>
                </button>
                <button class="delete-button" (click)=" deleteCoverType(coverTypes)">
                    <i class="fa fa-trash" aria-hidden="true"></i>
                </button>
            </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
  
<!-- aggregate -->


        <h5 class="mt-5 mb-1">Category details</h5>
        <div style="max-width: 50rem;">
          <div class="add-client-button-container">
            <button class="btn btn-success m-1 rounded-circle" (click)="showCategoryDetstModal()">&plus;</button>
          </div>
          <!-- modal to capture category details -->
          <div class="modal fade" tabindex="-1" #categoryDetsModal id="categoryDetsModal" aria-labelledby="categoryDetsModal" aria-hidden="true"
          style="color: #333;">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="categoryDetsModal">Capture category details</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                  (click)="closeCategoryDetstModal()"></button>
                </div>
                <div class="modal-body">
                <form [formGroup]="categoryDetailForm">
                    <div class="row">
                        <div class="col-md-6">
                            <!-- Content A (left side) -->
                            <div>
                                <div>
                                    <label class="label" for="description">Description<span class="required"></span></label>
                                </div>
                                <div class="form-group">
                                            <input 
                                                    type="text"
                                                    pInputText
                                                    class="form-control"
                                                    formControlName="description"/>
                                </div>
                            </div>
                            <div class="mt-3">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <label class="label" for="premiumMask">Premium mask<span class="required"></span></label>
                                    <select class="form-select" id="premium_mask_short_description" formControlName="premiumMask">
                                        <ng-container *ngFor="let mask of premiumMask">
                                            <option [value]="mask['pmas_code']">{{ mask['pmas_sht_desc'] | titlecase }}</option>
                                        </ng-container>
                                    </select>
                                </div>
                            </div>
                            
                        </div>
                        <div class="col-md-6">
                            <!-- Content B (right side) -->
                            <div>
                                <div>
                                    <label class="label" for="shortDescription">Short description<span class="required"></span></label>
                                </div>
                                <div class="form-group">
                                    <div class="form-group">
                                        <input 
                                                type="text"
                                                pInputText
                                                class="form-control"
                                                formControlName="shortDescription"/>
                            </div>
                                </div>
                                
                            </div>
                            <div class="mt-3">
                                <div>
                                    <label class="label" for="multiplesOfEarnings">Multiple of earnings<span class="required"></span></label>
                                </div>
                                <div class="form-group">
                                        <input 
                                        type="number"
                                        pInputText
                                        class="form-control"
                                        formControlName="multiplesOfEarnings"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="closeCategoryDetstModal()">Close</button>
                  <!-- <button type="button" class="btn btn-primary" (click)="onSaveCatDets()">Save</button> -->
                  <button type="button" class="btn btn-primary" (click)="isEditMode ? onSaveEditCatDets() : onSaveCatDets()">Save</button>
                </div>
              </div>
            </div>
          </div>
          <!-- end of modal to capture category details -->

<p-table *ngIf="categoryDetails" [value]="categoryDetails" [rows]="10" [showCurrentPageReport]="true" [tableStyle]="{'max-width': '50rem'}"
         currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries">
    <ng-template pTemplate="header">
        <tr>
            <th style="width:12.5%">Short description</th>
            <th style="width:12.5%">Description</th>
            <th style="width:12.5%">Multiple of earnings</th>
            <th style="width:12.5%">Premium mask</th>
            <th>Action</th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-categoryDetails let-columns="columns">
        <tr>
            <td style="width:12.5%" id="tdStyle">{{ categoryDetails.short_description | titlecase }}</td>
            <td id="tdStyle">{{ categoryDetails.category_category | titlecase }}</td>
            <td style="text-align: center;" id="tdStyle">{{ categoryDetails.period }}</td>
            <td id="tdStyle">{{ categoryDetails.pmas_sht_desc}}</td>
            <td>
                <button class="edit-button" (click)="showEditCategoryDetstModal(categoryDetails)">
                    <i class="fa fa-pencil" aria-hidden="true"></i>
                </button>
                <button class="delete-button" (click)="deleteCategoryDets(categoryDetails)">
                    <i class="fa fa-trash" aria-hidden="true"></i>
                </button>
            </td>
            <!-- <td class="ellipsis-container">
                <i class="fas fa-ellipsis-v"></i>
              </td> -->
        </tr>
    </ng-template>

    <ng-template pTemplate="emptymessage" let-columns>
        <tr>
            <td></td>
            <td *ngIf="categoryDetails && categoryDetails.length === 0" colspan="4">
                    No record captured. Click on + icon to add.
            </td>
        </tr>
    </ng-template>
</p-table>

        </div>

            <div>
                <h5 class="mt-5">Member details</h5>
                <h6 style="color: black;">Add members</h6>
                      <h6 style="color: gray;">
                        Download member upload template
                        <a style="text-decoration: underline; cursor: pointer;" (click)="downloadMemberUploadTemplate()" class="link">here</a>
                      </h6>
                <div class="p-col-3">
                    <h6 style="color: rgb(44, 43, 43);">Upload member details template</h6>
                    <input type="file" #fileInput style="display: none;" accept=".csv">
                    <button class="choose-file" (click)="openFileInput()">
                        <span class="file-text">Choose file</span>
                    </button>
                </div>
                </div>
            <div class="mt-5">
                <div class="col-md-12 mb-1">
                    
                    <!-- search in member details table -->

                  <form [formGroup]="searchFormMemberDets">
                    <div class="custom-row">
                        <div class="col-md-11 col-lg-11 col-sm-12 col-xs-12">
                          <div class="d-flex justify-content-end">
                            <div class="scrollable-container">
                            <div class="col-xs-12" style="display: inline-block; color: black;">Filter by</div>
                            <div class="col-md-2 col-sm-12 form-groupp searchForm" style="display: inline-block; padding-left: 5px;">
                                <p-dropdown id='filterby'
                                [options]='membersDetails'
                                [optionLabel]="'surname'"
                                [style]="{ width: '100%', height: '38px', 'line-height': '10px'}"
                                formControlName='filterby' 
                                placeholder="Select option"
                                >
                                </p-dropdown>
                            </div>
                            <div class="col-md-2 col-sm-12 searchForm" style="display: inline-block; margin-left: 5px;">
                              <input 
                                type="text"
                                pInputText
                                class="form-control"
                                formControlName="greaterOrEqual"
                                id="greaterOrEqual"
                                placeholder="greater than, equals..."
                              >
                            </div>
                            <div class="col-md-2 col-sm-12 searchForm" style="display: inline-block; margin-left: 5px;">
                              <input 
                                type="text"
                                pInputText
                                class="form-control"
                                formControlName="valueEntered"
                                id="valueEntered"
                                placeholder="Enter value"
                              >
                            </div>
                            <div class="col-md-2 col-sm-12 searchForm search">
                                <div class="box">
                                    <i class="fa fa-search" aria-hidden="true"></i>
                                  <input
                                    type="text"
                                    class="custom-form-control"
                                    formControlName="searchMember"
                                    id="searchMember"
                                    placeholder="Search..."
                                    [style]="{ height: '38px' }"
                                  />
                                </div>
                              </div>
                              
                          </div>
                        </div>
                        </div>
                        
                        <div class="col-md-1 col-lg-1 col-sm-12 col-xs-12 ">
                            <div class="add-client-button-container">
                              <button class="btn btn-success m-1 rounded-circle" (click)="addMemberDetailsModal()">&plus;</button>
                            </div>
                        </div>
                      </div>
                      
                  </form>
                  <!-- end of search in member details table  -->

                   <!-- modal to capture member details -->
                   <div class="modal fade" tabindex="-1" #detailedModal id="addMemberModal" aria-labelledby="addMemberModalLabel" aria-hidden="true"
                   style="color: #333;">
                     <div class="modal-dialog">
                       <div class="modal-content">
                         <div class="modal-header">
                           <h5 class="modal-title" id="addMemberModalLabel">Member details</h5>
                           <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                           (click)="closeAddMemberDetailsModal()"></button>
                         </div>
                         <div class="modal-body">
                         <form [formGroup]="memberDetailsForm">
                             <div class="row">
                                 <div class="col-md-6">
                                     <!-- Content A (left side) -->
                                     <div>
                                         <div>
                                             <label for="surname">Surname</label>
                                         </div>
                                         <div class="form-group">
                                             <input type="text"
                                                     pInputText
                                                     class="form-control"
                                                     [style]="{ width: '100%' }"
                                                     id='surname'
                                                     formControlName='surname'
                                                     >
                                         </div>
                                     </div>
                                     <div class="mt-3">
                                         <div>
                                             <label for="dateOfBirth">Date of birth</label>
                                         </div>
                                         <div class="form-group">
                                             <p-calendar formControlName="dateOfBirth" 
                                                         dateFormat="dd/mm/yy" 
                                                         [showIcon]="true" 
                                                         [showButtonBar]="true"
                                                         [style]="{ width: '100%' }"
                                                         placeholder="dd/mm/yy"
                                                         >
                                             </p-calendar>
                                           </div>
                                     </div>
                                     <div class="mt-3">
                                         <div>
                                             <label for="mainMemberNumber">Main member number</label>
                                         </div>
                                         <div class="form-group">
                                             <input type="text"
                                                     pInputText
                                                     class="form-control"
                                                     [style]="{ width: '100%' }"
                                                     id='mainMemberNumber'
                                                     formControlName='mainMemberNumber'
                                                     >
                                         </div>
                                     </div>
                                     <div class="mt-3">
                                         <div class="form-group">
                                            <div class="col-lg-12 col-md-12 col-sm-12">
                                                <label for="overridePremiums">Category</label>
                                                <select class="form-select" [id]="'category'" formControlName="category">
                                                    <ng-container *ngFor="let cat of categoryDetails">
                                                        <option [value]="cat['category_category']">{{ cat['category_category'] | titlecase }}</option>
                                                    </ng-container>
                                                </select>
                                            </div>
                                         </div>
                                     </div>
                                     <div class="mt-3">
                                         <div>
                                             <label for="monthlyEarning">Monthly earning</label>
                                         </div>
                                         <div class="form-group">
                                             <input type="number"
                                                     pInputText
                                                     class="form-control"
                                                     id='monthlyEarning'
                                                     [style]="{ width: '100%' }"
                                                     formControlName='monthlyEarning'
                                                     >
                                         </div>
                                     </div>
                                     <div class="mt-3">
                                        <div>
                                            <label for="joiningDate">Joining date</label>
                                        </div>
                                        <div class="form-group" style="border-radius: 6px;">
                                            <p-calendar formControlName="joiningDate" 
                                                        dateFormat="dd/mm/yy" 
                                                        [showIcon]="true" 
                                                        [showButtonBar]="true"
                                                        [style]="{ width: '100%' }"
                                                        placeholder="dd/mm/yy"
                                                        >
                                            </p-calendar>
                                          </div>
                                    </div>
                                 </div>
                                 <div class="col-md-6">
                                     <!-- Content B (right side) -->
                                     <div>
                                         <div>
                                             <label for="otherNames">Other names</label>
                                         </div>
                                         <div class="form-group">
                                             <input type="text"
                                                     pInputText
                                                     class="form-control"
                                                     id='otherNames'
                                                     [style]="{ width: '100%' }"
                                                     formControlName='otherNames'
                                                     >
                                         </div>
                                     </div>
                                     <div class="mt-4">
                                         <div>
                                             <label for="gender">Gender</label>
                                         </div>
                                         <div class="form-check radio-group" id="inline">
                                             <input
                                               class="form-check-input box"
                                               type="radio"
                                               value="M"
                                               id="M"
                                               name="gender"
                                               formControlName="gender"
                                             >
                                             <label class="form-check-label pl-2" for="male">
                                                 Male
                                             </label>
                                           </div>
                                           <div class="form-check radio-group" id="inline">
                                             <input
                                               class="form-check-input box"
                                               type="radio"
                                               value="F"
                                               id="female"
                                               name="gender"
                                               formControlName="gender"
                                             >
                                             <label class="form-check-label pl-2" for="female">
                                                 Female
                                             </label>
                                           </div>
                                     </div>
                                     <div class="mt-3" style="padding-top: 5px;">
                                         <div>
                                             <label for="payrollNumber">Payroll/Member number</label>
                                         </div>
                                         <div class="form-group">
                                             <input type="text"
                                                     pInputText
                                                     class="form-control"
                                                     id='payrollNumber'
                                                     [style]="{ width: '100%' }"
                                                     formControlName='payrollNumber'
                                                     >
                                         </div>
                                     </div>
                                     <div class="mt-3">
                                        <div class="form-group">
                                           <div class="col-lg-12 col-md-12 col-sm-12">
                                               <label for="occupation">Occupation</label>
                                               <select class="form-select" [id]="'occupation'" formControlName="occupation">
                                                   <ng-container *ngFor="let occupation of occupation">
                                                       <option [value]="occupation['occupation_code']">{{ occupation['occupation_desc'] | titlecase }}</option>
                                                   </ng-container>
                                               </select>
                                           </div>
                                        </div>
                                    </div>
                                     <div class="mt-3">
                                         <div>
                                             <label for="dependantType">Dependant type</label>
                                         </div>
                                         <div class="form-group">
                                             <div>
                                                 <p-dropdown id='dependantType'
                                                             [options]='addMemberDependantType'
                                                             [optionLabel]="'label'"
                                                             [style]="{ width: '100%', height: '38px', 'line-height': '10px' }"
                                                             formControlName='dependantType' 
                                                             placeholder="Select dependant type"
                                                             >
                                                 </p-dropdown>
                                             </div>
                                         </div>
                                     </div>
                                 </div>
                             </div>
                         </form>
                         </div>
                         <div class="modal-footer">
                           <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="closeAddMemberDetailsModal()">Close</button>
                           <button type="submit" class="btn btn-primary" (click)="addMember()">Submit</button>
                         </div>
                       </div>
                     </div>
                   </div>
              <!-- end of modal to capture member details -->
             
                    <div class="field-checkbox" style="padding-bottom: 5px;">
                        <label style="margin-right: 10px;">Show All Columns</label>
                        <p-checkbox (onChange)="toggleShowAllColumns()" [binary]="true"></p-checkbox>
                <p-table [value]="membersDetails" [tableStyle]="{'max-width': '100%'}">
                    <ng-template pTemplate="header">
                        <tr>
                            <th pSortableColumn="surname" style="width:auto">Surname <p-sortIcon field="surname"></p-sortIcon></th>
                            <th pSortableColumn="other_names" style="width:auto">Other name <p-sortIcon field="other_names"></p-sortIcon></th>
                            <th pSortableColumn="date_of_birth" style="width:auto">Date of birth <p-sortIcon field="date_of_birth"></p-sortIcon></th>
                            <th pSortableColumn="gender" style="width:auto">Gender <p-sortIcon field="gender"></p-sortIcon></th>
                            <th *ngIf="showAllColumns" pSortableColumn="member_number" style="width:auto">Payroll/Member no <p-sortIcon field="member_number"></p-sortIcon></th>
                            <th pSortableColumn="description" style="width:auto">Category <p-sortIcon field="description"></p-sortIcon></th>
                            <th *ngIf="showAllColumns" pSortableColumn="dty_description" style="width:auto">Dependant type <p-sortIcon field="dty_description"></p-sortIcon></th>
                            <th *ngIf="showAllColumns" pSortableColumn="monthly_earnings" style="width:auto">Monthly earnings <p-sortIcon field="monthly_earnings"></p-sortIcon></th>
                            <th *ngIf="showAllColumns" pSortableColumn="date_joined" style="width:auto">Joining date<p-sortIcon field="date_joined"></p-sortIcon></th>
                            <th *ngIf="showAllColumns" pSortableColumn="member_number" style="width:10%">Main member no<p-sortIcon field="member_number"></p-sortIcon></th>
                            <th style="width:auto">Action</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-membersDetails>
                        <tr>
                          <td id="tdStyle">{{ membersDetails.surname }}</td>
                          <td id="tdStyle">{{ membersDetails.other_names }}</td>
                          <td id="tdStyle">{{ membersDetails.date_of_birth }}</td>
                          <td id="tdStyle">{{ membersDetails.gender }}</td>
                          <td id="tdStyle" *ngIf="showAllColumns">{{ membersDetails.member_number }}</td>
                          <td id="tdStyle">{{ membersDetails.description }}</td>
                          <td id="tdStyle" *ngIf="showAllColumns">{{ membersDetails.dty_description  }}</td>
                          <td id="tdStyle" *ngIf="showAllColumns">{{ membersDetails.monthly_earnings }}</td>
                          <td id="tdStyle" *ngIf="showAllColumns">{{ membersDetails.date_joined }}</td>
                          <td *ngIf="showAllColumns" id="tdStyle">{{ membersDetails.member_number }}</td>
                          <!-- <td><i class="fas fa-ellipsis-v"></i></td> -->
                          <td style="text-align: center;">
                            <!-- <button class="edit-button">
                                <i class="fa fa-pencil" aria-hidden="true"></i>
                            </button> -->
                            <button class="delete-button" (click)="deleteMember(membersDetails)">
                                <i class="fa fa-trash" aria-hidden="true"></i>
                            </button>
                          </td>
                        </tr>
                      </ng-template>
                      <ng-template pTemplate="emptymessage" let-columns>
                        <tr>
                            <td></td>
                            <td></td>
                            <td *ngIf="membersDetails && membersDetails.length === 0" colspan="5">
                                    No record captured. Click on + icon to add.
                            </td>
                        </tr>
                    </ng-template>
                      
                </p-table>
            </div>
    </div>
</div>
<div>
    <button
      type="button"
      class="btn btn-primary back-button"
      (click)="onBack()"
    >Back
    </button>

    <button
      type="button"
      class="btn btn-primary button"
      (click)="onProceed()"
    >Compute
    </button>
    <ngx-spinner
      name="download_view"
        type="ball-clip-rotate-multiple"

        [fullScreen]="true"
        color="#00529B"
        size="medium"
        bdColor="rgba(255, 255, 255, 0.9)"
      ></ngx-spinner>
  </div>