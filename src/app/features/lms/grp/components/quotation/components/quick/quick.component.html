<div class="container">  
  <div class="row">
    <div class="col-12" (click)="retrievQuoteDets()">
      <app-stepper [currentStep]="2" [stepperData]="steps"></app-stepper>
    </div>
  </div>
  <div id="container">
      
    <!-- <div><span class="client-details">Client</span></div> -->
    <form class="form" [formGroup]="quickForm">
    <div class="product-details">{{ "lms.grp.quotation.quick_quote.product_details" | translate }}</div>
    <div class="row"> 
        <div class="col-md-4 col-lg-4 col-xs-12 col-sm-12">
            <div class="label"><label>{{ "lms.grp.quotation.quick_quote.product" | translate }}<span style="color: red;">*</span></label></div>
            <div class="form-group">
                <p-dropdown id='products'
                            [options]='productList'
                            [optionLabel]="'label'"
                            [style]="{ width: '100%', height: '37px', 'line-height': '10px' }"
                            formControlName='products' 
                            [virtualScroll]="true" 
                            [virtualScrollItemSize]="40"
                            class="select"
                            [ngClass]="{'is-invalid': highlightInvalid('products')}">
                </p-dropdown>
                <div *ngIf="highlightInvalid('products')" class="invalid-feedback">{{ "lms.grp.quotation.quick_quote.product_is_required" | translate }}</div>
            </div>
        </div>
        <div class="col-md-4 col-lg-4 col-xs-12 col-sm-12">
            <div class="label"><label>{{ "lms.grp.quotation.quick_quote.duration_type" | translate }}<span style="color: red;">*</span></label></div>
            <div class="form-group">
                <p-dropdown id='durationType'
                            [options]='durationType'
                            [optionLabel]="'value'"
                            [style]="{ width: '100%', height: '37px', 'line-height': '10px' }"
                            formControlName='durationType'
                            class="select"
                            [ngClass]="{'is-invalid': highlightInvalid('durationType')}">
                </p-dropdown>
                <div *ngIf="highlightInvalid('durationType')" class="invalid-feedback">{{ "lms.grp.quotation.quick_quote.duration_type_required" | translate }}</div>
            </div>
        </div>
        <div class="col-md-4 col-lg-4 col-xs-12 col-sm-12">
            <div class="label"><label>{{ "lms.grp.quotation.quick_quote.facultative_type" | translate }}<span style="color: red;">*</span></label></div>
            <div class="form-group">
                <p-dropdown id='facultativeType'
                            [options]='facultativeType'
                            [optionLabel]="'value'"
                            [style]="{ width: '100%', height: '37px', 'line-height': '10px' }"
                            formControlName='facultativeType'
                            class="select"
                            [ngClass]="{'is-invalid': highlightInvalid('facultativeType')}">
                </p-dropdown>
                <div *ngIf="highlightInvalid('facultativeType')" class="invalid-feedback">{{ "lms.grp.quotation.quick_quote.facultative_type_required" | translate }}</div>
            </div>
        </div>
    </div>
    <div class="row" style="padding-top: 30px;"> 
        <div class="col-md-4 col-lg-4 col-xs-12 col-sm-12">
            <div class="label"><label>{{ "lms.grp.quotation.quick_quote.quotation_covers" | translate }}<span style="color: red;">*</span></label></div>
            <div class="form-group">
                <p-dropdown id='quotationCovers'
                            [options]='quotationCovers'
                            [optionLabel]="'value'"
                            [style]="{ width: '100%', height: '37px', 'line-height': '10px' }"
                            formControlName='quotationCovers'
                            class="select"
                            [ngClass]="{'is-invalid': highlightInvalid('quotationCovers')}">
                </p-dropdown>
                <div *ngIf="highlightInvalid('quotationCovers')" class="invalid-feedback">{{ "lms.grp.quotation.quick_quote.quote_cover_required" | translate }}</div>
            </div>
        </div>
        <div class="col-md-4 col-lg-4 col-xs-12 col-sm-12" >
            <div class="label"><label>{{ "lms.grp.quotation.quick_quote.frequency_of_payment" | translate }}<span style="color: red;">*</span></label></div>
            <div class="form-group">
                <p-dropdown id='frequencyOfPayment'
                            [options]='frequencyOfPayment'
                            [optionLabel]="'label'"
                            [style]="{ width: '100%', height: '37px', 'line-height': '10px' }"
                            formControlName='frequencyOfPayment'
                            class="select"
                            [ngClass]="{'is-invalid': highlightInvalid('frequencyOfPayment')}">
                </p-dropdown>
                <div *ngIf="highlightInvalid('frequencyOfPayment')" class="invalid-feedback">{{ "lms.grp.quotation.quick_quote.freq_of_payment_required" | translate }}</div>
            </div>
        </div>
        <div class="col-md-4 col-lg-4 col-xs-12 col-sm-12" >
            <div class="label"><label>{{ "lms.grp.quotation.quick_quote.unit_rate_option" | translate }}<span style="color: red;">*</span></label></div>
            <div class="form-group">
                <p-dropdown id='unitRateOption'
                            [options]='unitRateOption'
                            [optionLabel]="'name'"
                            [style]="{ width: '100%', height: '37px', 'line-height': '10px' }"
                            formControlName='unitRateOption'
                            class="select"
                            [ngClass]="{'is-invalid': highlightInvalid('unitRateOption')}">
                </p-dropdown>
                <div *ngIf="highlightInvalid('unitRateOption')" class="invalid-feedback">{{ "lms.grp.quotation.quick_quote.unit_rate_is_required" | translate }}</div>
            </div>
        </div>
    </div>
        <div class="row" style="padding-top: 30px;"> 
            <div class="col-md-4 col-lg-4 col-xs-12 col-sm-12">
                <div class="label"><label>{{ "lms.grp.quotation.quick_quote.currency" | translate }}<span style="color: red;">*</span></label></div>
                <div class="form-group">
                    <p-dropdown id='currency'
                                [options]='currencyList'
                                [optionLabel]="'label'"
                                [filter]="true"
                                [filterBy]="'label'"
                                [style]="{ width: '100%', height: '37px', 'line-height': '10px' }"
                                formControlName='currency' 
                                placeholder="Select Currency"
                                class="select"
                                [ngClass]="{'is-invalid': highlightInvalid('currency')}">
                    </p-dropdown>
                    <div *ngIf="highlightInvalid('currency')" class="invalid-feedback">{{ "lms.grp.quotation.quick_quote.currency_is_required" | translate }}</div>
                </div>
            </div>
            <div class="col-md-4 col-lg-4 col-xs-12 col-sm-12">
              <div class="label"><label>{{ "lms.grp.quotation.quick_quote.effective_date" | translate }}<span style="color: red;">*</span></label></div>
              <div class="form-group">
                <p-calendar formControlName="effectiveDate" 
                            dateFormat="dd/mm/yy" 
                            [showIcon]="true" 
                            [showButtonBar]="true"
                            [style]="{ 'width': '100%', height: '37px', 'line-height': '10px' }"
                            placeholder="dd/mm/yy"
                            [maxDate]="maxDate"
                            [ngClass]="{'is-invalid': highlightInvalid('effectiveDate')}"
                            >
                </p-calendar>
                <div *ngIf="highlightInvalid('effectiveDate')" class="invalid-feedback">{{ "lms.grp.quotation.quick_quote.date_is_required" | translate }}</div>
              </div>
            </div>
            <div class="col-md-4 col-lg-4 col-xs-12 col-sm-12">
              <div class="label"><label>{{ "lms.grp.quotation.quick_quote.quotation_calculation_type" | translate }}<span style="color: red;">*</span></label></div>
              <div class="form-check radio-group" id="inline">
                  <input
                    class="form-check-input box"
                    type="radio"
                    value="D"
                    id="quotationCalcType"
                    name="quotationCalcType"
                    formControlName="quotationCalcType"
                    [ngClass]="{'is-invalid': highlightInvalid('quotationCalcType')}"
                  >
                  <label class="form-check-label pl-2" for="detailed">
                      {{ "lms.grp.quotation.quick_quote.detailed" | translate }}
                  </label>
                </div>
                <div class="form-check radio-group" id="inline" style="float: right;">
                  <input
                    class="form-check-input box"
                    type="radio"
                    value="A"
                    id="quotationCalcType"
                    name="quotationCalcType"
                    formControlName="quotationCalcType"
                    [ngClass]="{'is-invalid': highlightInvalid('quotationCalcType')}"
                  >
                  <label class="form-check-label pl-2" for="aggregate">
                      {{ "lms.grp.quotation.quick_quote.aggregate" | translate }}
                  </label>
                </div>
            </div>
      </div>
      <div class="product-details" style="padding-top: 50px;">{{ "lms.grp.quotation.quick_quote.intermediary_details" | translate }}<span style="color: red;">*</span></div>
  <div class="row" > 
      <div class="col-md-4 col-lg-4 col-xs-12 col-sm-12">
          <div class="label"><label>{{ "lms.grp.quotation.quick_quote.intermediary" | translate }}</label></div>
          <div class="form-group">
              <p-dropdown id='intermediary'
                          [options]='intermediaries'
                          [optionLabel]="'name'"
                          [editable]="true"
                          [style]="{ width: '100%', height: '37px', 'line-height': '10px' }"
                          formControlName='intermediary' 
                          class="select"
                          [ngClass]="{'is-invalid': highlightInvalid('intermediary')}"
                          >
              </p-dropdown>
              <div *ngIf="highlightInvalid('intermediary')" class="invalid-feedback">{{ "lms.grp.quotation.quick_quote.intermediary_is_required" | translate }}</div>
          </div>
      </div>
      <div class="col-md-4 col-lg-4 col-xs-12 col-sm-12">
        <div class="label"><label>{{ "lms.grp.quotation.quick_quote.branch" | translate }}</label></div>
        <div class="form-group">
            <p-dropdown id='branch'
                        [options]='branch'
                        [optionLabel]="'name'"
                        [dataKey]="'id'"
                        [style]="{ width: '100%', height: '37px', 'line-height': '10px' }"
                        formControlName='branch' 
                        class="select">
            </p-dropdown>
        </div>
    </div>
      <div class="col-md-4 col-lg-4 col-xs-12 col-sm-12">
        <div class="label"><label>{{ "lms.grp.quotation.quick_quote.commission_rate" | translate }}</label></div>
        <div class="form-group">
          <input type="number" pInputText class="form-control" id='commissionRate' [style]="{ width: '100%', height: '38px' }"
            formControlName='commissionRate' [ngClass]="{'is-invalid': highlightInvalid('commissionRate')}">
          <div *ngIf="highlightInvalid('commissionRate')" class="invalid-feedback">{{ "lms.grp.quotation.quick_quote.commission_cannot_be_greater_than_100" | translate }}</div>
        </div>
      </div>
  </div>
    </form>
  </div>
    <div>
      <button
        type="button"
        class="btn btn-primary button"
        (click)="onContinue()"
      >{{ "lms.grp.quotation.quick_quote.continue" | translate }}
      </button>
    </div>
    <ngx-spinner
      name="download_view"
        type="ball-clip-rotate-multiple"

        [fullScreen]="true"
        color="#00529B"
        size="medium"
        bdColor="rgba(255, 255, 255, 0.9)"
      ></ngx-spinner>
</div>